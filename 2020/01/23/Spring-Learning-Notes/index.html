<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>Spring-Learning-Notes | Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Spring Learning Notes Springä¸ªäººå­¦ä¹ ç¬”è®°(å»ºè®®)  part1 åˆè¯†what å¤§ç®¡å®¶Springæ˜¯äº2003 å¹´å…´èµ·çš„ä¸€ä¸ªè½»é‡çº§çš„Java å¼€æºæ¡†æ¶ï¼Œå®ƒç”±RodJohnsonåˆ›å»ºã€‚ä¼ ç»ŸJ2EEåº”ç”¨çš„å¼€å‘æ•ˆç‡ä½ï¼ŒSpringä½œä¸ºå¼€æºçš„ä¸­é—´ä»¶ï¼Œæä¾›J2EEåº”ç”¨çš„å„å±‚çš„è§£å†³æ–¹æ¡ˆï¼ŒSpringè´¯ç©¿äº†è¡¨ç°å±‚ã€ä¸šåŠ¡å±‚åŠæŒä¹…å±‚ï¼Œè€Œä¸æ˜¯ä»…ä»…ä¸“æ³¨äºæŸä¸€å±‚çš„æ–¹æ¡ˆã€‚å¯ä»¥è¯´Springæ˜¯ä¼ä¸šåº”">
<meta property="og:type" content="article">
<meta property="og:title" content="Spring-Learning-Notes">
<meta property="og:url" content="http://yoursite.com/2020/01/23/Spring-Learning-Notes/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="Spring Learning Notes Springä¸ªäººå­¦ä¹ ç¬”è®°(å»ºè®®)  part1 åˆè¯†what å¤§ç®¡å®¶Springæ˜¯äº2003 å¹´å…´èµ·çš„ä¸€ä¸ªè½»é‡çº§çš„Java å¼€æºæ¡†æ¶ï¼Œå®ƒç”±RodJohnsonåˆ›å»ºã€‚ä¼ ç»ŸJ2EEåº”ç”¨çš„å¼€å‘æ•ˆç‡ä½ï¼ŒSpringä½œä¸ºå¼€æºçš„ä¸­é—´ä»¶ï¼Œæä¾›J2EEåº”ç”¨çš„å„å±‚çš„è§£å†³æ–¹æ¡ˆï¼ŒSpringè´¯ç©¿äº†è¡¨ç°å±‚ã€ä¸šåŠ¡å±‚åŠæŒä¹…å±‚ï¼Œè€Œä¸æ˜¯ä»…ä»…ä¸“æ³¨äºæŸä¸€å±‚çš„æ–¹æ¡ˆã€‚å¯ä»¥è¯´Springæ˜¯ä¼ä¸šåº”">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://github.com/ZephXu07/IMG/raw/master/Spring.png">
<meta property="og:image" content="https://github.com/ZephXu07/IMG/raw/master/BUG%E4%BF%AE%E6%94%B9.png">
<meta property="og:image" content="https://github.com/ZephXu07/IMG/raw/master/SpringProjectStructure.png">
<meta property="og:image" content="https://github.com/ZephXu07/IMG/raw/master/zephxu-Snipaste_2019-09-28_16-29-59.png">
<meta property="og:image" content="https://github.com/ZephXu07/IMG/raw/master/zephxu-Snipaste_2019-09-28_16-53-26.png">
<meta property="og:image" content="https://github.com/ZephXu07/IMG/raw/master/zephxu-Snipaste_2019-09-28_17-04-17.png">
<meta property="og:image" content="https://github.com/ZephXu07/IMG/raw/master/zephxu-Snipaste_2019-09-28_21-22-24.png">
<meta property="og:image" content="https://github.com/ZephXu07/IMG/raw/master/zephxu-Snipaste_2019-09-28_21-29-03.png">
<meta property="og:image" content="https://github.com/ZephXu07/IMG/raw/master/%E4%BD%BF%E7%94%A8Spring%E6%94%B9%E9%80%A0Servlet%E9%A1%B9%E7%9B%AE%E5%AF%B9%E8%B1%A1%E5%85%B3%E7%B3%BB%E4%BE%9D%E8%B5%96%E5%9B%BE.png">
<meta property="og:image" content="https://github.com/ZephXu07/IMG/raw/master/aop%E6%80%9D%E6%83%B3%E6%A6%82%E5%BF%B5%E4%B8%BE%E4%BE%8B.png">
<meta property="og:image" content="https://github.com/ZephXu07/IMG/raw/master/Snipaste_2019-10-02_18-01-30.png">
<meta property="og:image" content="https://github.com/ZephXu07/IMG/raw/master/Snipaste_2019-10-02_18-07-38.png">
<meta property="og:image" content="https://github.com/ZephXu07/IMG/raw/master/RunningResult.png">
<meta property="og:image" content="https://github.com/ZephXu07/IMG/raw/master/TestThrow.png">
<meta property="og:image" content="https://github.com/ZephXu07/IMG/raw/master/ThrowResult.png">
<meta property="og:image" content="https://github.com/ZephXu07/IMG/raw/master/BugReason.png">
<meta property="og:image" content="https://github.com/ZephXu07/IMG/raw/master/exist.png">
<meta property="og:image" content="https://github.com/ZephXu07/IMG/raw/master/Simple.png">
<meta property="og:image" content="https://github.com/ZephXu07/IMG/raw/master/SpringVersion.png">
<meta property="og:image" content="https://github.com/ZephXu07/IMG/raw/master/FollowSpringVersion.png">
<meta property="og:image" content="https://github.com/ZephXu07/IMG/raw/master/ssm_spring_mybatis_txProjectStructure.png">
<meta property="article:published_time" content="2020-01-23T15:23:16.000Z">
<meta property="article:modified_time" content="2020-01-23T15:40:49.027Z">
<meta property="article:author" content="John Doe">
<meta property="article:tag" content="ç¬”è®°">
<meta property="article:tag" content="ssm">
<meta property="article:tag" content="java">
<meta property="article:tag" content="spring">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://github.com/ZephXu07/IMG/raw/master/Spring.png">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 4.2.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-Spring-Learning-Notes" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/01/23/Spring-Learning-Notes/" class="article-date">
  <time datetime="2020-01-23T15:23:16.000Z" itemprop="datePublished">2020-01-23</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Spring-Learning-Notes
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Spring Learning Notes</p>
<p>Springä¸ªäººå­¦ä¹ ç¬”è®°(<a href="#advice">å»ºè®®</a>) </p>
<h2 id="part1-åˆè¯†"><a href="#part1-åˆè¯†" class="headerlink" title="part1 åˆè¯†"></a>part1 åˆè¯†</h2><h3 id="what"><a href="#what" class="headerlink" title="what"></a>what</h3><p> å¤§ç®¡å®¶Springæ˜¯äº2003 å¹´å…´èµ·çš„ä¸€ä¸ªè½»é‡çº§çš„Java å¼€æºæ¡†æ¶ï¼Œå®ƒç”±Rod<br>Johnsonåˆ›å»ºã€‚ä¼ ç»ŸJ2EEåº”ç”¨çš„å¼€å‘æ•ˆç‡ä½ï¼ŒSpringä½œä¸ºå¼€æºçš„ä¸­é—´ä»¶ï¼Œæä¾›J2EEåº”ç”¨çš„å„å±‚çš„è§£å†³æ–¹æ¡ˆï¼ŒSpringè´¯ç©¿äº†è¡¨ç°å±‚ã€ä¸šåŠ¡å±‚åŠæŒä¹…å±‚ï¼Œè€Œä¸æ˜¯ä»…ä»…ä¸“æ³¨äºæŸä¸€å±‚çš„æ–¹æ¡ˆã€‚å¯ä»¥è¯´Springæ˜¯ä¼ä¸šåº”ç”¨å¼€å‘çš„â€œä¸€ç«™å¼ï¼ˆfull-stackï¼‰â€é€‰æ‹©ã€‚ç„¶è€Œï¼ŒSpringå¹¶ä¸æƒ³å–ä»£é‚£äº›å·²æœ‰çš„æ¡†æ¶ï¼Œè€Œæ˜¯ä¸å®ƒä»¬æ— ç¼åœ°æ•´åˆã€‚</p>
<p>ç®€å•æ¥è¯´ï¼ŒSpringæ˜¯ä¸€ä¸ªè½»é‡çº§<strong>æ§åˆ¶åè½¬</strong>(IoC)å’Œ<strong>é¢å‘åˆ‡é¢</strong>(AOP)çš„<strong>å®¹å™¨</strong>æ¡†æ¶ã€‚</p>
<h3 id="why"><a href="#why" class="headerlink" title="why"></a>why</h3><p><strong>1ã€</strong> <strong>æ–¹ä¾¿è§£è€¦ï¼Œç®€åŒ–å¼€å‘</strong></p>
<p>é€šè¿‡Springæä¾›çš„IoCå®¹å™¨ï¼Œæˆ‘ä»¬å¯ä»¥å°†å¯¹è±¡ä¹‹é—´çš„ä¾èµ–å…³ç³»äº¤ç”±Springè¿›è¡Œæ§åˆ¶ï¼Œé¿å…ç¡¬ç¼–ç æ‰€é€ æˆçš„è¿‡åº¦ç¨‹åºè€¦åˆã€‚æœ‰äº†Springï¼Œç”¨æˆ·ä¸å¿…å†ä¸ºå•å®ä¾‹æ¨¡å¼ç±»ã€å±æ€§æ–‡ä»¶è§£æç­‰è¿™äº›å¾ˆåº•å±‚çš„éœ€æ±‚ç¼–å†™ä»£ç ï¼Œå¯ä»¥æ›´ä¸“æ³¨äºä¸Šå±‚çš„åº”ç”¨ã€‚</p>
<p><strong>2ã€</strong> <strong>AOPç¼–ç¨‹çš„æ”¯æŒ</strong></p>
<p>é€šè¿‡Springæä¾›çš„AOPåŠŸèƒ½ï¼Œæ–¹ä¾¿è¿›è¡Œé¢å‘åˆ‡é¢çš„ç¼–ç¨‹ï¼Œè®¸å¤šä¸å®¹æ˜“ç”¨ä¼ ç»ŸOOPå®ç°çš„åŠŸèƒ½å¯ä»¥é€šè¿‡AOPè½»æ¾åº”ä»˜ã€‚</p>
<p><strong>3ã€</strong> <strong>å£°æ˜å¼äº‹åŠ¡çš„æ”¯æŒ</strong></p>
<p>åœ¨Springä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä»å•è°ƒçƒ¦é—·çš„äº‹åŠ¡ç®¡ç†ä»£ç ä¸­è§£è„±å‡ºæ¥ï¼Œé€šè¿‡å£°æ˜å¼æ–¹å¼çµæ´»åœ°è¿›è¡Œäº‹åŠ¡çš„ç®¡ç†ï¼Œæé«˜å¼€å‘æ•ˆç‡å’Œè´¨é‡ã€‚</p>
<p><strong>4ã€</strong> <strong>æ–¹ä¾¿ç¨‹åºçš„æµ‹è¯•</strong></p>
<p>å¯ä»¥ç”¨éå®¹å™¨ä¾èµ–çš„ç¼–ç¨‹æ–¹å¼è¿›è¡Œå‡ ä¹æ‰€æœ‰çš„æµ‹è¯•å·¥ä½œï¼Œåœ¨Springé‡Œï¼Œæµ‹è¯•ä¸å†æ˜¯æ˜‚è´µçš„æ“ä½œï¼Œè€Œæ˜¯éšæ‰‹å¯åšçš„äº‹æƒ…ã€‚ä¾‹å¦‚ï¼šSpringå¯¹Junit4æ”¯æŒï¼Œå¯ä»¥é€šè¿‡æ³¨è§£æ–¹ä¾¿çš„æµ‹è¯•Springç¨‹åºã€‚</p>
<p><strong>5ã€</strong> <strong>æ–¹ä¾¿é›†æˆå„ç§ä¼˜ç§€æ¡†æ¶</strong></p>
<p>Springä¸æ’æ–¥å„ç§ä¼˜ç§€çš„å¼€æºæ¡†æ¶ï¼Œç›¸åï¼ŒSpringå¯ä»¥é™ä½å„ç§æ¡†æ¶çš„ä½¿ç”¨éš¾åº¦ï¼ŒSpringæä¾›äº†å¯¹å„ç§ä¼˜ç§€æ¡†æ¶ï¼ˆå¦‚Strutsã€Hibernateã€MyBatis<br>ã€Hessianã€Quartzï¼‰ç­‰çš„ç›´æ¥æ”¯æŒã€‚</p>
<p><strong>6ã€</strong> <strong>é™ä½Java EE APIçš„ä½¿ç”¨éš¾åº¦</strong></p>
<p>Springå¯¹å¾ˆå¤šéš¾ç”¨çš„Java EE<br>APIï¼ˆå¦‚JDBCï¼ŒJavaMailï¼Œè¿œç¨‹è°ƒç”¨ç­‰ï¼‰æä¾›äº†ä¸€ä¸ªè–„è–„çš„å°è£…å±‚ï¼Œé€šè¿‡Springçš„ç®€æ˜“å°è£…ï¼Œè¿™äº›Java<br>EE APIçš„ä½¿ç”¨éš¾åº¦å¤§ä¸ºé™ä½ã€‚</p>
<h3 id="learn-what"><a href="#learn-what" class="headerlink" title="learn what"></a>learn what</h3><p>1ã€ äº†è§£Springæ¡†æ¶ã€IOCã€DIçš„æ¦‚å¿µï¼›</p>
<p>2ã€ æŒæ¡Springæ¡†æ¶æ­å»ºã€é…ç½®ä¸ä½¿ç”¨ï¼›</p>
<p>3ã€ æŒæ¡Springå®¹å™¨åˆ›å»ºä¸å¯¹è±¡ç®¡ç†ï¼›</p>
<p>4ã€ æŒæ¡Spring xmlé…ç½®å¼å¼€å‘ä¸æ³¨è§£å¼€å‘ï¼›</p>
<p>5ã€ æŒæ¡Spring AOPç›¸å…³çŸ¥è¯†ï¼›</p>
<p>6ã€ æŒæ¡SpringJDBCç›¸å…³çŸ¥è¯†ï¼›</p>
<p>7ã€ å°†Springé›†æˆé¡¹ç›®ä¸­è¿›è¡Œæµ‹è¯•ï¼›</p>
<p>ä»¥ä¸Šä¸‰ä¸ªæ®µä¸ºæˆªå–ä»–äººæ–‡æ¡£â€“&gt;</p>
<p><a href="http://www.sikiedu.com/my/course/267" target="_blank" rel="noopener">siki</a></p>
<h2 id="part2-Springæ¡†æ¶ä»‹ç»ä¸å…¥é—¨æ¡ˆä¾‹"><a href="#part2-Springæ¡†æ¶ä»‹ç»ä¸å…¥é—¨æ¡ˆä¾‹" class="headerlink" title="part2 Springæ¡†æ¶ä»‹ç»ä¸å…¥é—¨æ¡ˆä¾‹"></a>part2 Springæ¡†æ¶ä»‹ç»ä¸å…¥é—¨æ¡ˆä¾‹</h2><p><img src="https://github.com/ZephXu07/IMG/raw/master/Spring.png" alt="Spring"></p>
<h3 id="1ã€-æ­å»ºSpring-HelloWorldé¡¹ç›®"><a href="#1ã€-æ­å»ºSpring-HelloWorldé¡¹ç›®" class="headerlink" title="1ã€ æ­å»ºSpring HelloWorldé¡¹ç›®"></a>1ã€ æ­å»ºSpring HelloWorldé¡¹ç›®</h3><p>a)<br><a href="http://repo.spring.io/release/org/springframework/spring/" target="_blank" rel="noopener">Springä¸‹è½½åœ°å€</a></p>
<p>b) å¯¼åŒ…ï¼šï¼ˆä»¥ä¸‹5ä¸ªåŒ…ç§°ä¸ºåŸºæœ¬åŒ…ï¼‰</p>
<p> i. æ ¸å¿ƒåŒ…ï¼šbeanã€contextã€coreã€expressionï¼›</p>
<p> ii. æ—¥å¿—åŒ…ï¼šapache.commons.logging</p>
<p> <strong>ï¼ï¼ï¼mavené¡¹ç›®ä¸­åœ¨pom.xmlæ–‡ä»¶ä¸­åŠ å…¥dependency</strong></p>
<p>c) å¼•å…¥çº¦æŸï¼šbeançº¦æŸå’Œå¼•å…¥ä¸»é…ç½®æ–‡ä»¶å¤´ï¼›</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">  <span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line">  	<span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span> <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans       http://www.springframework.org/schema/beans/spring-beans.xsd "</span>&gt;</span>   </span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span>             |</span><br></pre></td></tr></table></figure>



<ul>
<li><p><strong>BUGï¼šorg.springframework.beans.factory.xml.XmlBeanDefinitionStoreException:<br>Line 3 in XML document from class path resource<br>[applicationContext.xml] is invalid; nested exception is<br>org.xml.sax.SAXParseException; lineNumber: 3; columnNumber: 59;<br>å·²ç»ä¸ºå…ƒç´  â€œbeansâ€ æŒ‡å®šå±æ€§ â€œxmlnsâ€ã€‚</strong></p>
</li>
<li><p><strong>é…ç½®æ–‡ä»¶å†™é”™ï¼</strong></p>
</li>
</ul>
<p><img src="https://github.com/ZephXu07/IMG/raw/master/BUG%E4%BF%AE%E6%94%B9.png" alt="bugRepaired"></p>
<p>d) æµ‹è¯•ï¼šå°†è‡ªå®šä¹‰å¯¹è±¡ç”±è‡ªå·±åˆ›å»ºäº¤ç”±Springç®¡ç†ï¼›</p>
<ul>
<li><p>é¡¹ç›®ç»“æ„ï¼š</p>
<p><img src="https://github.com/ZephXu07/IMG/raw/master/SpringProjectStructure.png" alt="é¡¹ç›®ç»“æ„"></p>
</li>
<li><p>æ²¡ä½¿ç”¨Springä¹‹å‰ï¼šè‡ªå·±new</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span>    </span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Test</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	User u = <span class="keyword">new</span> User();        </span><br><span class="line">	System.out.println(u);    </span><br><span class="line">&#125;             |</span><br></pre></td></tr></table></figure>
</li>
<li><p>ä½¿ç”¨Springå®¹å™¨ï¼šspringå¸®å¿™ç®¡ç†å¯¹è±¡</p>
<ul>
<li><p>é…ç½®ï¼š<code>&lt;bean name=&quot;user&quot; class=&quot;com.zephxu.bean.User&quot;/&gt;</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Test2</span><span class="params">()</span> </span>&#123;    <span class="comment">//æ ¹æ®springé…ç½®æ–‡ä»¶è·å–å®¹å™¨å¯¹è±¡    </span></span><br><span class="line">	ApplicationContext ac = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">"applicationContext.xml"</span>);<span class="comment">//ä»springå®¹å™¨ä¸­ä½¿ç”¨getBeanå–å¯¹è±¡   </span></span><br><span class="line">    User user1 = (User) ac.getBean(<span class="string">"user"</span>);</span><br><span class="line">    User user2 = ac.getBean(User<span class="class">.<span class="keyword">class</span>)</span>;    </span><br><span class="line">    System.out.println(user1 + <span class="string">"\n"</span> + user2);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



</li>
</ul>
</li>
</ul>
<h3 id="2ã€Spring-IoC-DIæ¦‚å¿µä»‹ç»ï¼šï¼ˆè¦å®ç°IOCä¾èµ–DIçš„æ”¯æŒï¼‰"><a href="#2ã€Spring-IoC-DIæ¦‚å¿µä»‹ç»ï¼šï¼ˆè¦å®ç°IOCä¾èµ–DIçš„æ”¯æŒï¼‰" class="headerlink" title="2ã€Spring-IoC | DIæ¦‚å¿µä»‹ç»ï¼šï¼ˆè¦å®ç°IOCä¾èµ–DIçš„æ”¯æŒï¼‰"></a>2ã€Spring-IoC | DIæ¦‚å¿µä»‹ç»ï¼šï¼ˆè¦å®ç°IOCä¾èµ–DIçš„æ”¯æŒï¼‰</h3><p><strong>IoCï¼ˆInversion of Controlï¼‰ï¼šç¼–ç¨‹æ€æƒ³ï¼Œæ–°çš„è®¾è®¡æ¨¡å¼ã€‚</strong></p>
<ul>
<li>åè½¬æ§åˆ¶ï¼šå°†æˆ‘ä»¬è‡ªå·±åˆ›å»ºå¯¹è±¡çš„å·¥ä½œäº¤ç»™Springå®¹å™¨å¸®æˆ‘ä»¬å®Œæˆï¼›</li>
<li>åè½¬ï¼šåˆ›å»ºå¯¹è±¡è¿™ä»½å·¥ä½œç”±æˆ‘ä»¬è‡ªå·±æ‰§è¡Œåè½¬ç»™Springå¸®æˆ‘ä»¬æ‰§è¡Œã€‚</li>
<li>æ§åˆ¶ï¼šç”±Springè´Ÿè´£åˆ›å»ºé”€æ¯å¯¹è±¡ï¼ŒæŒæ§å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸç­‰ï¼Œéœ€è¦ä½¿ç”¨æ—¶å‘Springç”³è¯·å³å¯ã€‚</li>
</ul>
<p><strong>DIï¼ˆDependency<br>Injectionï¼‰ï¼šä¾èµ–æ³¨å…¥ï¼šå°†å€¼é€šè¿‡é…ç½®çš„æ–¹å¼ä¸ºå˜é‡åˆå§‹åŒ–/èµ‹å€¼(æ³¨å…¥)</strong></p>
<p>c) æ³¨å…¥æ–¹å¼ï¼šsetæ–¹æ³•æ³¨å…¥ã€æ„é€ æ³¨å…¥ã€å­—æ®µæ³¨å…¥(ä¸æ¨è)ï¼›</p>
<p>d) æ³¨å…¥ç±»å‹ï¼š</p>
<p> i. å€¼ç±»å‹(value) â€“ å…«å¤§åŸºæœ¬æ•°æ®ç±»å‹ï¼›</p>
<p> ii. å¼•ç”¨ç±»å‹(ref) â€“ Stringã€è‡ªå®šä¹‰å¯¹è±¡ï¼›</p>
<p><code>&lt;property name=&quot;u_id&quot; value=&quot;7&quot;/&gt;</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">User user1 = (User) ac.getBean(<span class="string">"user"</span>);</span><br><span class="line">User user2 = ac.getBean(User<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">System.out.println(user1 + <span class="string">"\n"</span> + user2);</span><br><span class="line">System.out.println(user1 == user2);</span><br></pre></td></tr></table></figure>

<p><strong>ç»“æœå¦‚ä¸‹ï¼ŒåŸå› æœªçŸ¥â€¦â€¦</strong></p>
<p><img src="https://github.com/ZephXu07/IMG/raw/master/zephxu-Snipaste_2019-09-28_16-29-59.png" alt="æœªçŸ¥åŸå› "></p>
<p><strong>åŸå› ï¼š</strong><a href="#é”š1">Scopeå±æ€§singletonå•ä¾‹</a></p>
<h2 id="part3-Springé…ç½®"><a href="#part3-Springé…ç½®" class="headerlink" title="part3 Springé…ç½® "></a>part3 Springé…ç½® </h2><h3 id="1ã€XMLé…ç½®"><a href="#1ã€XMLé…ç½®" class="headerlink" title="1ã€XMLé…ç½®"></a>1ã€XMLé…ç½®</h3><p> a) Beanå…ƒç´ ï¼šäº¤ç”±Springç®¡ç†çš„å¯¹è±¡éƒ½è¦é…ç½®åœ¨beanæ ‡ç­¾ä¸­ï¼›</p>
<p> i. Beanæ ‡ç­¾ä»‹ç»å’Œåˆ›å»ºæ–¹å¼ï¼š<strong>ç©ºå‚æ„é€ ï¼ˆå¸¸ç”¨ï¼‰</strong>ã€é™æ€å·¥å‚ã€åŠ¨æ€å·¥å‚ï¼›</p>
<p> ï¼ˆ1ï¼‰æ ‡ç­¾ä»‹ç»ï¼š</p>
<p>ä¸€ã€nameï¼šèµ·ä¸€ä¸ªåå­—ï¼Œé€šè¿‡å…¶æ¥åˆ©ç”¨å®¹å™¨è·å–å¯¹è±¡ï¼›å¯ä»¥ä½¿ç”¨ç‰¹æ®Šå­—ç¬¦ï¼›å¯ä»¥é‡å¤ä½†ä¸æ¨èã€‚</p>
<p> äºŒã€idï¼šä¸nameä½œç”¨åŸºæœ¬ç›¸ä¼¼ï¼Œä½†ä¸æ¨èä½¿ç”¨ï¼›ä¸æ”¯æŒç‰¹æ®Šå­—ç¬¦ï¼›ä¸èƒ½é‡å¤ã€‚</p>
<p> ä¸‰ã€classï¼šè¢«ç®¡ç†çš„å¯¹è±¡çš„å…¨åŒ…åï¼ŒSpringé€šè¿‡æ­¤åŒ…åæ¥åˆ›å»ºå¯¹è±¡ã€‚</p>
<p> ï¼ˆ2ï¼‰ç©ºå‚æ„é€ ï¼šé»˜è®¤ï¼Œè‹¥æ²¡æœ‰ç©ºå‚æ–¹æ³•ä¼šæŠ¥é”™ã€‚</p>
<p> ä¸€ã€<code>public  User() {    System.out.println(&quot;Userç©ºå‚æ„é€ æ–¹æ³•&quot;);}</code></p>
<p><img src="https://github.com/ZephXu07/IMG/raw/master/zephxu-Snipaste_2019-09-28_16-53-26.png" alt="."></p>
<p>äºŒã€ApplicationContexté…ç½®çš„æ‰€æœ‰beanå¯¹è±¡éƒ½ä¼šåœ¨å®¹å™¨è¢«åˆ›å»ºçš„æ—¶å€™åˆ›å»ºå‡ºæ¥ï¼Œå¦‚æœé…ç½®çš„beanè¾ƒå¤šï¼Œåœ¨åˆ›å»ºå®¹å™¨çš„æ—¶å€™ä¼šäº§ç”Ÿå†…å­˜è¿‡å¤§é—®é¢˜ï¼Œåœ¨ç¡¬ä»¶æ€§èƒ½è½åä½“ç°æ˜æ˜¾ã€‚</p>
<p> <strong>Springæä¾›å¼€å…³è§£å†³é—®é¢˜ï¼šå»¶è¿ŸåŠ è½½</strong></p>
<p><img src="https://github.com/ZephXu07/IMG/raw/master/zephxu-Snipaste_2019-09-28_17-04-17.png" alt="å»¶è¿ŸåŠ è½½"></p>
<p> ii. Scopeå±æ€§ä»‹ç»ï¼šsingletonã€protoptypeã€requestã€sessionï¼›</p>
<ul>
<li><p>ä¸Šé¢bugåŸå› ï¼šsingletonå•ä¾‹ï¼Œä¸ºé»˜è®¤ï¼Œåªåˆ›å»ºå•ä¸ªå¯¹è±¡ï¼Œä¸€èˆ¬é¡¹ç›®<br><img src="https://github.com/ZephXu07/IMG/raw/master/zephxu-Snipaste_2019-09-28_21-22-24.png" alt="singleton"></p>
</li>
<li><p>prototypeï¼Œå¤šä¾‹ï¼Œç›¸å¯¹singletonè€Œè¨€ï¼Œåœ¨è·å–çš„æ—¶å€™åˆ›å»ºæ–°çš„å¯¹è±¡ï¼Œç‰¹æ®Šé¡¹ç›®</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">User user1 = (User) ac.getBean(<span class="string">"user"</span>);</span><br><span class="line">User user2 = ac.getBean(User<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">System.out.println(user1 + <span class="string">"\n"</span> + user2);</span><br><span class="line">System.out.println(user1 == user2);</span><br></pre></td></tr></table></figure>



<p><img src="https://github.com/ZephXu07/IMG/raw/master/zephxu-Snipaste_2019-09-28_21-29-03.png" alt="prototype"></p>
<ul>
<li><p>requestï¼šåœ¨webç¯å¢ƒä¸‹ï¼Œå¦‚æœscopeå±æ€§ä¸ºrequestï¼Œé‚£ä¹ˆè¿™ä¸ªå¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸä¸requestè¯·æ±‚ä¸€è‡´ã€‚</p>
</li>
<li><p>sessionï¼šåŒç†ã€‚</p>
<p>iii. é¡¹ç›®æœ‰éœ€æ±‚æ—¶åœ¨æ ‡ç­¾ä¸­æœ‰åˆå§‹åŒ–æ–¹æ³•init-methodå’Œ<br>é”€æ¯æ–¹æ³•destroy-methodï¼›</p>
<ul>
<li><code>init-method=&quot;userInit&quot; destroy-method=&quot;userDestroy&quot;</code></li>
<li><strong>å®¹å™¨å…³é—­åæ¿€æ´»destroyæ–¹æ³•ï¼Œå½“scopeé…ç½®ä¸æ˜¯singletonè€Œæ˜¯prototypeæ—¶ï¼Œé”€æ¯æ–¹æ³•ä¸ä¼šè¢«è°ƒç”¨ã€‚</strong></li>
<li><strong>initæ–¹æ³•åœ¨å®¹å™¨åˆ›å»ºBeanå¯¹è±¡ä¹‹åç«‹å³è°ƒç”¨ï¼Œdestroyæ–¹æ³•åœ¨å®¹å™¨é”€æ¯å¯¹è±¡ä¹‹å‰è°ƒç”¨çš„ï¼Œè€Œä½¿ç”¨prototypeçš„è¯å¯¹è±¡æ˜¯ç”±ç”¨æˆ·ç®¡ç†çš„ã€‚</strong></li>
</ul>
<p>b) å±æ€§æ³¨å…¥ï¼š</p>
<p>i. Setæ–¹æ³•æ³¨å…¥ï¼š<strong>beanå¯¹è±¡ä¸­éœ€è¦æœ‰å¯¹åº”çš„setæ–¹æ³•ï¼</strong></p>
</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--å°†userå¯¹è±¡äº¤ç»™Springç®¡ç†å¹¶æ³¨å…¥å€¼ç±»å‹--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">name</span>=<span class="string">"user"</span> <span class="attr">class</span>=<span class="string">"com.zephxu.bean.User"</span>&gt;</span>    </span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"u_id"</span> <span class="attr">value</span>=<span class="string">"999"</span>/&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"u_username"</span> <span class="attr">value</span>=<span class="string">"é»„æºé’¦"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"u_password"</span> <span class="attr">value</span>=<span class="string">"511"</span>/&gt;</span>    </span><br><span class="line">    <span class="comment">&lt;!--å¼•ç”¨ç±»å‹æ³¨å…¥æ–¹å¼--&gt;</span>    </span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"u_pet"</span> <span class="attr">ref</span>=<span class="string">"cat"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--æ³¨å…¥å¼•ç”¨ç±»å‹ä½¿ç”¨refï¼Œæ³¨å…¥å€¼ç±»å‹ä½¿ç”¨value--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--æ³¨å…¥å¼•ç”¨ç±»å‹--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">name</span>=<span class="string">"cat"</span> <span class="attr">class</span>=<span class="string">"com.zephxu.bean.Pet"</span>&gt;</span>        </span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"petType"</span> <span class="attr">value</span>=<span class="string">"ç‹¸èŠ±çŒ«"</span>/&gt;</span>        </span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"color"</span> <span class="attr">value</span>=<span class="string">"é»‘ç™½ç›¸é—´"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span>    |</span><br></pre></td></tr></table></figure>

<p> ii. æ„é€ å‡½æ•°æ³¨å…¥ï¼›</p>
<p>beanå¯¹è±¡ä¸­ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">User</span><span class="params">(String u_username, Pet u_pet)</span> </span>&#123;   </span><br><span class="line">	System.out.println(<span class="string">"æ–¹æ³•1ï¼šString, Pet"</span>);    </span><br><span class="line">	<span class="keyword">this</span>.u_username = u_username;    </span><br><span class="line">	<span class="keyword">this</span>.u_pet = u_pet;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>é…ç½®xmlæ–‡ä»¶ä¸­ï¼šjava</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--æ„é€ æ–¹æ³•æ³¨å…¥--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">name</span>=<span class="string">"user1"</span> <span class="attr">class</span>=<span class="string">"com.zephxu.bean.User"</span>&gt;</span>   </span><br><span class="line">    <span class="comment">&lt;!--nameä¸ºè°ƒç”¨æ„é€ å™¨ä¸­çš„å‚æ•°å--&gt;</span>    </span><br><span class="line">    <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">"u_username"</span> <span class="attr">value</span>=<span class="string">"å’¸é±¼"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">"u_pet"</span> <span class="attr">ref</span>=<span class="string">"cat"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>



<p><strong>è°ƒç”¨æ—¶éœ€è¦ä½¿ç”¨ä½¿ç”¨xmlæ–‡ä»¶ä¸­é…ç½®çš„ç‰¹å®šçš„beanå¯¹è±¡çš„nameè€Œä¸æ˜¯ä½¿ç”¨User.classã€‚ï¼ˆä¸‹é¢BUGçš„åŸå› ä¹‹ä¸€ï¼‰</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Test2</span><span class="params">()</span> </span>&#123;    </span><br><span class="line">	ApplicationContext ac = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">"applicationContextInjection.xml"</span>);</span><br><span class="line">    User user = (User)ac.getBean(<span class="string">"user1"</span>);<span class="comment">//ï¼æ­¤å¤„éœ€è¦æ³¨æ„ï¼    </span></span><br><span class="line">    System.out.println(user);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><strong>æ³¨æ„ï¼šå½“æœ‰å‚æ„é€ å™¨æœ‰å¤šä¸ªæ—¶ï¼Œå¦‚ä¸‹ï¼š</strong></p>
<p>beanå¯¹è±¡ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">User</span><span class="params">(String u_username, Pet u_pet)</span> </span>&#123;        </span><br><span class="line">    System.out.println(<span class="string">"æ–¹æ³•1ï¼šString, Pet"</span>);        </span><br><span class="line">    <span class="keyword">this</span>.u_username = u_username;        </span><br><span class="line">    <span class="keyword">this</span>.u_pet = u_pet;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">User</span><span class="params">(Integer u_username, Pet u_pet)</span> </span>&#123;  </span><br><span class="line">    System.out.println(<span class="string">"æ–¹æ³•2ï¼šInteger, Pet"</span>);  </span><br><span class="line">    <span class="keyword">this</span>.u_username = u_username.toString(); </span><br><span class="line">    <span class="keyword">this</span>.u_pet = u_pet;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">User</span><span class="params">(Pet u_pet, Integer u_username)</span> </span>&#123;   </span><br><span class="line">    System.out.println(<span class="string">"æ–¹æ³•3ï¼šPet, Integer"</span>);</span><br><span class="line">    <span class="keyword">this</span>.u_username = u_username.toString(); </span><br><span class="line">    <span class="keyword">this</span>.u_pet = u_pet;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>xmlæ–‡ä»¶ï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">name</span>=<span class="string">"user1"</span> <span class="attr">class</span>=<span class="string">"com.zephxu.bean.User"</span>&gt;</span>    </span><br><span class="line"><span class="comment">&lt;!--typeå¯ä»¥æŒ‡å®šå‚æ•°ç±»å‹ï¼Œindexå¯ä»¥æŒ‡å®šå‚æ•°çš„ä½ç½®ï¼Œä»¥0ä¸‹æ ‡å¼€å§‹ï¼Œä½¿ç”¨è¿™ä¸¤ä¸ªå±æ€§æ¥è°ƒç”¨æƒ³è¦çš„ æ„é€ å™¨--&gt;</span>    </span><br><span class="line"><span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">"u_username"</span> <span class="attr">value</span>=<span class="string">"777"</span> <span class="attr">type</span>=<span class="string">"java.lang.Integer"</span> <span class="attr">index</span>=<span class="string">"1"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">"u_pet"</span> <span class="attr">ref</span>=<span class="string">"cat"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>



<p> iii. å¤æ‚ç±»å‹æ³¨å…¥ï¼šArrayã€Listã€Setã€Mapã€Properties</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--å¤æ‚ç±»å‹çš„æ³¨å…¥--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">name</span>=<span class="string">"collection"</span> <span class="attr">class</span>=<span class="string">"com.zephxu.bean.MyCollection"</span>&gt;</span>    </span><br><span class="line">    <span class="comment">&lt;!--array--&gt;</span>    </span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"array"</span>&gt;</span>        </span><br><span class="line">        <span class="tag">&lt;<span class="name">array</span>&gt;</span><span class="comment">&lt;!--æ•°ç»„ç±»å‹ç‰¹æœ‰çš„æ ‡ç­¾ï¼Œæ³¨å…¥å¯¹è±¡--&gt;</span>          </span><br><span class="line">            <span class="tag">&lt;<span class="name">value</span>&gt;</span>phy<span class="tag">&lt;/<span class="name">value</span>&gt;</span>            </span><br><span class="line">            <span class="tag">&lt;<span class="name">value</span>&gt;</span>xzf<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">ref</span> <span class="attr">bean</span>=<span class="string">"cat"</span>/&gt;</span><span class="comment">&lt;!--åŒä¸Švalueå’Œrefæ ‡ç­¾ç”¨æ³•--&gt;</span>            </span><br><span class="line">            <span class="comment">&lt;!--å½“ä¸€ä¸ªå€¼æ—¶å¯ä»¥&lt;property name="array" value="123&gt;--&gt;</span>       </span><br><span class="line">        <span class="tag">&lt;/<span class="name">array</span>&gt;</span>    </span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--list--&gt;</span>    </span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"list"</span>&gt;</span>        </span><br><span class="line">        <span class="tag">&lt;<span class="name">list</span>&gt;</span>            </span><br><span class="line">            <span class="tag">&lt;<span class="name">value</span>&gt;</span>phy<span class="tag">&lt;/<span class="name">value</span>&gt;</span>            </span><br><span class="line">            <span class="tag">&lt;<span class="name">value</span>&gt;</span>xzf<span class="tag">&lt;/<span class="name">value</span>&gt;</span>            </span><br><span class="line">            <span class="tag">&lt;<span class="name">ref</span> <span class="attr">bean</span>=<span class="string">"cat"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">ref</span> <span class="attr">bean</span>=<span class="string">"user"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">ref</span> <span class="attr">bean</span>=<span class="string">"user1"</span>/&gt;</span>        </span><br><span class="line">        <span class="tag">&lt;/<span class="name">list</span>&gt;</span>   </span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span>    </span><br><span class="line">    <span class="comment">&lt;!--set--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"set"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">set</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">value</span>&gt;</span>phy<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">value</span>&gt;</span>xzf<span class="tag">&lt;/<span class="name">value</span>&gt;</span>            </span><br><span class="line">            <span class="tag">&lt;<span class="name">ref</span> <span class="attr">bean</span>=<span class="string">"cat"</span> /&gt;</span>            </span><br><span class="line">            <span class="tag">&lt;<span class="name">ref</span> <span class="attr">bean</span>=<span class="string">"user"</span> /&gt;</span>            </span><br><span class="line">            <span class="tag">&lt;<span class="name">ref</span> <span class="attr">bean</span>=<span class="string">"user1"</span> /&gt;</span>        </span><br><span class="line">        <span class="tag">&lt;/<span class="name">set</span>&gt;</span>    </span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span>    </span><br><span class="line">    <span class="comment">&lt;!--listï¼Œsetç”¨æ³•åŒarray--&gt;</span>    </span><br><span class="line">    <span class="comment">&lt;!--mapç‰¹æ®Š--&gt;</span>    </span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"map"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">map</span>&gt;</span>            </span><br><span class="line">            <span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">"username"</span> <span class="attr">value</span>=<span class="string">"root"</span>/&gt;</span>            </span><br><span class="line">            <span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">"userpassword"</span> <span class="attr">value</span>=<span class="string">"10709991"</span>/&gt;</span> </span><br><span class="line">            <span class="tag">&lt;<span class="name">entry</span> <span class="attr">key-ref</span>=<span class="string">"user1"</span> <span class="attr">value-ref</span>=<span class="string">"cat"</span>/&gt;</span>       </span><br><span class="line">            <span class="comment">&lt;!--ä¾æ®Mapçš„ç”¨æ³•ï¼Œéœ€è¦é”®å€¼å¯¹--&gt;</span>        </span><br><span class="line">        <span class="tag">&lt;/<span class="name">map</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span>    </span><br><span class="line">    <span class="comment">&lt;!--properties--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"prop"</span>&gt;</span>        </span><br><span class="line">        <span class="tag">&lt;<span class="name">props</span>&gt;</span>            </span><br><span class="line">            <span class="tag">&lt;<span class="name">prop</span> <span class="attr">key</span>=<span class="string">"boy"</span>&gt;</span>xzf<span class="tag">&lt;/<span class="name">prop</span>&gt;</span>            </span><br><span class="line">            <span class="tag">&lt;<span class="name">prop</span> <span class="attr">key</span>=<span class="string">"girl"</span>&gt;</span>phy<span class="tag">&lt;/<span class="name">prop</span>&gt;</span>            </span><br><span class="line">            <span class="comment">&lt;!--ç±»ä¼¼é”®å€¼å¯¹ï¼Œä½†å€¼æ˜¯å†™åœ¨æ ‡ç­¾ä¸­--&gt;</span>        </span><br><span class="line">        <span class="tag">&lt;/<span class="name">props</span>&gt;</span>    </span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>BUGï¼šNo qualifying bean of type â€˜com.zephxu.bean.Userâ€™ available:<br>expected single matching bean but found 2: user,user1</strong></p>
<p><strong>åŸå› ï¼š<a href="#é”š2">å¦‚ä¸Šï¼›</a></strong></p>
<h3 id="2ã€æ³¨è§£é…ç½®"><a href="#2ã€æ³¨è§£é…ç½®" class="headerlink" title="2ã€æ³¨è§£é…ç½®"></a>2ã€æ³¨è§£é…ç½®</h3><p>a) å¯¼åŒ…å’Œçº¦æŸï¼šåŸºæœ¬åŒ…ã€aopåŒ…+contextçº¦æŸï¼›</p>
<p>mavençš„pom.xmlæ–‡ä»¶ï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span>    </span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span>    </span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-aop<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span>   </span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.10.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>applicationContext.xmlæ–‡ä»¶ä¸­ï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span> <span class="attr">xmlns:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span>       <span class="attr">xsi:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span>       <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-4.3.xsd"</span>&gt;</span>   </span><br><span class="line">    <span class="comment">&lt;!--æ³¨è§£å¼€å‘--&gt;</span>    <span class="comment">&lt;!--å¼€å¯ç»„ä»¶æ‰«æ base-package æ‰«æè¯¥åŒ…ä¸‹ä»¥åŠå­åŒ…çš„æ‰€æœ‰æ³¨è§£--&gt;</span>    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"com.zephxu.bean"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>



<p>b) å°†å¯¹è±¡æ³¨å†Œåˆ°å®¹å™¨å†…ï¼›</p>
<p>c) ç”¨æ³¨è§£é…ç½®Scopeå±æ€§ï¼›</p>
<p>d) æ³¨è§£é…ç½®init-methodä¸destroy-methodï¼›</p>
<p><strong>æ³¨è§£ï¼š</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span>(<span class="string">"user2"</span>)</span><br><span class="line"><span class="meta">@Scope</span>(scopeName=<span class="string">"singleton"</span>)<span class="comment">//prototype</span></span><br><span class="line"><span class="comment">//åœ¨æ„é€ æ–¹æ³•åè°ƒç”¨@PostConstruct</span></span><br><span class="line"><span class="comment">//åœ¨é”€æ¯æ–¹æ³•å‰è°ƒç”¨@PreDestroy</span></span><br></pre></td></tr></table></figure>

<p><strong>ç­‰äºxmlä¸­ï¼š</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">name</span>=<span class="string">"user2"</span> <span class="attr">class</span>=<span class="string">"com.zephxu.bean.User2"</span> <span class="attr">init-method</span>=<span class="string">"user2Init"</span> <span class="attr">destroy-method</span>=<span class="string">"user2Destroy"</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>æ³¨æ„ï¼š</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span>()<span class="comment">//webå±‚</span></span><br><span class="line"><span class="meta">@Service</span>()<span class="comment">//serviceå±‚</span></span><br><span class="line"><span class="meta">@Repository</span>()<span class="comment">//daoå±‚</span></span><br></pre></td></tr></table></figure>

<p>eï¼‰ æ³¨è§£é…ç½®å±æ€§æ³¨å…¥ï¼Œå€¼ç±»å‹ä¸å¼•ç”¨ç±»å‹ï¼›</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Value</span>(value = <span class="string">"1226"</span>)</span><br><span class="line"><span class="keyword">private</span> Integer u_id;<span class="comment">//ä½¿ç”¨æš´åŠ›åå°„æ³¨å…¥@Value("ğŸ ")</span></span><br><span class="line"><span class="comment">//æ¨èåœ¨setæ–¹æ³•ä¸Šä½¿ç”¨</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setU_username</span><span class="params">(String u_username)</span> </span>&#123; </span><br><span class="line">	<span class="keyword">this</span>.u_username = u_username;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//@Autowired//è‡ªåŠ¨è£…é…ï¼Œåªé€‚ç”¨äºä¸€ä¸ªPetå¯¹è±¡æ—¶</span></span><br><span class="line"><span class="meta">@Resource</span>(name = <span class="string">"è€å¥¶çŒ«"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setU_pet</span><span class="params">(Pet u_pet)</span> </span>&#123;   </span><br><span class="line">	<span class="keyword">this</span>.u_pet = u_pet;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="3ã€-Spring-amp-JUnitè¿›è¡Œæµ‹è¯•ï¼š"><a href="#3ã€-Spring-amp-JUnitè¿›è¡Œæµ‹è¯•ï¼š" class="headerlink" title="3ã€ Spring &amp; JUnitè¿›è¡Œæµ‹è¯•ï¼š"></a>3ã€ Spring &amp; JUnitè¿›è¡Œæµ‹è¯•ï¼š</h3><p>a) å¯¼åŒ…ï¼š teståŒ…ï¼ˆä¾èµ– aopåŒ…ï¼‰ï¼›</p>
<p>b) ä½¿ç”¨@RunWithæ³¨è§£åˆ›å»ºspringå®¹å™¨ï¼›</p>
<p>cï¼‰ ä½¿ç”¨@ContextConfigurationè¯»å–springé…ç½®æ–‡ä»¶</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"> <span class="meta">@RunWith</span>(SpringJUnit4ClassRunner<span class="class">.<span class="keyword">class</span>)</span></span><br><span class="line"><span class="class"> //ä½¿ç”¨<span class="title">junit</span>è¿›è¡Œæµ‹è¯•ï¼Œå¸®åŠ©åˆ›å»ºå®¹å™¨</span></span><br><span class="line"> @ContextConfiguration("classpath:applicationContextInjection.xml")</span><br><span class="line"> <span class="comment">//è¯»å–é…ç½®æ–‡ä»¶</span></span><br><span class="line"> publicclass TestJunit &#123;    </span><br><span class="line"> 	<span class="meta">@Resource</span>(name = <span class="string">"cat"</span>)    </span><br><span class="line"> 	<span class="keyword">private</span> Pet pet;   </span><br><span class="line">    <span class="meta">@Test</span>    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span> </span>&#123;        </span><br><span class="line">    System.out.println(pet); </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><strong>BUGï¼š</strong>java.lang.ExceptionInInitializerError<br> at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native<br>Method)<br> at<br>sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)<br> at<br>sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)<br> at java.lang.reflect.Constructor.newInstance(Constructor.java:423)<br> at<br>org.junit.internal.builders.AnnotatedBuilder.buildRunner(AnnotatedBuilder.java:29)<br> at<br>org.junit.internal.builders.AnnotatedBuilder.runnerForClass(AnnotatedBuilder.java:21)<br> at<br>org.junit.runners.model.RunnerBuilder.safeRunnerForClass(RunnerBuilder.java:59)<br> at<br>org.junit.internal.builders.AllDefaultPossibilitiesBuilder.runnerForClass(AllDefaultPossibilitiesBuilder.java:26)<br> at<br>org.junit.runners.model.RunnerBuilder.safeRunnerForClass(RunnerBuilder.java:59)<br> at<br>org.junit.internal.requests.ClassRequest.getRunner(ClassRequest.java:26)<br> at<br>org.junit.internal.requests.FilterRequest.getRunner(FilterRequest.java:31)<br> at<br>com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:49)<br> at<br>com.intellij.rt.execution.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:47)<br> at<br>com.intellij.rt.execution.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:242)<br> at<br>com.intellij.rt.execution.junit.JUnitStarter.main(JUnitStarter.java:70)<br><strong>Caused by: java.lang.IllegalStateException: SpringJUnit4ClassRunner<br>requires JUnit 4.12 or higher.</strong><br> at org.springframework.util.Assert.state(Assert.java:73)<br> at<br>org.springframework.test.context.junit4.SpringJUnit4ClassRunner.(SpringJUnit4ClassRunner.java:104)<br> â€¦ 15 more</p>
<p><strong>åŸå› ï¼šJUnitåŒ…éœ€è¦æ›´é«˜ç‰ˆæœ¬ï¼</strong></p>
<p><strong>æ³¨æ„ï¼šå„ä¸ªjaråŒ…ç‰ˆæœ¬è”ç³»ï¼Œé¿å…å†²çªï¼</strong></p>
<p> <strong>é”™è¯¯æ—¥å¿—éœ€è¦è®¤çœŸåˆ†æï¼</strong></p>
<p><a href="https://blog.csdn.net/weixin_38771884/article/details/84136703" target="_blank" rel="noopener">ç›¸å…³é“¾æ¥1</a></p>
<p><a href="https://blog.csdn.net/guanwangzhe521/article/details/51470241" target="_blank" rel="noopener">ç›¸å…³é“¾æ¥2</a></p>
<h3 id="4ã€ä¸»é…ç½®æ–‡ä»¶çš„åˆ†åŒ…é…ç½®"><a href="#4ã€ä¸»é…ç½®æ–‡ä»¶çš„åˆ†åŒ…é…ç½®" class="headerlink" title="4ã€ä¸»é…ç½®æ–‡ä»¶çš„åˆ†åŒ…é…ç½®"></a>4ã€ä¸»é…ç½®æ–‡ä»¶çš„åˆ†åŒ…é…ç½®</h3><p>ä¸»é…ç½®æ–‡ä»¶ä¸­åŠ å…¥ï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">import</span> <span class="attr">resource</span>=<span class="string">"applicationContextInjection.xml"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">import</span> <span class="attr">resource</span>=<span class="string">"applicationContextAnnotation"</span>/&gt;</span></span><br></pre></td></tr></table></figure>



<h2 id="part4-å°ç»“ä¸ç»ƒä¹ "><a href="#part4-å°ç»“ä¸ç»ƒä¹ " class="headerlink" title="part4 å°ç»“ä¸ç»ƒä¹ "></a>part4 å°ç»“ä¸ç»ƒä¹ </h2><h3 id="1ã€-ä½¿ç”¨servletæŠ€æœ¯å¼€å‘ç”¨æˆ·ç™»é™†åŠŸèƒ½ï¼›"><a href="#1ã€-ä½¿ç”¨servletæŠ€æœ¯å¼€å‘ç”¨æˆ·ç™»é™†åŠŸèƒ½ï¼›" class="headerlink" title="1ã€ ä½¿ç”¨servletæŠ€æœ¯å¼€å‘ç”¨æˆ·ç™»é™†åŠŸèƒ½ï¼›"></a>1ã€ ä½¿ç”¨servletæŠ€æœ¯å¼€å‘ç”¨æˆ·ç™»é™†åŠŸèƒ½ï¼›</h3><h3 id="2ã€-åœ¨é¡¹ç›®ä¸­åŠ å…¥Springæ¡†æ¶"><a href="#2ã€-åœ¨é¡¹ç›®ä¸­åŠ å…¥Springæ¡†æ¶" class="headerlink" title="2ã€ åœ¨é¡¹ç›®ä¸­åŠ å…¥Springæ¡†æ¶"></a>2ã€ åœ¨é¡¹ç›®ä¸­åŠ å…¥Springæ¡†æ¶</h3><p><img src="https://github.com/ZephXu07/IMG/raw/master/%E4%BD%BF%E7%94%A8Spring%E6%94%B9%E9%80%A0Servlet%E9%A1%B9%E7%9B%AE%E5%AF%B9%E8%B1%A1%E5%85%B3%E7%B3%BB%E4%BE%9D%E8%B5%96%E5%9B%BE.png" alt="å…³ç³»å›¾"></p>
<h4 id="i-å°†serviceã€daoã€dateSourceäº¤ç»™Springç®¡ç†ï¼›"><a href="#i-å°†serviceã€daoã€dateSourceäº¤ç»™Springç®¡ç†ï¼›" class="headerlink" title="i. å°†serviceã€daoã€dateSourceäº¤ç»™Springç®¡ç†ï¼›"></a>i. å°†serviceã€daoã€dateSourceäº¤ç»™Springç®¡ç†ï¼›</h4><p>userDaoImplä¸­çš„<code>private ComboPooledDataSource dataSource</code>é…ç½®ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">static</span> &#123;   </span><br><span class="line"> 	<span class="keyword">try</span> &#123;       </span><br><span class="line">        <span class="comment">//é…ç½®c3p0ï¼Œè¿æ¥æ•°æ®åº“       </span></span><br><span class="line">        dataSource = <span class="keyword">new</span> ComboPooledDataSource();        </span><br><span class="line">        dataSource.setDriverClass(<span class="string">"com.mysql.cj.jdbc.Driver"</span>);                 </span><br><span class="line">        dataSource.setJdbcUrl(<span class="string">"jdbc:mysql://localhost:3306/ssm_spring?serverTimezone=Asia/Shanghai"</span>);        </span><br><span class="line">        dataSource.setUser(<span class="string">"root"</span>);        </span><br><span class="line">        dataSource.setPassword(<span class="string">"10709991"</span>);   </span><br><span class="line">    &#125; <span class="keyword">catch</span> (PropertyVetoException e) &#123;        </span><br><span class="line">        e.printStackTrace();</span><br><span class="line">&#125;                          |</span><br></pre></td></tr></table></figure>

<p>æ”¹ä¸ºapplicationContext.xmlä¸­ï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">&lt;!--é…ç½®dataSource--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">name</span>=<span class="string">"dataSource"</span> <span class="attr">class</span>=<span class="string">"com.mchange.v2.c3p0.ComboPooledDataSource"</span>&gt;</span> </span><br><span class="line">     <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"driverClass"</span> <span class="attr">value</span>=<span class="string">"com.mysql.cj.jdbc.Driver"</span>/&gt;</span> </span><br><span class="line">     <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"jdbcUrl"</span> <span class="attr">value</span>=<span class="string">"jdbc:mysql://localhost:3306/ssm_spring?serverTimezone=Asia/Shanghai"</span>/&gt;</span>    </span><br><span class="line">     <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"user"</span> <span class="attr">value</span>=<span class="string">"root"</span>/&gt;</span>    </span><br><span class="line">     <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">value</span>=<span class="string">"10709991"</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>è¿˜æœ‰dao, serviceä¸­çš„é…ç½®</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--é…ç½®Dao--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">name</span>=<span class="string">"userDao"</span><span class="attr">class</span>=<span class="string">"com.zephxu.dao.UserDaoImpl"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"dataSource"</span> <span class="attr">ref</span>=<span class="string">"dataSource"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--é…ç½®Service--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">name</span>=<span class="string">"userService"</span> <span class="attr">class</span>=<span class="string">"com.zephxu.service.UserServiceImpl"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"userDao"</span> <span class="attr">ref</span>=<span class="string">"userDao"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>



<p><strong>ç¼ºç‚¹ï¼šæ¯ä¸€ä¸ªè¯·æ±‚éƒ½è¦newä¸€ä¸ªå®¹å™¨ï¼Œè€Œwebé¡¹ç›®ä¸­åªéœ€è¦ä¸€ä»½ï¼Œä¸‹ä¸€æ­¥æä¾›è§£å†³æ–¹æ³•ã€‚</strong></p>
<h4 id="ii-åœ¨web-xmlä¸­é…ç½®Springç›‘å¬å™¨å’Œè¯»å–é…ç½®æ–‡ä»¶ï¼ˆSSMæ•´åˆç›¸å…³å†…å®¹é“¾æ¥ï¼‰ï¼›"><a href="#ii-åœ¨web-xmlä¸­é…ç½®Springç›‘å¬å™¨å’Œè¯»å–é…ç½®æ–‡ä»¶ï¼ˆSSMæ•´åˆç›¸å…³å†…å®¹é“¾æ¥ï¼‰ï¼›" class="headerlink" title="ii. åœ¨web.xmlä¸­é…ç½®Springç›‘å¬å™¨å’Œè¯»å–é…ç½®æ–‡ä»¶ï¼ˆSSMæ•´åˆç›¸å…³å†…å®¹é“¾æ¥ï¼‰ï¼›"></a>ii. åœ¨web.xmlä¸­é…ç½®Springç›‘å¬å™¨å’Œè¯»å–é…ç½®æ–‡ä»¶<a href="https://zephxu07.github.io/2019/10/15/SSM%E6%A1%86%E6%9E%B6%E6%95%B4%E5%90%88/#b-%E3%80%81%E6%B3%A8%E6%84%8F%EF%BC%9A" target="_blank" rel="noopener">ï¼ˆSSMæ•´åˆç›¸å…³å†…å®¹é“¾æ¥ï¼‰</a>ï¼›</h4><ul>
<li>ServletContextç±»ç”Ÿå‘½å‘¨æœŸéšwebé¡¹ç›®å¯åŠ¨è€Œåˆ›å»ºï¼Œéšwebé¡¹ç›®å…³é—­è€Œé”€æ¯ã€‚</li>
<li>ServletContextListenerå¯ä»¥é€šè¿‡é…ç½®ç›‘å¬å™¨æ¥è¾¾åˆ°è¦æ±‚ï¼Œåœ¨webé¡¹ç›®åˆ›å»ºæ—¶åˆ›å»ºSpringå®¹å™¨ï¼Œé”€æ¯æ—¶å…³é—­Springå®¹å™¨ã€‚</li>
</ul>
<p>web.xmlæ–‡ä»¶é…ç½®ï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--é…ç½®ç›‘å¬å™¨ï¼Œåœ¨webé¡¹ç›®å¯åŠ¨æ—¶è®©Springå¯åŠ¨--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">listener</span>&gt;</span>    </span><br><span class="line">	<span class="tag">&lt;<span class="name">listener-class</span>&gt;</span>org.springframework.web.context.ContextLoaderListener<span class="tag">&lt;/<span class="name">listener-class</span>&gt;</span><span class="tag">&lt;/<span class="name">listener</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--è¯»å–Springçš„é…ç½®æ–‡ä»¶--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context-param</span>&gt;</span>    </span><br><span class="line">	<span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span>    </span><br><span class="line">	<span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:applicationContext<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">context-param</span>&gt;</span></span><br></pre></td></tr></table></figure>



<p>Servletç±»ç”±</p>
<p><code>ApplicationContext ac = new ClassPathXmlApplicationContext(&quot;applicationContext&quot;);</code></p>
<p>æ”¹ä¸ºï¼š</p>
<p><code>WebApplicationContext wac = WebApplicationContextUtils.getWebApplicationContext(getServletContext());</code></p>
<h2 id="part5-Spring-aop"><a href="#part5-Spring-aop" class="headerlink" title="part5 Spring-aop "></a>part5 Spring-aop </h2><h3 id="1ã€-aopæ€æƒ³ä»‹ç»ï¼ˆé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼‰ï¼šå°†çºµå‘é‡å¤ä»£ç ï¼Œæ¨ªå‘æŠ½å–è§£å†³ï¼Œç®€ç§°ï¼šæ¨ªåˆ‡"><a href="#1ã€-aopæ€æƒ³ä»‹ç»ï¼ˆé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼‰ï¼šå°†çºµå‘é‡å¤ä»£ç ï¼Œæ¨ªå‘æŠ½å–è§£å†³ï¼Œç®€ç§°ï¼šæ¨ªåˆ‡" class="headerlink" title="1ã€ aopæ€æƒ³ä»‹ç»ï¼ˆé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼‰ï¼šå°†çºµå‘é‡å¤ä»£ç ï¼Œæ¨ªå‘æŠ½å–è§£å†³ï¼Œç®€ç§°ï¼šæ¨ªåˆ‡"></a>1ã€ aopæ€æƒ³ä»‹ç»ï¼ˆé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼‰ï¼šå°†çºµå‘é‡å¤ä»£ç ï¼Œæ¨ªå‘æŠ½å–è§£å†³ï¼Œç®€ç§°ï¼šæ¨ªåˆ‡</h3><p><img src="https://github.com/ZephXu07/IMG/raw/master/aop%E6%80%9D%E6%83%B3%E6%A6%82%E5%BF%B5%E4%B8%BE%E4%BE%8B.png" alt="ä¾‹å›¾"></p>
<h3 id="2ã€-Springä¸­çš„aopï¼šæ— éœ€æˆ‘ä»¬è‡ªå·±å†™åŠ¨æ€ä»£ç†çš„ä»£ç ï¼Œspringå¯ä»¥å°†å®¹å™¨ä¸­ç®¡ç†å¯¹è±¡ç”ŸæˆåŠ¨æ€ä»£ç†å¯¹è±¡ï¼Œå‰ææ˜¯æˆ‘ä»¬å¯¹ä»–è¿›è¡Œä¸€äº›è®¾ç½®ï¼›"><a href="#2ã€-Springä¸­çš„aopï¼šæ— éœ€æˆ‘ä»¬è‡ªå·±å†™åŠ¨æ€ä»£ç†çš„ä»£ç ï¼Œspringå¯ä»¥å°†å®¹å™¨ä¸­ç®¡ç†å¯¹è±¡ç”ŸæˆåŠ¨æ€ä»£ç†å¯¹è±¡ï¼Œå‰ææ˜¯æˆ‘ä»¬å¯¹ä»–è¿›è¡Œä¸€äº›è®¾ç½®ï¼›" class="headerlink" title="2ã€ Springä¸­çš„aopï¼šæ— éœ€æˆ‘ä»¬è‡ªå·±å†™åŠ¨æ€ä»£ç†çš„ä»£ç ï¼Œspringå¯ä»¥å°†å®¹å™¨ä¸­ç®¡ç†å¯¹è±¡ç”ŸæˆåŠ¨æ€ä»£ç†å¯¹è±¡ï¼Œå‰ææ˜¯æˆ‘ä»¬å¯¹ä»–è¿›è¡Œä¸€äº›è®¾ç½®ï¼›"></a>2ã€ Springä¸­çš„aopï¼šæ— éœ€æˆ‘ä»¬è‡ªå·±å†™åŠ¨æ€ä»£ç†çš„ä»£ç ï¼Œspringå¯ä»¥å°†å®¹å™¨ä¸­ç®¡ç†å¯¹è±¡ç”ŸæˆåŠ¨æ€ä»£ç†å¯¹è±¡ï¼Œå‰ææ˜¯æˆ‘ä»¬å¯¹ä»–è¿›è¡Œä¸€äº›è®¾ç½®ï¼›</h3><h3 id="3ã€-Spring-aopæ˜¯åŸºäºåŠ¨æ€ä»£ç†çš„-â€“-ä¼˜å…ˆé€‰ç”¨JDKProxyåŠ¨æ€ä»£ç†ï¼›"><a href="#3ã€-Spring-aopæ˜¯åŸºäºåŠ¨æ€ä»£ç†çš„-â€“-ä¼˜å…ˆé€‰ç”¨JDKProxyåŠ¨æ€ä»£ç†ï¼›" class="headerlink" title="3ã€ Spring-aopæ˜¯åŸºäºåŠ¨æ€ä»£ç†çš„ â€“ ä¼˜å…ˆé€‰ç”¨JDKProxyåŠ¨æ€ä»£ç†ï¼›"></a>3ã€ Spring-aopæ˜¯åŸºäºåŠ¨æ€ä»£ç†çš„ â€“ ä¼˜å…ˆé€‰ç”¨JDKProxyåŠ¨æ€ä»£ç†ï¼›</h3><p><a href="https://zephxu07.github.io/2019/10/02/%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86%E7%AC%94%E8%AE%B0/" target="_blank" rel="noopener">æ›´åŠ è¯¦ç»†çš„åŠ¨æ€ä»£ç†</a></p>
<p><img src="https://github.com/ZephXu07/IMG/raw/master/Snipaste_2019-10-02_18-01-30.png" alt="example"></p>
<h4 id="a-ProxyåŠ¨æ€ä»£ç†ï¼šè¢«ä»£ç†çš„å¯¹è±¡å¿…é¡»è¦å®ç°æ¥å£ï¼›"><a href="#a-ProxyåŠ¨æ€ä»£ç†ï¼šè¢«ä»£ç†çš„å¯¹è±¡å¿…é¡»è¦å®ç°æ¥å£ï¼›" class="headerlink" title="a) ProxyåŠ¨æ€ä»£ç†ï¼šè¢«ä»£ç†çš„å¯¹è±¡å¿…é¡»è¦å®ç°æ¥å£ï¼›"></a>a) ProxyåŠ¨æ€ä»£ç†ï¼šè¢«ä»£ç†çš„å¯¹è±¡å¿…é¡»è¦å®ç°æ¥å£ï¼›</h4><h4 id="b-CglibåŠ¨æ€ä»£ç†ï¼šè¢«ä»£ç†çš„å¯¹è±¡ä¸èƒ½è¢«finalä¿®é¥°ï¼ŒåŸºäºç»§æ‰¿ï¼›"><a href="#b-CglibåŠ¨æ€ä»£ç†ï¼šè¢«ä»£ç†çš„å¯¹è±¡ä¸èƒ½è¢«finalä¿®é¥°ï¼ŒåŸºäºç»§æ‰¿ï¼›" class="headerlink" title="b) CglibåŠ¨æ€ä»£ç†ï¼šè¢«ä»£ç†çš„å¯¹è±¡ä¸èƒ½è¢«finalä¿®é¥°ï¼ŒåŸºäºç»§æ‰¿ï¼›"></a>b) CglibåŠ¨æ€ä»£ç†ï¼šè¢«ä»£ç†çš„å¯¹è±¡ä¸èƒ½è¢«finalä¿®é¥°ï¼ŒåŸºäºç»§æ‰¿ï¼›</h4><h3 id="4ã€-Spring-aopç›¸å…³åè¯è¯´æ˜-ï¼›"><a href="#4ã€-Spring-aopç›¸å…³åè¯è¯´æ˜-ï¼›" class="headerlink" title="4ã€ Spring aopç›¸å…³åè¯è¯´æ˜ ï¼›"></a>4ã€ Spring aopç›¸å…³åè¯è¯´æ˜ ï¼›</h3><p><img src="https://github.com/ZephXu07/IMG/raw/master/Snipaste_2019-10-02_18-07-38.png" alt="conceptual
graphs"></p>
<h3 id="5ã€-Spring-aopé…ç½®ï¼š"><a href="#5ã€-Spring-aopé…ç½®ï¼š" class="headerlink" title="5ã€ Spring aopé…ç½®ï¼š"></a>5ã€ Spring aopé…ç½®ï¼š</h3><h4 id="a-å¯¼åŒ…ï¼š"><a href="#a-å¯¼åŒ…ï¼š" class="headerlink" title="a) å¯¼åŒ…ï¼š"></a>a) å¯¼åŒ…ï¼š</h4><h5 id="i-åŸºæœ¬åŒ…ï¼›"><a href="#i-åŸºæœ¬åŒ…ï¼›" class="headerlink" title="i. åŸºæœ¬åŒ…ï¼›"></a>i. åŸºæœ¬åŒ…ï¼›</h5><h5 id="ii-spring-aspectså’Œspring-aop-ï¼›"><a href="#ii-spring-aspectså’Œspring-aop-ï¼›" class="headerlink" title="ii. spring-aspectså’Œspring-aop ï¼›"></a>ii. spring-aspectså’Œspring-aop ï¼›</h5><h5 id="iii-aopè”ç›ŸåŒ…-â€“-aopallianceï¼›"><a href="#iii-aopè”ç›ŸåŒ…-â€“-aopallianceï¼›" class="headerlink" title="iii. aopè”ç›ŸåŒ… â€“ aopallianceï¼›"></a>iii. aopè”ç›ŸåŒ… â€“ aopallianceï¼›</h5><h5 id="v-aopç»‡å…¥åŒ…-aspectj-weaverï¼›"><a href="#v-aopç»‡å…¥åŒ…-aspectj-weaverï¼›" class="headerlink" title="v. aopç»‡å…¥åŒ… - aspectj.weaverï¼›"></a>v. aopç»‡å…¥åŒ… - aspectj.weaverï¼›</h5><h4 id="b-è‡ªå®šä¹‰é€šçŸ¥ï¼Œäº”ç§è‡ªå®šä¹‰é€šçŸ¥ç±»å‹ï¼š"><a href="#b-è‡ªå®šä¹‰é€šçŸ¥ï¼Œäº”ç§è‡ªå®šä¹‰é€šçŸ¥ç±»å‹ï¼š" class="headerlink" title="b) è‡ªå®šä¹‰é€šçŸ¥ï¼Œäº”ç§è‡ªå®šä¹‰é€šçŸ¥ç±»å‹ï¼š"></a>b) è‡ªå®šä¹‰é€šçŸ¥ï¼Œäº”ç§è‡ªå®šä¹‰é€šçŸ¥ç±»å‹ï¼š</h4><h5 id="i-before-å‰ç½®é€šçŸ¥ï¼šåœ¨ç›®æ ‡æ–¹æ³•å‰è°ƒç”¨"><a href="#i-before-å‰ç½®é€šçŸ¥ï¼šåœ¨ç›®æ ‡æ–¹æ³•å‰è°ƒç”¨" class="headerlink" title="i. before å‰ç½®é€šçŸ¥ï¼šåœ¨ç›®æ ‡æ–¹æ³•å‰è°ƒç”¨"></a>i. before å‰ç½®é€šçŸ¥ï¼šåœ¨ç›®æ ‡æ–¹æ³•å‰è°ƒç”¨</h5><h5 id="ii-after-æœ€ç»ˆé€šçŸ¥ï¼ˆåç½®é€šçŸ¥ï¼‰ï¼šåœ¨ç›®æ ‡æ–¹æ³•åè°ƒç”¨ï¼Œæ— è®ºæ˜¯å¦å‡ºç°å¼‚å¸¸éƒ½ä¼šè°ƒç”¨ï¼Œç±»ä¼¼finally"><a href="#ii-after-æœ€ç»ˆé€šçŸ¥ï¼ˆåç½®é€šçŸ¥ï¼‰ï¼šåœ¨ç›®æ ‡æ–¹æ³•åè°ƒç”¨ï¼Œæ— è®ºæ˜¯å¦å‡ºç°å¼‚å¸¸éƒ½ä¼šè°ƒç”¨ï¼Œç±»ä¼¼finally" class="headerlink" title="ii. after æœ€ç»ˆé€šçŸ¥ï¼ˆåç½®é€šçŸ¥ï¼‰ï¼šåœ¨ç›®æ ‡æ–¹æ³•åè°ƒç”¨ï¼Œæ— è®ºæ˜¯å¦å‡ºç°å¼‚å¸¸éƒ½ä¼šè°ƒç”¨ï¼Œç±»ä¼¼finally"></a>ii. after æœ€ç»ˆé€šçŸ¥ï¼ˆåç½®é€šçŸ¥ï¼‰ï¼šåœ¨ç›®æ ‡æ–¹æ³•åè°ƒç”¨ï¼Œæ— è®ºæ˜¯å¦å‡ºç°å¼‚å¸¸éƒ½ä¼šè°ƒç”¨ï¼Œç±»ä¼¼finally</h5><h5 id="iii-afterReturning-æˆåŠŸé€šçŸ¥ï¼ˆåç½®é€šçŸ¥ï¼‰ï¼šåœ¨ç›®æ ‡æ–¹æ³•åæ‰§è¡Œåï¼Œå¹¶ä¸”æ‰§è¡ŒæˆåŠŸæ—¶è°ƒç”¨ï¼Œå‡ºç°å¼‚å¸¸åˆ™ä¸è°ƒç”¨"><a href="#iii-afterReturning-æˆåŠŸé€šçŸ¥ï¼ˆåç½®é€šçŸ¥ï¼‰ï¼šåœ¨ç›®æ ‡æ–¹æ³•åæ‰§è¡Œåï¼Œå¹¶ä¸”æ‰§è¡ŒæˆåŠŸæ—¶è°ƒç”¨ï¼Œå‡ºç°å¼‚å¸¸åˆ™ä¸è°ƒç”¨" class="headerlink" title="iii. afterReturning æˆåŠŸé€šçŸ¥ï¼ˆåç½®é€šçŸ¥ï¼‰ï¼šåœ¨ç›®æ ‡æ–¹æ³•åæ‰§è¡Œåï¼Œå¹¶ä¸”æ‰§è¡ŒæˆåŠŸæ—¶è°ƒç”¨ï¼Œå‡ºç°å¼‚å¸¸åˆ™ä¸è°ƒç”¨"></a>iii. afterReturning æˆåŠŸé€šçŸ¥ï¼ˆåç½®é€šçŸ¥ï¼‰ï¼šåœ¨ç›®æ ‡æ–¹æ³•åæ‰§è¡Œåï¼Œå¹¶ä¸”æ‰§è¡ŒæˆåŠŸæ—¶è°ƒç”¨ï¼Œå‡ºç°å¼‚å¸¸åˆ™ä¸è°ƒç”¨</h5><h5 id="iv-afterThrowing-å¼‚å¸¸é€šçŸ¥ï¼ˆåç½®é€šçŸ¥ï¼‰ï¼šåœ¨ç›®æ ‡æ–¹æ³•åæ‰§è¡Œåï¼Œå¹¶ä¸”å‡ºç°å¼‚å¸¸è°ƒç”¨ï¼Œæ‰§è¡ŒæˆåŠŸæ—¶åˆ™ä¸è°ƒç”¨"><a href="#iv-afterThrowing-å¼‚å¸¸é€šçŸ¥ï¼ˆåç½®é€šçŸ¥ï¼‰ï¼šåœ¨ç›®æ ‡æ–¹æ³•åæ‰§è¡Œåï¼Œå¹¶ä¸”å‡ºç°å¼‚å¸¸è°ƒç”¨ï¼Œæ‰§è¡ŒæˆåŠŸæ—¶åˆ™ä¸è°ƒç”¨" class="headerlink" title="iv. afterThrowing å¼‚å¸¸é€šçŸ¥ï¼ˆåç½®é€šçŸ¥ï¼‰ï¼šåœ¨ç›®æ ‡æ–¹æ³•åæ‰§è¡Œåï¼Œå¹¶ä¸”å‡ºç°å¼‚å¸¸è°ƒç”¨ï¼Œæ‰§è¡ŒæˆåŠŸæ—¶åˆ™ä¸è°ƒç”¨"></a>iv. afterThrowing å¼‚å¸¸é€šçŸ¥ï¼ˆåç½®é€šçŸ¥ï¼‰ï¼šåœ¨ç›®æ ‡æ–¹æ³•åæ‰§è¡Œåï¼Œå¹¶ä¸”å‡ºç°å¼‚å¸¸è°ƒç”¨ï¼Œæ‰§è¡ŒæˆåŠŸæ—¶åˆ™ä¸è°ƒç”¨</h5><h5 id="v-around-ç¯ç»•é€šçŸ¥ï¼šéœ€è¦æˆ‘ä»¬æ‰‹åŠ¨è°ƒç”¨ç›®æ ‡æ–¹æ³•ï¼Œå¹¶ä¸”å¯ä»¥è®¾ç½®é€šçŸ¥"><a href="#v-around-ç¯ç»•é€šçŸ¥ï¼šéœ€è¦æˆ‘ä»¬æ‰‹åŠ¨è°ƒç”¨ç›®æ ‡æ–¹æ³•ï¼Œå¹¶ä¸”å¯ä»¥è®¾ç½®é€šçŸ¥" class="headerlink" title="v. around ç¯ç»•é€šçŸ¥ï¼šéœ€è¦æˆ‘ä»¬æ‰‹åŠ¨è°ƒç”¨ç›®æ ‡æ–¹æ³•ï¼Œå¹¶ä¸”å¯ä»¥è®¾ç½®é€šçŸ¥"></a>v. around ç¯ç»•é€šçŸ¥ï¼šéœ€è¦æˆ‘ä»¬æ‰‹åŠ¨è°ƒç”¨ç›®æ ‡æ–¹æ³•ï¼Œå¹¶ä¸”å¯ä»¥è®¾ç½®é€šçŸ¥</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyAdvice</span> </span>&#123;    </span><br><span class="line">    <span class="comment">//    before å‰ç½®é€šçŸ¥    </span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">before</span><span class="params">()</span> </span>&#123;       </span><br><span class="line">        System.out.println(<span class="string">"before"</span>);    </span><br><span class="line">    &#125;    </span><br><span class="line">    <span class="comment">//    after æœ€ç»ˆé€šçŸ¥ï¼ˆåç½®é€šçŸ¥ï¼‰ </span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">after</span><span class="params">()</span> </span>&#123;        </span><br><span class="line">        System.out.println(<span class="string">"after"</span>);   </span><br><span class="line">    &#125;   </span><br><span class="line">    <span class="comment">//  afterReturning æˆåŠŸé€šçŸ¥ï¼ˆåç½®é€šçŸ¥ï¼‰    </span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">afterReturning</span><span class="params">()</span> </span>&#123;        </span><br><span class="line">        System.out.println(<span class="string">"afterReturning"</span>);</span><br><span class="line">    &#125;    </span><br><span class="line">    <span class="comment">//    afterThrowing å¼‚å¸¸é€šçŸ¥ï¼ˆåç½®é€šçŸ¥ï¼‰    </span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">afterThrowing</span><span class="params">()</span> </span>&#123; </span><br><span class="line">        System.out.println(<span class="string">"afterThrowing"</span>);    </span><br><span class="line">    &#125;   </span><br><span class="line">    <span class="comment">//    around ç¯ç»•é€šçŸ¥     </span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">around</span><span class="params">(ProceedingJoinPoint pjp)</span> <span class="keyword">throws</span> Throwable </span>&#123;      </span><br><span class="line">        System.out.println(<span class="string">"around before"</span>); </span><br><span class="line">        Object proceed  = pjp.proceed();        </span><br><span class="line">        System.out.println(<span class="string">"around after"</span>);        </span><br><span class="line">        <span class="keyword">return</span> proceed; </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="c-é…ç½®applicationContext-xmlï¼š"><a href="#c-é…ç½®applicationContext-xmlï¼š" class="headerlink" title="c) é…ç½®applicationContext.xmlï¼š"></a><a href="#c-é…ç½®applicationContext-xmlï¼š" title="c)      é…ç½®applicationContext.xmlï¼š"></a>c) é…ç½®applicationContext.xmlï¼š</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span>       <span class="attr">xmlns:aop</span>=<span class="string">"http://www.springframework.org/schema/aop"</span>       <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans        http://www.springframework.org/schema/beans/spring-beans-4.3.xsd            http://www.springframework.org/schema/aop              http://www.springframework.org/schema/aop/spring-aop-4.3.xsd"</span>&gt;</span>    </span><br><span class="line"><span class="comment">&lt;!--ç›®æ ‡å¯¹è±¡--&gt;</span>    </span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">name</span>=<span class="string">"userService"</span> <span class="attr">class</span>=<span class="string">"com.zephxu.service.UserServiceImpl"</span>/&gt;</span>    <span class="comment">&lt;!--   é€šçŸ¥å¯¹è±¡ --&gt;</span>    </span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">name</span>=<span class="string">"myAdvice"</span> <span class="attr">class</span>=<span class="string">"com.zephxu.aop.MyAdvice"</span>/&gt;</span>   </span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:config</span>&gt;</span>        </span><br><span class="line">    <span class="comment">&lt;!-- åˆ‡å…¥ç‚¹           expressionï¼šåˆ‡å…¥ç‚¹è¡¨è¾¾å¼ï¼Œ å¯ä»¥é…ç½®è¦å¢å¼ºçš„æ–¹æ³• </span></span><br><span class="line"><span class="comment">    å•ç‹¬é’ˆå¯¹æ­¤æ–¹æ³•ï¼špublic void com.zephxu.service.UserServiceImpl.save()           è¾ƒå¤§èŒƒå›´ï¼š* com.zephxu.service.*ServiceImpl.*(..)ï¼Œæ­¤è¡¨è¾¾å¼å¯å¯¹publicç­‰æƒé™çš„serviceä¸‹æ‰€æœ‰ä»¥ServiceImplç»“å°¾çš„æ‰€æœ‰æ–¹æ³•å¢å¼ºä¸ç®¡æ­¤æ–¹æ³•çš„å‚æ•°å‡ ä½•åŠä½•è¿”å›å€¼</span></span><br><span class="line"><span class="comment">    idï¼šå”¯ä¸€æ ‡è¯†--&gt;</span>        </span><br><span class="line">            <span class="tag">&lt;<span class="name">aop:pointcut</span> <span class="attr">id</span>=<span class="string">"servicePc"</span> <span class="attr">expression</span>=<span class="string">"execution(* com.zephxu.service.*ServiceImpl.*(..))"</span>/&gt;</span>        </span><br><span class="line">    <span class="comment">&lt;!--åˆ‡é¢ï¼šé€šçŸ¥ + åˆ‡å…¥ç‚¹        --&gt;</span>        </span><br><span class="line">            <span class="tag">&lt;<span class="name">aop:aspect</span> <span class="attr">ref</span>=<span class="string">"myAdvice"</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--ç»‘å®šé€šçŸ¥å¯¹è±¡--&gt;</span>            </span><br><span class="line">            <span class="comment">&lt;!--é€šçŸ¥ç±»å‹--&gt;</span>            </span><br><span class="line">            <span class="comment">&lt;!-- å‰ç½®é€šçŸ¥ --&gt;</span> </span><br><span class="line">            <span class="tag">&lt;<span class="name">aop:before</span> <span class="attr">method</span>=<span class="string">"before"</span> <span class="attr">pointcut-ref</span>=<span class="string">"servicePc"</span>/&gt;</span> </span><br><span class="line">            <span class="comment">&lt;!-- æœ€ç»ˆé€šçŸ¥ï¼ˆåç½®é€šçŸ¥ï¼‰           --&gt;</span>  </span><br><span class="line">            <span class="tag">&lt;<span class="name">aop:after</span> <span class="attr">method</span>=<span class="string">"after"</span> <span class="attr">pointcut-ref</span>=<span class="string">"servicePc"</span>/&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- æˆåŠŸé€šçŸ¥ï¼ˆåç½®é€šçŸ¥ï¼‰          --&gt;</span>     </span><br><span class="line">            <span class="tag">&lt;<span class="name">aop:after-returning</span> <span class="attr">method</span>=<span class="string">" afterReturning"</span> <span class="attr">pointcut-ref</span>=<span class="string">"servicePc"</span>/&gt;</span>            <span class="comment">&lt;!--    å¼‚å¸¸é€šçŸ¥ï¼ˆåç½®é€šçŸ¥ï¼‰ --&gt;</span>            </span><br><span class="line">            <span class="tag">&lt;<span class="name">aop:after-throwing</span> <span class="attr">method</span>=<span class="string">"afterThrowing"</span> <span class="attr">pointcut-ref</span>=<span class="string">"servicePc"</span>/&gt;</span>            <span class="comment">&lt;!--    ç¯ç»•é€šçŸ¥          --&gt;</span>            </span><br><span class="line">            <span class="tag">&lt;<span class="name">aop:around</span> <span class="attr">method</span>=<span class="string">"around"</span> <span class="attr">pointcut-ref</span>=<span class="string">"servicePc"</span>/&gt;</span>        </span><br><span class="line">            <span class="tag">&lt;/<span class="name">aop:aspect</span>&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;/<span class="name">aop:config</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h4 id="dï¼‰æµ‹è¯•åŠç»“æœ"><a href="#dï¼‰æµ‹è¯•åŠç»“æœ" class="headerlink" title="dï¼‰æµ‹è¯•åŠç»“æœ"></a>dï¼‰æµ‹è¯•åŠç»“æœ</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">@RunWith(SpringJUnit4ClassRunner.class)@ContextConfiguration("classpath:applicationContext.xml")</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AopTest</span> </span>&#123;   </span><br><span class="line">	<span class="meta">@Resource</span>(name = <span class="string">"userService"</span>)    </span><br><span class="line">	UserService us;    </span><br><span class="line">	<span class="meta">@Test</span>    </span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test2</span><span class="params">()</span> </span>&#123;        </span><br><span class="line">		us.delete();   </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><strong><em>ç»“æœï¼š</em></strong></p>
<p><img src="https://github.com/ZephXu07/IMG/raw/master/RunningResult.png" alt="result"></p>
<p><strong><em>æµ‹è¯•å¼‚å¸¸ï¼š</em></strong></p>
<p><img src="https://github.com/ZephXu07/IMG/raw/master/TestThrow.png" alt="testThrow"></p>
<p><img src="https://github.com/ZephXu07/IMG/raw/master/ThrowResult.png" alt="ThrowingResult"></p>
<h4 id="eï¼‰bugåŠåŸå› ï¼š"><a href="#eï¼‰bugåŠåŸå› ï¼š" class="headerlink" title="eï¼‰bugåŠåŸå› ï¼š"></a>eï¼‰bugåŠåŸå› ï¼š</h4><p><strong><em>BUG:</em></strong></p>
<p><strong><em>Caused by:<br>org.springframework.beans.factory.parsing.BeanDefinitionParsingException:<br>Configuration problem: tag needs aspect bean reference via â€˜refâ€™<br>attribute when declaring advices.<br>Offending resource: class path resource [applicationContext.xml]</em></strong><br><strong><em>Aspect: ref=â€™â€™</em></strong></p>
<p><strong><em>Reasonï¼š</em></strong></p>
<p><img src="https://github.com/ZephXu07/IMG/raw/master/BugReason.png" alt="reason"></p>
<h2 id="part6ã€Springä¸Jdbc"><a href="#part6ã€Springä¸Jdbc" class="headerlink" title="part6ã€Springä¸Jdbc "></a>part6ã€Springä¸Jdbc </h2><h3 id="1ã€-ä½¿ç”¨JdbcTemplateæ“ä½œæ•°æ®åº“ï¼›"><a href="#1ã€-ä½¿ç”¨JdbcTemplateæ“ä½œæ•°æ®åº“ï¼›" class="headerlink" title="1ã€ ä½¿ç”¨JdbcTemplateæ“ä½œæ•°æ®åº“ï¼›"></a>1ã€ ä½¿ç”¨JdbcTemplateæ“ä½œæ•°æ®åº“ï¼›</h3><ul>
<li>å¯¼åŒ…ï¼šæ–°å¢jdbcã€tx</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserDaoImpl</span> <span class="keyword">implements</span> <span class="title">UserDao</span> </span>&#123;    </span><br><span class="line"> 	<span class="keyword">private</span> <span class="keyword">static</span> ComboPooledDataSource dataSource;</span><br><span class="line"> 	<span class="keyword">static</span> &#123;        </span><br><span class="line"> 		<span class="keyword">try</span> &#123;            <span class="comment">// é…ç½®c3p0ï¼Œè¿æ¥æ•°æ®åº“            </span></span><br><span class="line">            dataSource = <span class="keyword">new</span> ComboPooledDataSource();      </span><br><span class="line">            dataSource.setDriverClass(<span class="string">"com.mysql.cj.jdbc.Driver"</span>); </span><br><span class="line">            dataSource.setJdbcUrl(<span class="string">"jdbc:mysql://localhost:3306/ssm_spring?serverTimezone=Asia/Shanghai"</span>);            </span><br><span class="line">            dataSource.setUser(<span class="string">"root"</span>);            </span><br><span class="line">            dataSource.setPassword(<span class="string">"10709991"</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (PropertyVetoException e) &#123;            </span><br><span class="line">        	e.printStackTrace();        </span><br><span class="line">        &#125;   </span><br><span class="line">	&#125;    </span><br><span class="line">	<span class="meta">@Override</span>    </span><br><span class="line">	<span class="function"><span class="keyword">public</span> User <span class="title">selectUserById</span><span class="params">(Integer id)</span> </span>&#123; </span><br><span class="line">        JdbcTemplate jt = <span class="keyword">new</span> JdbcTemplate(dataSource);</span><br><span class="line">        String sql = <span class="string">"select * from user where u_id = ?"</span>;        </span><br><span class="line">        User user = jt.queryForObject(sql, <span class="keyword">new</span> RowMapper&lt;User&gt;() &#123;</span><br><span class="line">            <span class="meta">@Override</span>            </span><br><span class="line">            <span class="function"><span class="keyword">public</span> User <span class="title">mapRow</span><span class="params">(ResultSet rs, <span class="keyword">int</span> index)</span> <span class="keyword">throws</span> SQLException </span>&#123;           	User u = <span class="keyword">new</span> User();</span><br><span class="line">                u.setU_id(rs.getInt(<span class="string">"u_id"</span>));</span><br><span class="line">                u.setU_username(rs.getString(<span class="string">"u_username"</span>));</span><br><span class="line">                u.setU_password(rs.getString(<span class="string">"u_password"</span>));                </span><br><span class="line">                <span class="keyword">return</span> u;</span><br><span class="line">            &#125;        </span><br><span class="line">		&#125;, id);        </span><br><span class="line">		<span class="keyword">return</span> user;   </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2ã€-JdbcTemplateçš„å¢åˆ æ”¹æŸ¥æ“ä½œï¼›"><a href="#2ã€-JdbcTemplateçš„å¢åˆ æ”¹æŸ¥æ“ä½œï¼›" class="headerlink" title="2ã€ JdbcTemplateçš„å¢åˆ æ”¹æŸ¥æ“ä½œï¼›"></a>2ã€ JdbcTemplateçš„å¢åˆ æ”¹æŸ¥æ“ä½œï¼›</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span>   </span><br><span class="line"><span class="function"><span class="keyword">public</span> List&lt;User&gt; <span class="title">selectAllUser</span><span class="params">()</span> </span>&#123;       </span><br><span class="line">    String sql = <span class="string">"select * from user"</span>;       </span><br><span class="line">    List&lt;User&gt; userList = jt.query(sql, <span class="keyword">new</span> RowMapper&lt;User&gt;() &#123;           			<span class="meta">@Override</span> </span><br><span class="line">        <span class="function"><span class="keyword">public</span> User <span class="title">mapRow</span><span class="params">(ResultSet rs, <span class="keyword">int</span> index)</span> <span class="keyword">throws</span> SQLException </span>&#123;   </span><br><span class="line">       		User u = <span class="keyword">new</span> User();              </span><br><span class="line">			u.setU_id(rs.getInt(<span class="string">"u_id"</span>));              </span><br><span class="line">			u.setU_username(rs.getString(<span class="string">"u_username"</span>));     </span><br><span class="line">            u.setU_password(rs.getString(<span class="string">"u_password"</span>));               </span><br><span class="line">            <span class="keyword">return</span> u;           </span><br><span class="line">        &#125;      </span><br><span class="line">    &#125;);        </span><br><span class="line">    <span class="keyword">return</span> userList;  </span><br><span class="line">&#125;   </span><br><span class="line"><span class="meta">@Override</span>   </span><br><span class="line"><span class="function"><span class="keyword">public</span> Integer <span class="title">selectUserCount</span><span class="params">()</span> </span>&#123; </span><br><span class="line">    String sql = <span class="string">"select count(*) from user"</span>;       </span><br><span class="line">    <span class="keyword">return</span> jt.queryForObject(sql, Integer<span class="class">.<span class="keyword">class</span>)</span>; </span><br><span class="line">&#125;   </span><br><span class="line"><span class="meta">@Override</span>   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addUser</span><span class="params">(User user)</span> </span>&#123;     </span><br><span class="line">    String sql = <span class="string">"insert into user values(null, ?, ?)"</span>;   </span><br><span class="line">    jt.update(sql, user.getU_username(), user.getU_username());  </span><br><span class="line">&#125;   </span><br><span class="line"><span class="meta">@Override</span> </span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">deleteUser</span><span class="params">(Integer id)</span> </span>&#123;       </span><br><span class="line">    String sql = <span class="string">"delete from user where u_id = ?"</span>;       </span><br><span class="line">    jt.update(sql, id);   </span><br><span class="line">&#125;   </span><br><span class="line"><span class="meta">@Override</span>  </span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">update</span><span class="params">(User user)</span> </span>&#123;   </span><br><span class="line">    String sql = <span class="string">"update user set u_username = ?, u_password = ? where u_id = ?"</span> ;       </span><br><span class="line">    jt.update(sql, user.getU_username(), user.getU_password(), user.getU_id()); </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="3ã€-è®©Springå®¹å™¨ç®¡ç†JdbcTemplateï¼›"><a href="#3ã€-è®©Springå®¹å™¨ç®¡ç†JdbcTemplateï¼›" class="headerlink" title="3ã€ è®©Springå®¹å™¨ç®¡ç†JdbcTemplateï¼›"></a>3ã€ è®©Springå®¹å™¨ç®¡ç†JdbcTemplateï¼›</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">&lt;!--ä¾èµ–å…³ç³»ï¼šdao -&gt; jdbcTemplate -&gt;  dataSource --&gt;</span></span><br><span class="line"> <span class="comment">&lt;!--    dataSource--&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">bean</span> <span class="attr">name</span>=<span class="string">"dataSource"</span> <span class="attr">class</span>=<span class="string">"com.mchange.v2.c3p0.ComboPooledDataSource"</span>&gt;</span>   	</span><br><span class="line"> 	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"driverClass"</span> <span class="attr">value</span>=<span class="string">"com.mysql.cj.jdbc.Driver"</span>/&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"jdbcUrl"</span> <span class="attr">value</span>=<span class="string">"jdbc:mysql://localhost:3306/ssm_spring?serverTimezone=Asia/Shanghai"</span>/&gt;</span>   </span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"user"</span> <span class="attr">value</span>=<span class="string">"root"</span>/&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">value</span>=<span class="string">"10709991"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    jdbcTemplate--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">name</span>=<span class="string">"jdbcTemplate"</span> <span class="attr">class</span>=<span class="string">"org.springframework.jdbc.core.JdbcTe mplate"</span>&gt;</span>    </span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"dataSource"</span> <span class="attr">ref</span>=<span class="string">"dataSource"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--dao--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">name</span>=<span class="string">"userDao"</span> <span class="attr">class</span>=<span class="string">"com.zephxu.dao.UserDaoImpl"</span>&gt;</span>   </span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"jt"</span> <span class="attr">ref</span>=<span class="string">"jdbcTemplate"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h3 id="4ã€-ç»§æ‰¿JdbcDaoSupportç”©å¼€JdbcTemplat"><a href="#4ã€-ç»§æ‰¿JdbcDaoSupportç”©å¼€JdbcTemplat" class="headerlink" title="4ã€ ç»§æ‰¿JdbcDaoSupportç”©å¼€JdbcTemplat"></a>4ã€ ç»§æ‰¿JdbcDaoSupportç”©å¼€JdbcTemplat</h3><p><code>public class UserDaoImpl extends JdbcDaoSupport implements UserDao { }</code></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--ä¾èµ–å…³ç³»ï¼šdao -&gt; dataSource --&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    dataSource--&gt;</span>    </span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">name</span>=<span class="string">"dataSource"</span> <span class="attr">class</span>=<span class="string">"com.mchange.v2.c3p0.ComboPooledDataSource"</span>&gt;</span>           </span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"driverClass"</span> <span class="attr">value</span>=<span class="string">"com.mysql.cj.jdbc.Driver"</span>/&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"jdbcUrl"</span> <span class="attr">value</span>=<span class="string">"jdbc:mysql://localhost:3306/ssm_spring?serverTimezone=Asia/Shanghai"</span>/&gt;</span>       </span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"user"</span> <span class="attr">value</span>=<span class="string">"root"</span>/&gt;</span>          </span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">value</span>=<span class="string">"10709991"</span>/&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">name</span>=<span class="string">"userDao"</span> <span class="attr">class</span>=<span class="string">"com.zephxu.dao.UserDaoImpl"</span>&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"dataSource"</span> <span class="attr">ref</span>=<span class="string">"dataSource"</span>/&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h3 id="5ã€-åœ¨Springä¸­è¯»å–é…ç½®æ–‡ä»¶"><a href="#5ã€-åœ¨Springä¸­è¯»å–é…ç½®æ–‡ä»¶" class="headerlink" title="5ã€ åœ¨Springä¸­è¯»å–é…ç½®æ–‡ä»¶"></a>5ã€ åœ¨Springä¸­è¯»å–é…ç½®æ–‡ä»¶</h3><p>db.propertiesï¼š</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">jdbc.driverClass</span>=<span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line"><span class="meta">jdbc.jdbcUrl</span>=<span class="string">jdbc:mysql://localhost:3306/ssm_spring?serverTimezone=Asia/Shanghai</span></span><br><span class="line"><span class="meta">jdbc.user</span>=<span class="string">rootjdbc. password=10709991</span></span><br></pre></td></tr></table></figure>

<p>applicationContext.xmlï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span>       <span class="attr">xmlns:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span>       <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans       http://www.springframework.org/schema/beans/spring-beans.xsd        http://www.springframework.org/schema/context        http://www.springframework.org/schema/context/spring-context.xsd"</span>&gt;</span>   </span><br><span class="line"><span class="comment">&lt;!--è¯»å–é…ç½®æ–‡ä»¶--&gt;</span>        </span><br><span class="line"><span class="tag">&lt;<span class="name">context:property-placeholder</span> <span class="attr">location</span>=<span class="string">"db.properties"</span>/&gt;</span>   </span><br><span class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">name</span>=<span class="string">"dataSource"</span> <span class="attr">class</span>=<span class="string">"com.mchange.v2.c3p0.ComboPooledDataSource"</span>&gt;</span>      </span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"driverClass"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.driverClass&#125;"</span>/&gt;</span>        </span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"jdbcUrl"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.jdbcUrl&#125;"</span>/&gt;</span>        </span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"user"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.user&#125;"</span>/&gt;</span>     </span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.password&#125;"</span>/&gt;</span>  </span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h2 id="part7-Springä¸­çš„aopäº‹åŠ¡"><a href="#part7-Springä¸­çš„aopäº‹åŠ¡" class="headerlink" title="part7 Springä¸­çš„aopäº‹åŠ¡ "></a>part7 Springä¸­çš„aopäº‹åŠ¡ </h2><h3 id="1ã€äº‹åŠ¡ç›¸å…³çŸ¥è¯†"><a href="#1ã€äº‹åŠ¡ç›¸å…³çŸ¥è¯†" class="headerlink" title="1ã€äº‹åŠ¡ç›¸å…³çŸ¥è¯†"></a>1ã€äº‹åŠ¡ç›¸å…³çŸ¥è¯†</h3><h4 id="a-ä»€ä¹ˆæ˜¯äº‹åŠ¡ï¼š"><a href="#a-ä»€ä¹ˆæ˜¯äº‹åŠ¡ï¼š" class="headerlink" title="a) ä»€ä¹ˆæ˜¯äº‹åŠ¡ï¼š"></a>a) ä»€ä¹ˆæ˜¯äº‹åŠ¡ï¼š</h4><p>æŠŠå¤šæ¡æ•°æ®åº“æ“ä½œæ†ç»‘åˆ°ä¸€èµ·æ‰§è¡Œï¼Œè¦ä¹ˆéƒ½æˆåŠŸï¼Œè¦ä¹ˆéƒ½å¤±è´¥ï¼›</p>
<h4 id="b-äº‹åŠ¡çš„åŸåˆ™ACIDï¼š"><a href="#b-äº‹åŠ¡çš„åŸåˆ™ACIDï¼š" class="headerlink" title="b) äº‹åŠ¡çš„åŸåˆ™ACIDï¼š"></a>b) äº‹åŠ¡çš„åŸåˆ™ACIDï¼š</h4><p>i.<br>åŸå­æ€§ï¼šäº‹åŠ¡åŒ…å«çš„æ‰€æœ‰æ“ä½œï¼Œè¦ä¹ˆå…¨éƒ¨æˆåŠŸï¼Œè¦ä¹ˆå…¨éƒ¨å¤±è´¥å›æ»šï¼ŒæˆåŠŸå…¨éƒ¨åº”ç”¨åˆ°æ•°æ®åº“ï¼Œå¤±è´¥ä¸èƒ½å¯¹æ•°æ®åº“æœ‰ä»»ä½•å½±å“ï¼›</p>
<p>ii.<br>ä¸€è‡´æ€§ï¼šäº‹åŠ¡åœ¨æ‰§è¡Œå‰å’Œæ‰§è¡Œåå¿…é¡»ä¸€è‡´ï¼›ä¾‹å¦‚Aå’ŒBä¸€å…±æœ‰100å—é’±ï¼Œæ— è®ºAã€Bä¹‹é—´å¦‚ä½•è½¬è´¦ï¼Œä»–ä»¬çš„é’±å§‹ç»ˆç›¸åŠ éƒ½æ˜¯100ï¼›</p>
<p>iii.<br>éš”ç¦»æ€§ï¼šå¤šç”¨æˆ·å¹¶å‘è®¿é—®åŒä¸€å¼ è¡¨æ—¶ï¼Œæ•°æ®åº“ä¸ºæ¯ä¸€ä¸ªç”¨æˆ·å¼€å¯æ–°çš„äº‹åŠ¡ï¼Œè¯¥äº‹åŠ¡ä¸èƒ½è¢«å…¶ä»–äº‹åŠ¡æ‰€å½±å“ï¼Œç›¸äº’æœ‰éš”ç¦»ï¼›</p>
<p>iv.<br>æŒä¹…æ€§ï¼šä¸€ä¸ªäº‹åŠ¡ä¸€æ—¦æäº¤ï¼Œåˆ™å¯¹æ•°æ®åº“ä¸­æ•°æ®çš„æ”¹å˜æ˜¯æ°¸ä¹…çš„ï¼Œå³ä¾¿ç³»ç»Ÿæ•…éšœä¹Ÿä¸ä¼šä¸¢å¤±ï¼›</p>
<h4 id="c-å¹¶å‘å¯èƒ½å¼•èµ·çš„é—®é¢˜ï¼š"><a href="#c-å¹¶å‘å¯èƒ½å¼•èµ·çš„é—®é¢˜ï¼š" class="headerlink" title="c) å¹¶å‘å¯èƒ½å¼•èµ·çš„é—®é¢˜ï¼š"></a>c) å¹¶å‘å¯èƒ½å¼•èµ·çš„é—®é¢˜ï¼š</h4><p>i. è„è¯»ï¼šä¸€ä¸ªäº‹åŠ¡è¯»å–åˆ°å¦ä¸€ä¸ªäº‹åŠ¡æœªæäº¤çš„æ•°æ®ï¼›</p>
<p>ii.<br>ä¸å¯é‡å¤è¯»ï¼šä¸€ä¸ªäº‹åŠ¡è¯»å–åˆ°å¦ä¸€ä¸ªäº‹åŠ¡å·²æäº¤(Updateæ“ä½œ)çš„æ•°æ®ï¼Œå¯¼è‡´å‰åè¯»å–ä¸ä¸€è‡´ï¼›</p>
<p>iii.<br>å¹»è¯»ï¼ˆè™šè¯»ï¼‰ï¼šä¸€ä¸ªäº‹åŠ¡ä¸­è¯»å–åˆ°åˆ«çš„äº‹åŠ¡æ’å…¥(Insertæ“ä½œ)çš„æ•°æ®ï¼Œå¯¼è‡´å‰åè¯»å–ä¸ä¸€è‡´ï¼›</p>
<h4 id="d-äº‹åŠ¡çš„éš”ç¦»çº§åˆ«ï¼šæ ¹æ®å®é™…æƒ…å†µé€‰æ‹©ï¼›"><a href="#d-äº‹åŠ¡çš„éš”ç¦»çº§åˆ«ï¼šæ ¹æ®å®é™…æƒ…å†µé€‰æ‹©ï¼›" class="headerlink" title="d) äº‹åŠ¡çš„éš”ç¦»çº§åˆ«ï¼šæ ¹æ®å®é™…æƒ…å†µé€‰æ‹©ï¼›"></a>d) äº‹åŠ¡çš„éš”ç¦»çº§åˆ«ï¼šæ ¹æ®å®é™…æƒ…å†µé€‰æ‹©ï¼›</h4><p>i. Serializableä¸²è¡ŒåŒ–ï¼šå¯é¿å…è„è¯»ã€ä¸å¯é‡å¤è¯»å’Œå¹»è¯»ï¼›</p>
<p>ii. Repeatable readå¯é‡å¤è¯»ï¼šå¯é¿å…è„è¯»ã€ä¸å¯é‡å¤è¯»ï¼›ï¼ˆMySqlé»˜è®¤å€¼ï¼‰</p>
<p>ii. Read committedè¯»å·²æäº¤ï¼šå¯é¿å…è„è¯»ï¼›</p>
<p>iv. Read uncommittedè¯»æœªæäº¤ï¼šä»»ä½•æƒ…å†µéƒ½æ— æ³•ä¿è¯ï¼›</p>
<h4 id="e-æ›´åŠ è¯¦ç»†çš„äº‹åŠ¡ä»‹ç»"><a href="#e-æ›´åŠ è¯¦ç»†çš„äº‹åŠ¡ä»‹ç»" class="headerlink" title="e) æ›´åŠ è¯¦ç»†çš„äº‹åŠ¡ä»‹ç»"></a>e) <a href="https://www.cnblogs.com/xdp-gacl/p/3984001.html" target="_blank" rel="noopener">æ›´åŠ è¯¦ç»†çš„äº‹åŠ¡ä»‹ç»</a></h4><h3 id="2ã€Spring-aopäº‹åŠ¡-æ­å»ºç¯å¢ƒ"><a href="#2ã€Spring-aopäº‹åŠ¡-æ­å»ºç¯å¢ƒ" class="headerlink" title="2ã€Spring-aopäº‹åŠ¡-æ­å»ºç¯å¢ƒ"></a>2ã€Spring-aopäº‹åŠ¡-æ­å»ºç¯å¢ƒ</h3><h4 id="a-äº‹åŠ¡åŸºæœ¬æ“ä½œï¼šæ‰“å¼€äº‹åŠ¡ã€æäº¤äº‹åŠ¡ã€å›æ»šäº‹åŠ¡ï¼›"><a href="#a-äº‹åŠ¡åŸºæœ¬æ“ä½œï¼šæ‰“å¼€äº‹åŠ¡ã€æäº¤äº‹åŠ¡ã€å›æ»šäº‹åŠ¡ï¼›" class="headerlink" title="a) äº‹åŠ¡åŸºæœ¬æ“ä½œï¼šæ‰“å¼€äº‹åŠ¡ã€æäº¤äº‹åŠ¡ã€å›æ»šäº‹åŠ¡ï¼›"></a>a) äº‹åŠ¡åŸºæœ¬æ“ä½œï¼šæ‰“å¼€äº‹åŠ¡ã€æäº¤äº‹åŠ¡ã€å›æ»šäº‹åŠ¡ï¼›</h4><h4 id="b-Springä¸­åˆ©ç”¨æ¥å£æ¥ç®¡ç†ä¸åŒæ¡†æ¶çš„äº‹åŠ¡æ“ä½œï¼›"><a href="#b-Springä¸­åˆ©ç”¨æ¥å£æ¥ç®¡ç†ä¸åŒæ¡†æ¶çš„äº‹åŠ¡æ“ä½œï¼›" class="headerlink" title="b) Springä¸­åˆ©ç”¨æ¥å£æ¥ç®¡ç†ä¸åŒæ¡†æ¶çš„äº‹åŠ¡æ“ä½œï¼›"></a>b) Springä¸­åˆ©ç”¨æ¥å£æ¥ç®¡ç†ä¸åŒæ¡†æ¶çš„äº‹åŠ¡æ“ä½œï¼›</h4><p>i.<br>é€šè¿‡å®ç°PlatformTransactionManageræ¥å£æ”¯æŒä¸åŒçš„æ¡†æ¶å®Œæˆå„è‡ªçš„äº‹åŠ¡å¤„ç†ï¼›</p>
<p>ii. ä¸ºä¸åŒå¹³å°æä¾›å¯¹åº”çš„äº‹åŠ¡ç®¡ç†å™¨çš„å®ç°ï¼š</p>
<p>JDBC&amp;Mybatisï¼šDataSourceTransactionManagerï¼›</p>
<h3 id="3ã€Spring-aopäº‹åŠ¡é€šè¿‡é…ç½®äº‹åŠ¡çš„éš”ç¦»çº§åˆ«ã€äº‹åŠ¡ä¼ æ’­è¡Œä¸ºã€æ˜¯å¦åªè¯»æ¥æ“ä½œï¼›"><a href="#3ã€Spring-aopäº‹åŠ¡é€šè¿‡é…ç½®äº‹åŠ¡çš„éš”ç¦»çº§åˆ«ã€äº‹åŠ¡ä¼ æ’­è¡Œä¸ºã€æ˜¯å¦åªè¯»æ¥æ“ä½œï¼›" class="headerlink" title="3ã€Spring-aopäº‹åŠ¡é€šè¿‡é…ç½®äº‹åŠ¡çš„éš”ç¦»çº§åˆ«ã€äº‹åŠ¡ä¼ æ’­è¡Œä¸ºã€æ˜¯å¦åªè¯»æ¥æ“ä½œï¼›"></a>3ã€Spring-aopäº‹åŠ¡é€šè¿‡é…ç½®äº‹åŠ¡çš„éš”ç¦»çº§åˆ«ã€äº‹åŠ¡ä¼ æ’­è¡Œä¸ºã€æ˜¯å¦åªè¯»æ¥æ“ä½œï¼›</h3><h4 id="i-éš”ç¦»çº§åˆ«ï¼šä¸²è¡ŒåŒ–ã€å¯é‡å¤è¯»ã€è¯»å·²æäº¤ã€è¯»æœªæäº¤ï¼›"><a href="#i-éš”ç¦»çº§åˆ«ï¼šä¸²è¡ŒåŒ–ã€å¯é‡å¤è¯»ã€è¯»å·²æäº¤ã€è¯»æœªæäº¤ï¼›" class="headerlink" title="i. éš”ç¦»çº§åˆ«ï¼šä¸²è¡ŒåŒ–ã€å¯é‡å¤è¯»ã€è¯»å·²æäº¤ã€è¯»æœªæäº¤ï¼›"></a>i. éš”ç¦»çº§åˆ«ï¼šä¸²è¡ŒåŒ–ã€å¯é‡å¤è¯»ã€è¯»å·²æäº¤ã€è¯»æœªæäº¤ï¼›</h4><h4 id="ii-æ˜¯å¦åªè¯»ï¼š"><a href="#ii-æ˜¯å¦åªè¯»ï¼š" class="headerlink" title="ii. æ˜¯å¦åªè¯»ï¼š"></a>ii. æ˜¯å¦åªè¯»ï¼š</h4><ol>
<li><p>trueï¼šä¸å¯æ”¹å˜æ•°æ®åº“ä¸­çš„æ•°æ®ï¼ŒæŸ¥è¯¢æ“ä½œæ¨èï¼Œ</p>
</li>
<li><p>falseï¼šå¯ä»¥æ”¹å˜æ•°æ®åº“æ•°æ®ï¼›</p>
</li>
</ol>
<h4 id="iii-äº‹åŠ¡ä¼ æ’­è¡Œä¸ºï¼šäº‹åŠ¡æ–¹æ³•åµŒå¥—è°ƒç”¨çš„è§„åˆ™ï¼š"><a href="#iii-äº‹åŠ¡ä¼ æ’­è¡Œä¸ºï¼šäº‹åŠ¡æ–¹æ³•åµŒå¥—è°ƒç”¨çš„è§„åˆ™ï¼š" class="headerlink" title="iii. äº‹åŠ¡ä¼ æ’­è¡Œä¸ºï¼šäº‹åŠ¡æ–¹æ³•åµŒå¥—è°ƒç”¨çš„è§„åˆ™ï¼š"></a>iii. äº‹åŠ¡ä¼ æ’­è¡Œä¸ºï¼šäº‹åŠ¡æ–¹æ³•åµŒå¥—è°ƒç”¨çš„è§„åˆ™ï¼š</h4><p> xService.x(); -&gt; yService.y();</p>
<p> 1.<br>REQUIREDï¼šå¦‚æœå½“å‰æ²¡æœ‰äº‹åŠ¡ï¼Œå°±åˆ›å»ºä¸€ä¸ªæ–°äº‹åŠ¡ï¼Œå¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡ï¼Œå°±åŠ å…¥è¯¥äº‹åŠ¡ï¼Œ<strong><em>è¯¥è®¾ç½®æ˜¯æœ€å¸¸ç”¨çš„è®¾ç½®</em></strong>ï¼›</p>
<ol start="2">
<li><p>REQUIRES_NEWï¼šåˆ›å»ºæ–°äº‹åŠ¡ï¼Œæ— è®ºå½“å‰å­˜ä¸å­˜åœ¨äº‹åŠ¡ï¼Œéƒ½åˆ›å»ºæ–°äº‹åŠ¡ï¼›</p>
<p>3.<br>SUPPORTSï¼šæ”¯æŒå½“å‰äº‹åŠ¡ï¼Œå¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡ï¼Œå°±åŠ å…¥è¯¥äº‹åŠ¡ï¼Œå¦‚æœå½“å‰ä¸å­˜åœ¨äº‹åŠ¡ï¼Œå°±ä»¥éäº‹åŠ¡æ‰§è¡Œï¼›</p>
<p>4.<br>NOT_SUPPORTEDï¼šä»¥éäº‹åŠ¡æ–¹å¼æ‰§è¡Œæ“ä½œï¼Œå¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡ï¼Œå°±æŠŠå½“å‰äº‹åŠ¡æŒ‚èµ·ï¼ˆæš‚åœï¼‰ï¼›</p>
<p>5.<br>MANDATORYï¼šæ”¯æŒå½“å‰äº‹åŠ¡ï¼Œå¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡ï¼Œå°±åŠ å…¥è¯¥äº‹åŠ¡ï¼Œå¦‚æœå½“å‰ä¸å­˜åœ¨äº‹åŠ¡ï¼Œå°±æŠ›å‡ºå¼‚å¸¸ï¼›</p>
</li>
<li><p>NEVERï¼šä»¥éäº‹åŠ¡æ–¹å¼æ‰§è¡Œï¼Œå¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡ï¼Œåˆ™æŠ›å‡ºå¼‚å¸¸ï¼›</p>
<p>7.<br>NESTEDï¼šå¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡ï¼Œåˆ™åœ¨åµŒå¥—äº‹åŠ¡å†…æ‰§è¡Œï¼ˆyå¼€å¯æ–°çš„äº‹åŠ¡ï¼‰ã€‚å¦‚æœå½“å‰æ²¡æœ‰äº‹åŠ¡ï¼Œåˆ™æ‰§è¡Œä¸REQUIREDç±»ä¼¼çš„æ“ä½œã€‚</p>
</li>
</ol>
<h3 id="4ã€Spring-aopäº‹åŠ¡-â€“-ä»éº»çƒ¦çš„äº‹åŠ¡ä»£ç ä¸­èµ°å‡ºä¹‹xmlé…ç½®ç‰ˆaopäº‹åŠ¡ï¼›"><a href="#4ã€Spring-aopäº‹åŠ¡-â€“-ä»éº»çƒ¦çš„äº‹åŠ¡ä»£ç ä¸­èµ°å‡ºä¹‹xmlé…ç½®ç‰ˆaopäº‹åŠ¡ï¼›" class="headerlink" title="4ã€Spring-aopäº‹åŠ¡-â€“ ä»éº»çƒ¦çš„äº‹åŠ¡ä»£ç ä¸­èµ°å‡ºä¹‹xmlé…ç½®ç‰ˆaopäº‹åŠ¡ï¼›"></a>4ã€Spring-aopäº‹åŠ¡-â€“ ä»éº»çƒ¦çš„äº‹åŠ¡ä»£ç ä¸­èµ°å‡ºä¹‹xmlé…ç½®ç‰ˆaopäº‹åŠ¡ï¼›</h3><h4 id="a-ä½¿ç”¨ç»å…¸çš„è½¬è´¦æ¡ˆä¾‹è¿›è¡Œæµ‹è¯•ï¼Œå‡†å¤‡æ•°æ®ï¼šbeanã€serviceã€daoï¼›"><a href="#a-ä½¿ç”¨ç»å…¸çš„è½¬è´¦æ¡ˆä¾‹è¿›è¡Œæµ‹è¯•ï¼Œå‡†å¤‡æ•°æ®ï¼šbeanã€serviceã€daoï¼›" class="headerlink" title="a) ä½¿ç”¨ç»å…¸çš„è½¬è´¦æ¡ˆä¾‹è¿›è¡Œæµ‹è¯•ï¼Œå‡†å¤‡æ•°æ®ï¼šbeanã€serviceã€daoï¼›"></a>a) ä½¿ç”¨ç»å…¸çš„è½¬è´¦æ¡ˆä¾‹è¿›è¡Œæµ‹è¯•ï¼Œå‡†å¤‡æ•°æ®ï¼šbeanã€serviceã€daoï¼›</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">transferAccounts</span><span class="params">()</span> </span>&#123; </span><br><span class="line">    <span class="comment">//è½¬è´¦        </span></span><br><span class="line">    <span class="comment">//A - 50         </span></span><br><span class="line">    accountDao.subMoney(<span class="number">1</span>, <span class="number">50</span>d);      </span><br><span class="line">    <span class="comment">//å¼‚å¸¸        </span></span><br><span class="line">    <span class="keyword">int</span> value = <span class="number">1</span> / <span class="number">0</span>;      </span><br><span class="line">    <span class="comment">//B + 50        </span></span><br><span class="line">    accountDao.addMoney(<span class="number">2</span>, <span class="number">50</span>d);   </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="b-ä½¿ç”¨äº‹åŠ¡éœ€è¦é¢å¤–å¯¼å…¥txåŒ…å’Œtxçº¦æŸï¼›"><a href="#b-ä½¿ç”¨äº‹åŠ¡éœ€è¦é¢å¤–å¯¼å…¥txåŒ…å’Œtxçº¦æŸï¼›" class="headerlink" title="b) ä½¿ç”¨äº‹åŠ¡éœ€è¦é¢å¤–å¯¼å…¥txåŒ…å’Œtxçº¦æŸï¼›"></a>b) ä½¿ç”¨äº‹åŠ¡éœ€è¦é¢å¤–å¯¼å…¥txåŒ…å’Œtxçº¦æŸï¼›</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"> <span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span>       <span class="attr">xmlns:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span>       <span class="attr">xmlns:tx</span>=<span class="string">"http://www.springframework.org/schema/tx"</span> <span class="attr">xmlns:aop</span>=<span class="string">"http://www.springframework.org/schema/aop"</span>      </span></span><br><span class="line"><span class="tag"><span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans       http://www.springframework.org/schema/beans/spring-beans.xsd        http://www.springframework.org/schema/context</span></span></span><br><span class="line"><span class="tag"><span class="string">http://www.springframework.org/schema/context/spring-context.xsd </span></span></span><br><span class="line"><span class="tag"><span class="string">http://www.springframework.org/schema/tx        </span></span></span><br><span class="line"><span class="tag"><span class="string">http://www.springframework.org/schema/tx/spring-tx.xsd  </span></span></span><br><span class="line"><span class="tag"><span class="string">http://www.springframework.org/schema/aop        </span></span></span><br><span class="line"><span class="tag"><span class="string">http://www.springframework.org/schema/aop/spring-aop.xsd"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h4 id="c-é…ç½®äº‹åŠ¡æ ¸å¿ƒç®¡ç†å™¨-DataSourceTransactionManagerï¼›"><a href="#c-é…ç½®äº‹åŠ¡æ ¸å¿ƒç®¡ç†å™¨-DataSourceTransactionManagerï¼›" class="headerlink" title="c) é…ç½®äº‹åŠ¡æ ¸å¿ƒç®¡ç†å™¨: DataSourceTransactionManagerï¼›"></a>c) é…ç½®äº‹åŠ¡æ ¸å¿ƒç®¡ç†å™¨: DataSourceTransactionManagerï¼›</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--é…ç½®äº‹åŠ¡æ ¸å¿ƒç®¡ç†å™¨ï¼Œä¸åŒå¹³å°ä¸ä¸€æ ·--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">name</span>=<span class="string">"transactionManager"</span> <span class="attr">class</span>=<span class="string">"org.springframework.jdbc.datasource.DataSourceTransactionManager"</span>&gt;</span> </span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"dataSource"</span> <span class="attr">ref</span>=<span class="string">"dataSource"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h4 id="d-é…ç½®äº‹åŠ¡é€šçŸ¥-tx-Adviceï¼›"><a href="#d-é…ç½®äº‹åŠ¡é€šçŸ¥-tx-Adviceï¼›" class="headerlink" title="d) é…ç½®äº‹åŠ¡é€šçŸ¥ tx:Adviceï¼›"></a>d) é…ç½®äº‹åŠ¡é€šçŸ¥ tx:Adviceï¼›</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--é…ç½®äº‹åŠ¡é€šçŸ¥    --&gt;</span>    </span><br><span class="line"><span class="tag">&lt;<span class="name">tx:advice</span> <span class="attr">id</span>=<span class="string">"txAdvice"</span> <span class="attr">transaction-manager</span>=<span class="string">"transactionManager"</span>&gt;</span>        </span><br><span class="line">    <span class="tag">&lt;<span class="name">tx:attributes</span>&gt;</span>                 </span><br><span class="line">        <span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">"transferAccounts"</span> <span class="attr">isolation</span>=<span class="string">"DEFAULT"</span> <span class="attr">propagation</span>=<span class="string">"REQUIRED"</span> <span class="attr">read-only</span>=<span class="string">"false"</span>/&gt;</span>           </span><br><span class="line">        <span class="comment">&lt;!--isolationéš”ç¦»çº§åˆ«ï¼Œpropagationä¼ æ’­è¡Œä¸ºï¼Œread-only="false"ä¸ºæœ‰å¯¹æ•°æ®åº“è¿›è¡Œä¿®æ”¹--&gt;</span>    </span><br><span class="line">        <span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">"save*"</span> <span class="attr">isolation</span>=<span class="string">"DEFAULT"</span> <span class="attr">propagation</span>=<span class="string">"REQUIRED"</span> <span class="attr">read-only</span>=<span class="string">"false"</span>/&gt;</span>            </span><br><span class="line">        <span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">"delete*"</span> <span class="attr">isolation</span>=<span class="string">"DEFAULT"</span> <span class="attr">propagation</span>=<span class="string">"REQUIRED"</span> <span class="attr">read-only</span>=<span class="string">"false"</span>/&gt;</span>       </span><br><span class="line">        <span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">"update*"</span> <span class="attr">isolation</span>=<span class="string">"DEFAULT"</span> <span class="attr">propagation</span>=<span class="string">"REQUIRED"</span> <span class="attr">read-only</span>=<span class="string">"false"</span>/&gt;</span>           </span><br><span class="line">        <span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">"select*"</span> <span class="attr">isolation</span>=<span class="string">"DEFAULT"</span> <span class="attr">propagation</span>=<span class="string">"REQUIRED"</span> <span class="attr">read-only</span>=<span class="string">"true"</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--æ²¡æœ‰å¯¹æ•°æ®åº“è¿›è¡Œä¿®æ”¹--&gt;</span>    </span><br><span class="line">    <span class="tag">&lt;/<span class="name">tx:attributes</span>&gt;</span>    </span><br><span class="line"><span class="tag">&lt;/<span class="name">tx:advice</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h4 id="e-é…ç½®aopï¼›"><a href="#e-é…ç½®aopï¼›" class="headerlink" title="e) é…ç½®aopï¼›"></a>e) é…ç½®aopï¼›</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--é…ç½®aop--&gt;</span><span class="tag">&lt;<span class="name">aop:config</span>&gt;</span>   </span><br><span class="line"><span class="tag">&lt;<span class="name">aop:pointcut</span> <span class="attr">id</span>=<span class="string">"txPc"</span> <span class="attr">expression</span>=<span class="string">"execution(* com.zephxu.service.*ServiceImpl.*(.. ))"</span>/&gt;</span>   </span><br><span class="line"><span class="comment">&lt;!--åˆ‡å…¥ç‚¹--&gt;</span>    </span><br><span class="line"><span class="tag">&lt;<span class="name">aop:advisor</span> <span class="attr">advice-ref</span>=<span class="string">"txAdvice"</span> <span class="attr">pointcut-ref</span>=<span class="string">"txPc"</span>/&gt;</span>  </span><br><span class="line"><span class="comment">&lt;!--é€šçŸ¥-- &gt;</span></span><br><span class="line"><span class="comment">&lt;/aop:config&gt;</span></span><br></pre></td></tr></table></figure>



<p><strong>å‡ºç°å¼‚å¸¸<code>int value = 1 / 0;</code>æ—¶å› ä¸ºåŠ å…¥äº‹åŠ¡ç®¡ç†ï¼Œè‡ªåŠ¨äº‹åŠ¡å›æ»šã€‚</strong></p>
<p><img src="https://github.com/ZephXu07/IMG/raw/master/exist.png" alt="å­˜åœ¨äº‹åŠ¡ç®¡ç†"></p>
<p><strong><em>è‹¥æ²¡æœ‰äº‹åŠ¡ç®¡ç†ï¼Œåˆ™å‰è€…è½¬å‡ºæˆåŠŸï¼Œä½†åè€…å¹¶æ²¡æœ‰æ”¶åˆ°ã€‚</em></strong></p>
<p><img src="https://github.com/ZephXu07/IMG/raw/master/Simple.png" alt="ä¸å­˜åœ¨äº‹åŠ¡ç®¡ç†"></p>
<h4 id="f-BUGï¼š"><a href="#f-BUGï¼š" class="headerlink" title="f) BUGï¼š"></a>f) BUGï¼š</h4><p>Caused by: org.springframework.beans.factory.BeanCreationException:<br>Error creating bean with name â€˜dataSourceâ€™ defined in class path<br>resource [applicationContext.xml]: Initialization of bean failed; nested<br>exception is java.lang.IllegalArgumentException: Pointcut is not<br>well-formed: expecting â€˜name patternâ€™ at character position 45<br><strong><em>execution(*com.zephxu.service.*ServiceImpl.\</em>(.. ))*</strong></p>
<p><strong><em>åŸå› ï¼š</em></strong></p>
<p><code>&lt;aop:pointcut id=&quot;txPc&quot; expression=&quot;execution(* com.zephxu.service.*ServiceImpl.*(..))&quot;/&gt;</code></p>
<p><strong>åœ¨ * ä¸comä¹‹é—´éœ€è¦ç©ºæ ¼ï¼</strong></p>
<h3 id="5ã€Spring-aopäº‹åŠ¡-â€“-ä»éº»çƒ¦çš„äº‹åŠ¡ä»£ç ä¸­èµ°å‡ºä¹‹æ³¨è§£ç‰ˆaopäº‹åŠ¡ã€‚"><a href="#5ã€Spring-aopäº‹åŠ¡-â€“-ä»éº»çƒ¦çš„äº‹åŠ¡ä»£ç ä¸­èµ°å‡ºä¹‹æ³¨è§£ç‰ˆaopäº‹åŠ¡ã€‚" class="headerlink" title="5ã€Spring-aopäº‹åŠ¡ â€“ ä»éº»çƒ¦çš„äº‹åŠ¡ä»£ç ä¸­èµ°å‡ºä¹‹æ³¨è§£ç‰ˆaopäº‹åŠ¡ã€‚"></a>5ã€Spring-aopäº‹åŠ¡ â€“ ä»éº»çƒ¦çš„äº‹åŠ¡ä»£ç ä¸­èµ°å‡ºä¹‹æ³¨è§£ç‰ˆaopäº‹åŠ¡ã€‚</h3><p><strong>é…ç½®äº‹åŠ¡é€šçŸ¥ tx:Advice</strong>ä¸<strong>é…ç½®aop</strong>æ›´æ”¹ä¸ºï¼š</p>
<p><code>&lt;!--å¼€å¯æ³¨è§£äº‹åŠ¡--&gt;&lt;tx:annotation-driven/&gt;</code></p>
<p><code>@Transactional(isolation = Isolation.DEFAULT, propagation = Propagation.REQUIRED, readOnly = false)</code></p>
<p><strong>æ³¨è§£åœ¨æ–¹æ³•ä¸Šå°±æ­¤æ–¹æ³•å¼€å¯äº‹åŠ¡ï¼Œä¹Ÿå¯ä»¥å°†æ³¨è§£æ”¾åœ¨æ­¤ç±»ä¸Šï¼Œåˆ™æ­¤ç±»æ‰€æœ‰æ–¹æ³•éƒ½å¼€å¯äº‹åŠ¡ï¼Œè‹¥æŸæ–¹æ³•æœ‰ç‰¹åˆ«çš„äº‹åŠ¡é…ç½®ä»…éœ€åœ¨é‚£æ–¹æ³•ä¸Šè®¾ç½®æ–°çš„æ³¨è§£ã€‚</strong></p>
<p><strong>BUGï¼š</strong></p>
<p><strong>Error creating bean with name â€˜dataSourceâ€™ defined in class path<br>resource [applicationContext2.xml]: Initialization of bean failed;<br>nested exception is java.lang.NoSuchMethodError:<br>org.springframework.core.annotation.AnnotationUtils.isCandidateClass(Ljava/lang/Class;Ljava/lang/Class;)Z</strong></p>
<p><strong>åŸå› ï¼šå¯¼åŒ…ç¼ºå°‘ï¼Œä»”ç»†ä¸è§†é¢‘ä¸­å¯¹æ¯”ï¼Œå‘ç°å°‘äº†spring-aspectsï¼Œcom.springsource.org.aspectj.weaverï¼Œcom.springsource.org.aopallianceä¸‰ä¸ªjaråŒ…ï¼Œä¸”<a href="https://mvnrepository.com/artifact/org.springframework/spring-core" target="_blank" rel="noopener">Spring<br>Core</a>éœ€è¦æœ€æ–°ï¼</strong></p>
<p><strong>å¼ºçƒˆå»ºè®®ï¼šSpringç‰ˆæœ¬é€šè¿‡mavenç‰ˆæœ¬é”å®šï¼Œ<a href="https://blog.csdn.net/qq_37393900/article/details/80240015" target="_blank" rel="noopener">ç›¸å…³é“¾æ¥</a></strong></p>
<p><img src="https://github.com/ZephXu07/IMG/raw/master/SpringVersion.png" alt="ç‰ˆæœ¬é”å®š"></p>
<p><img src="https://github.com/ZephXu07/IMG/raw/master/FollowSpringVersion.png" alt="è·Ÿéšç‰ˆæœ¬"></p>
<h2 id="part8ã€Springæ•´åˆMybatisåŠ å…¥äº‹åŠ¡æ“ä½œæ•°æ®åº“"><a href="#part8ã€Springæ•´åˆMybatisåŠ å…¥äº‹åŠ¡æ“ä½œæ•°æ®åº“" class="headerlink" title="part8ã€Springæ•´åˆMybatisåŠ å…¥äº‹åŠ¡æ“ä½œæ•°æ®åº“ "></a>part8ã€Springæ•´åˆMybatisåŠ å…¥äº‹åŠ¡æ“ä½œæ•°æ®åº“ </h2><h3 id="1ã€-æ•´åˆMybatis"><a href="#1ã€-æ•´åˆMybatis" class="headerlink" title="1ã€ æ•´åˆMybatis"></a>1ã€ æ•´åˆMybatis</h3><h4 id="a-å¯¼åŒ…ï¼š-1"><a href="#a-å¯¼åŒ…ï¼š-1" class="headerlink" title="a) å¯¼åŒ…ï¼š"></a>a) å¯¼åŒ…ï¼š</h4><p>i. Springï¼šåŸºæœ¬åŒ…ã€aopã€aspectsã€jdbcã€txã€testï¼›</p>
<p>ii. Mybatisï¼šmybatis</p>
<p>iii. æ•´åˆåŒ…ï¼šmybatis-spring</p>
<p>iv. ä¸‰æ–¹åŒ…ï¼š</p>
<ol>
<li><p>aopalliance</p>
</li>
<li><p>aspectj.weaver</p>
</li>
<li><p>c3p0</p>
</li>
<li><p>mchange-commons-java</p>
</li>
<li><p>mysql-connector-java</p>
</li>
</ol>
<h4 id="b-åˆ›å»ºé¡¹ç›®ç»“æ„-package-ï¼šbeanã€serviceã€mapperã€testï¼›"><a href="#b-åˆ›å»ºé¡¹ç›®ç»“æ„-package-ï¼šbeanã€serviceã€mapperã€testï¼›" class="headerlink" title="b) åˆ›å»ºé¡¹ç›®ç»“æ„(package)ï¼šbeanã€serviceã€mapperã€testï¼›"></a>b) åˆ›å»ºé¡¹ç›®ç»“æ„(package)ï¼šbeanã€serviceã€mapperã€testï¼›</h4><p><img src="https://github.com/ZephXu07/IMG/raw/master/ssm_spring_mybatis_txProjectStructure.png" alt="é¡¹ç›®ç»“æ„"></p>
<h4 id="c-åˆ›å»ºé…ç½®æ–‡ä»¶ï¼šsqlMapperConfigã€applicaitonContext"><a href="#c-åˆ›å»ºé…ç½®æ–‡ä»¶ï¼šsqlMapperConfigã€applicaitonContext" class="headerlink" title="c) åˆ›å»ºé…ç½®æ–‡ä»¶ï¼šsqlMapperConfigã€applicaitonContext"></a>c) åˆ›å»ºé…ç½®æ–‡ä»¶ï¼šsqlMapperConfigã€applicaitonContext</h4><p>sqlMapperConfigï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">configuration</span> <span class="meta-keyword">PUBLIC</span><span class="meta-string">"-//mybatis.org//DTD Config 3.0//EN"</span> <span class="meta-string">"http://mybatis.org/dtd/mybatis-3-config.dtd"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span>        </span><br><span class="line"><span class="tag">&lt;<span class="name">typeAliases</span>&gt;</span>             </span><br><span class="line">	<span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">"com.zephxu.bean"</span>/&gt;</span>     </span><br><span class="line"><span class="tag">&lt;/<span class="name">typeAliases</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>



<p>applicaitonContextï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span>    </span></span><br><span class="line"><span class="tag"><span class="attr">xmlns:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span>       <span class="attr">xmlns:tx</span>=<span class="string">"http://www.springframework.org/schema/tx"</span> <span class="attr">xmlns:aop</span>=<span class="string">"http://www.springframework.org/schema/aop"</span> <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans       http://www.springframework.org/schema/beans/spring-beans.xsd        http://www.springframework.org/schema/contexthttp://www.springframework.org/schema/context/spring-context.xsd http://www.springframework.org/schema/tx        http://www.springframework.org/schema/tx/spring-tx.xsd http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd"</span>&gt;</span> </span><br><span class="line"><span class="comment">&lt;!--æ•°æ®æº--&gt;</span>    </span><br><span class="line"><span class="tag">&lt;<span class="name">context:property-placeholder</span> <span class="attr">location</span>=<span class="string">"db.properties"</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!--è¯»å–é…ç½®æ–‡ä»¶--&gt;</span>   </span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">name</span>=<span class="string">"dataSource"</span> <span class="attr">class</span>=<span class="string">"com.mchange.v2.c3p0.ComboPooledDataSource"</span>&gt;</span><span class="comment">&lt;!--é…ç½®DataSource--&gt;</span>        </span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"driverClass"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.driverClass&#125;"</span>/&gt;</span>       </span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"jdbcUrl"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.jdbcUrl&#125;"</span>/&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"user"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.user&#125;"</span>/&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.password&#125;"</span>/&gt;</span>   </span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span>    </span><br><span class="line"><span class="comment">&lt;!--mybatis--&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">name</span>=<span class="string">"sqlSessionFactory"</span> <span class="attr">class</span>=<span class="string">"org.mybatis.spring.SqlSessionFactoryBean"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"dataSource"</span> <span class="attr">ref</span>=<span class="string">"dataSource"</span>/&gt;</span>        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"configLocation"</span> <span class="attr">value</span>=<span class="string">"classpath:sqlMapConfig.xml"</span>/&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span>    </span><br><span class="line"><span class="comment">&lt;!--mapperå·¥å‚--&gt;</span>   </span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"org.mybatis.spring.mapper.MapperScannerConfigurer"</span>&gt;</span>        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"basePackage"</span> <span class="attr">value</span>=<span class="string">"com.zephxu.mapper"</span>/&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span>   </span><br><span class="line"><span class="comment">&lt;!--service--&gt;</span>   </span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">name</span>=<span class="string">"accountService"</span> <span class="attr">class</span>=<span class="string">"com.zephxu.service.AccountServiceImpl"</span>/&gt;</span><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h3 id="2ã€-åˆ›å»ºæµ‹è¯•ç”¨ä¾‹ï¼šä½¿ç”¨Mapperæ‰«æå¼€å‘ï¼Œè½¬è´¦ï¼›"><a href="#2ã€-åˆ›å»ºæµ‹è¯•ç”¨ä¾‹ï¼šä½¿ç”¨Mapperæ‰«æå¼€å‘ï¼Œè½¬è´¦ï¼›" class="headerlink" title="2ã€ åˆ›å»ºæµ‹è¯•ç”¨ä¾‹ï¼šä½¿ç”¨Mapperæ‰«æå¼€å‘ï¼Œè½¬è´¦ï¼›"></a>2ã€ åˆ›å»ºæµ‹è¯•ç”¨ä¾‹ï¼šä½¿ç”¨Mapperæ‰«æå¼€å‘ï¼Œè½¬è´¦ï¼›</h3><p>AccountMapper.xmlï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">   <span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line">   <span class="meta">&lt;!DOCTYPE <span class="meta-keyword">mapper</span>        <span class="meta-keyword">PUBLIC</span><span class="meta-string">"-//mybatis.org//DTD Mapper 3.0//EN"</span>        <span class="meta-string">"http://mybatis.org/dtd/mybatis-3-mapper.dtd"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">"com.zephxu.mapper.AccountMapper"</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">"transferOutMoney"</span> <span class="attr">parameterType</span>=<span class="string">"Account"</span>&gt;</span>        update account set money = money - #&#123;transferMoney&#125; where id = #&#123;id&#125;   </span><br><span class="line">   <span class="tag">&lt;/<span class="name">update</span>&gt;</span>    </span><br><span class="line">   <span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">"transferInMoney"</span> <span class="attr">parameterType</span>=<span class="string">"Account"</span>&gt;</span> </span><br><span class="line">   updat e account set money = money + #&#123;transferMoney&#125; where id = #&#123;id&#125;    	</span><br><span class="line">   <span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h3 id="3ã€-åœ¨serviceä¸­åŠ å…¥äº‹åŠ¡ï¼šåˆ©ç”¨Spring-aopäº‹åŠ¡è§£å†³è½¬è´¦å¼‚å¸¸é—®é¢˜ï¼›"><a href="#3ã€-åœ¨serviceä¸­åŠ å…¥äº‹åŠ¡ï¼šåˆ©ç”¨Spring-aopäº‹åŠ¡è§£å†³è½¬è´¦å¼‚å¸¸é—®é¢˜ï¼›" class="headerlink" title="3ã€ åœ¨serviceä¸­åŠ å…¥äº‹åŠ¡ï¼šåˆ©ç”¨Spring-aopäº‹åŠ¡è§£å†³è½¬è´¦å¼‚å¸¸é—®é¢˜ï¼›"></a>3ã€ åœ¨serviceä¸­åŠ å…¥äº‹åŠ¡ï¼šåˆ©ç”¨Spring-aopäº‹åŠ¡è§£å†³è½¬è´¦å¼‚å¸¸é—®é¢˜ï¼›</h3><p>xmlï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--äº‹åŠ¡æ ¸å¿ƒç®¡ç†å™¨--&gt;</span>    </span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">name</span>=<span class="string">"transactionManager"</span> <span class="attr">class</span>=<span class="string">"org.springframework.jdbc.datasource.DataSourceTransactionManager"</span>&gt;</span>        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"dataSource"</span> <span class="attr">ref</span>=<span class="string">"dataSource"</span>/&gt;</span>   </span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    äº‹åŠ¡é€šçŸ¥--&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">tx:advice</span> <span class="attr">id</span>=<span class="string">"txAdvice"</span> <span class="attr">transaction-manager</span>=<span class="string">"transactionManager"</span>&gt;</span>        <span class="tag">&lt;<span class="name">tx:attributes</span>&gt;</span>            </span><br><span class="line"><span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">"update*"</span> <span class="attr">isolation</span>=<span class="string">"DEFAULT"</span> <span class="attr">propagation</span>=<span class="string">"REQUIRED"</span> <span class="attr">read-only</span>=<span class="string">"false"</span>/&gt;</span>        </span><br><span class="line"><span class="tag">&lt;/<span class="name">tx:attributes</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">tx:advice</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    aop--&gt;</span>   </span><br><span class="line"><span class="tag">&lt;<span class="name">aop:config</span>&gt;</span>        </span><br><span class="line"><span class="tag">&lt;<span class="name">aop:pointcut</span> <span class="attr">id</span>=<span class="string">"txPc"</span> <span class="attr">expression</span>=<span class="string">"execution(* com.zephxu.service.*ServiceImpl.*(..))"</span>/&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">aop:advisor</span> <span class="attr">advice-ref</span>=<span class="string">"txAdvice"</span> <span class="attr">pointcut-ref</span>=<span class="string">"txPc"</span>/&gt;</span>  </span><br><span class="line"><span class="tag">&lt;/<span class="name">aop:config</span>&gt;</span></span><br></pre></td></tr></table></figure>



<p>æ³¨è§£ï¼š<a href="#aop">å¦‚ä¸Š</a></p>
<p><strong>BUGï¼šInvalid bound statement (not found):<br>com.zephxu.mapper.AccountMapper.transferOutMoney</strong></p>
<p><strong>åŸå› ï¼šmavené¡¹ç›®ï¼Œxmlæ–‡ä»¶ä¸åœ¨resourceç›®å½•ä¸‹ï¼Œè€Œåœ¨javaç›®å½•ä¸‹ï¼Œéœ€è¦åœ¨pom.xmlä¸­åŠ ä¸Š</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span>   </span><br><span class="line"><span class="tag">&lt;<span class="name">resources</span>&gt;</span>        </span><br><span class="line">	<span class="tag">&lt;<span class="name">resource</span>&gt;</span>   </span><br><span class="line">		<span class="tag">&lt;<span class="name">directory</span>&gt;</span>src/main/java<span class="tag">&lt;/<span class="name">directory</span>&gt;</span> </span><br><span class="line">      <span class="tag">&lt;<span class="name">includes</span>&gt;</span> </span><br><span class="line">      	<span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.xml<span class="tag">&lt;/<span class="name">include</span>&gt;</span>   </span><br><span class="line">      <span class="tag">&lt;/<span class="name">includes</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">resource</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">resources</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></table></figure>



<p><a href="https://blog.csdn.net/ccoran/article/details/85044096" target="_blank" rel="noopener">è§£å†³æ–¹æ³•æ¥æº</a></p>
<h2 id="part9ã€æœªå®Œå¾…ç»­â€¦â€¦"><a href="#part9ã€æœªå®Œå¾…ç»­â€¦â€¦" class="headerlink" title="part9ã€æœªå®Œå¾…ç»­â€¦â€¦ "></a>part9ã€æœªå®Œå¾…ç»­â€¦â€¦ </h2>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/01/23/Spring-Learning-Notes/" data-id="ck5qwpk41000qxsj22lugfwmx" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/java/" rel="tag">java</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/spring/" rel="tag">spring</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ssm/" rel="tag">ssm</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E7%AC%94%E8%AE%B0/" rel="tag">ç¬”è®°</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
  
    <a href="/2020/01/23/ssm%E6%A1%86%E6%9E%B6%E7%AE%80%E4%BB%8B/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">ssmæ¡†æ¶ç®€ä»‹</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/java/" rel="tag">java</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/maven/" rel="tag">maven</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mybatis/" rel="tag">mybatis</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/spring/" rel="tag">spring</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ssm/" rel="tag">ssm</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%AC%94%E8%AE%B0/" rel="tag">ç¬”è®°</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/java/" style="font-size: 15px;">java</a> <a href="/tags/maven/" style="font-size: 10px;">maven</a> <a href="/tags/mybatis/" style="font-size: 10px;">mybatis</a> <a href="/tags/spring/" style="font-size: 10px;">spring</a> <a href="/tags/ssm/" style="font-size: 15px;">ssm</a> <a href="/tags/%E7%AC%94%E8%AE%B0/" style="font-size: 20px;">ç¬”è®°</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">January 2020</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2020/01/23/Spring-Learning-Notes/">Spring-Learning-Notes</a>
          </li>
        
          <li>
            <a href="/2020/01/23/ssm%E6%A1%86%E6%9E%B6%E7%AE%80%E4%BB%8B/">ssmæ¡†æ¶ç®€ä»‹</a>
          </li>
        
          <li>
            <a href="/2020/01/23/maven%E7%AC%94%E8%AE%B0/">mavenç¬”è®°</a>
          </li>
        
          <li>
            <a href="/2020/01/23/Hugo%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2/">Hugoä»é›¶æ­å»ºåšå®¢</a>
          </li>
        
          <li>
            <a href="/2020/01/23/Hexo%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2/">Hexoä»é›¶æ­å»ºåšå®¢</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2020 John Doe<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/script.js"></script>




  </div>
</body>
</html>