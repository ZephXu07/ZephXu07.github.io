<!DOCTYPE html>
<html lang="zh-cn">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">
  <link rel="stylesheet" href="/lib/pace/pace-theme-center-radar.min.css">
  <script src="/lib/pace/pace.min.js"></script>


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    hostname: new URL('https://zephxu07.github.io').hostname,
    root: '/',
    scheme: 'Gemini',
    version: '7.7.0',
    exturl: false,
    sidebar: {"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},
    copycode: {"enable":false,"show_result":false,"style":null},
    back2top: {"enable":true,"sidebar":false,"scrollpercent":false},
    bookmark: {"enable":false,"color":"#222","save":"auto"},
    fancybox: false,
    mediumzoom: false,
    lazyload: false,
    pangu: false,
    comments: {"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},
    algolia: {
      appID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},
    path: 'search.xml',
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}
  };
</script>

  <meta name="description" content="SpringMVC Learning NotesSpringMVC 个人学习笔记（学习视频，学习资料（提取码3b45）） （过于正式标准全部是学习资料自带的……） part1、三层架构和MVC一、三层架构1、开发服务器端程序，一般都基于两种形式，一种C&#x2F;S架构程序，一种B&#x2F;S架构程序； 2、使用Java语言基本上都是开发B&#x2F;S架构的程序，B&#x2F;S架构又分成了三层架构 3、三层架构 a)表现层：WEB">
<meta property="og:type" content="article">
<meta property="og:title" content="SpringMVC-Learning-Notes">
<meta property="og:url" content="https://zephxu07.github.io/2020/01/27/SpringMVC-Learning-Notes/index.html">
<meta property="og:site_name" content="zephxu">
<meta property="og:description" content="SpringMVC Learning NotesSpringMVC 个人学习笔记（学习视频，学习资料（提取码3b45）） （过于正式标准全部是学习资料自带的……） part1、三层架构和MVC一、三层架构1、开发服务器端程序，一般都基于两种形式，一种C&#x2F;S架构程序，一种B&#x2F;S架构程序； 2、使用Java语言基本上都是开发B&#x2F;S架构的程序，B&#x2F;S架构又分成了三层架构 3、三层架构 a)表现层：WEB">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://github.com/ZephXu07/IMG/raw/master/Structure.bmp">
<meta property="og:image" content="https://github.com/ZephXu07/IMG/raw/master/DetailedStructure.png">
<meta property="og:image" content="https://github.com/ZephXu07/IMG/raw/master/FlowDiagram%20.png">
<meta property="og:image" content="https://github.com/ZephXu07/IMG/raw/master/ProcessOfIntroductoryCase.png">
<meta property="og:image" content="https://github.com/ZephXu07/IMG/raw/master/DetailedFlow0.png">
<meta property="og:image" content="https://github.com/ZephXu07/IMG/raw/master/DetailedFlow.png">
<meta property="og:image" content="https://github.com/ZephXu07/IMG/raw/master/RequestMappingScope.png">
<meta property="og:image" content="https://github.com/ZephXu07/IMG/raw/master/DetailedResult.png">
<meta property="og:image" content="https://github.com/ZephXu07/IMG/raw/master/HeadAction.png">
<meta property="og:image" content="https://github.com/ZephXu07/IMG/raw/master/HeadResult.png">
<meta property="og:image" content="https://github.com/ZephXu07/IMG/raw/master/Test.png">
<meta property="og:image" content="https://github.com/ZephXu07/IMG/raw/master/NormalResult.png">
<meta property="og:image" content="https://github.com/ZephXu07/IMG/raw/master/ThrowTest.png">
<meta property="og:image" content="https://github.com/ZephXu07/IMG/raw/master/ResultThrow.png">
<meta property="og:image" content="https://github.com/ZephXu07/IMG/raw/master/TrueRequestBodyTestPost.png">
<meta property="og:image" content="https://github.com/ZephXu07/IMG/raw/master/TrueRequestBodyTestGet.png">
<meta property="og:image" content="https://github.com/ZephXu07/IMG/raw/master/FalseRequestBody.png">
<meta property="og:image" content="https://github.com/ZephXu07/IMG/raw/master/attention.png">
<meta property="og:image" content="https://github.com/ZephXu07/IMG/raw/master/RestfulCharacter.png">
<meta property="og:image" content="https://github.com/ZephXu07/IMG/raw/master/01-restful%E7%BC%96%E7%A8%8B%E9%A3%8E%E6%A0%BC.png">
<meta property="og:image" content="https://github.com/ZephXu07/IMG/raw/master/PathVariableResul.png">
<meta property="og:image" content="https://github.com/ZephXu07/IMG/raw/master/ResourceCode.png">
<meta property="og:image" content="https://github.com/ZephXu07/IMG/raw/master/RunResult.png">
<meta property="og:image" content="https://github.com/ZephXu07/IMG/raw/master/RequestHeaderResult.png">
<meta property="og:image" content="https://github.com/ZephXu07/IMG/raw/master/attentionModelAttribute.png">
<meta property="og:image" content="https://github.com/ZephXu07/IMG/raw/master/SessionAttributeResult.png">
<meta property="og:image" content="https://github.com/ZephXu07/IMG/raw/master/ResponseWays.png">
<meta property="og:image" content="https://github.com/ZephXu07/IMG/raw/master/Pages.png">
<meta property="og:image" content="https://github.com/ZephXu07/IMG/raw/master/SuccessResult.png">
<meta property="og:image" content="https://github.com/ZephXu07/IMG/raw/master/JsonResult1.png">
<meta property="og:image" content="https://github.com/ZephXu07/IMG/raw/master/JsonResult2.png">
<meta property="og:image" content="https://github.com/ZephXu07/IMG/raw/master/JsonResult3.png">
<meta property="og:image" content="https://github.com/ZephXu07/IMG/raw/master/SpringMVCUpload.png">
<meta property="og:image" content="https://github.com/ZephXu07/IMG/raw/master/FileUploadsAcrossServers.png">
<meta property="og:image" content="https://github.com/ZephXu07/IMG/raw/master/PurposeOfSub-server.png">
<meta property="og:image" content="https://github.com/ZephXu07/IMG/raw/master/FileServerStructure.png">
<meta property="og:image" content="https://github.com/ZephXu07/IMG/raw/master/AddTheConfiguration.png">
<meta property="og:image" content="https://github.com/ZephXu07/IMG/raw/master/SpringMVCExceptionHandler.png">
<meta property="og:image" content="https://github.com/ZephXu07/IMG/raw/master/DontHandleException.png">
<meta property="og:image" content="https://github.com/ZephXu07/IMG/raw/master/HandleExceptionResult.png">
<meta property="og:image" content="https://github.com/ZephXu07/IMG/raw/master/Interceptor.png">
<meta property="og:image" content="https://github.com/ZephXu07/IMG/raw/master/InterceptorResult.png">
<meta property="og:image" content="https://github.com/ZephXu07/IMG/raw/master/InterceptorExecutionProcess.png">
<meta property="og:image" content="https://github.com/ZephXu07/IMG/raw/master/TwoInterceptors.png">
<meta property="article:published_time" content="2020-01-27T03:31:42.985Z">
<meta property="article:modified_time" content="2020-07-21T08:52:15.111Z">
<meta property="article:author" content="zephxu">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://github.com/ZephXu07/IMG/raw/master/Structure.bmp">

<link rel="canonical" href="https://zephxu07.github.io/2020/01/27/SpringMVC-Learning-Notes/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: false,
    isPost: true
  };
</script>

  <title>SpringMVC-Learning-Notes | zephxu</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>
	<a href="https://github.com/ZephXu07" target="_blank" rel="noopener" class="github-corner" aria-label="View source on GitHub"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#151513; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">zephxu</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
  </div>

  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>标签</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>归档</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>

</nav>
  <div class="site-search">
    <div class="popup search-popup">
    <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocorrect="off" autocapitalize="none"
           placeholder="搜索..." spellcheck="false"
           type="text" id="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result"></div>

</div>
<div class="search-pop-overlay"></div>

  </div>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content">
            

  <div class="posts-expand">
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block " lang="zh-cn">
    <link itemprop="mainEntityOfPage" href="https://zephxu07.github.io/2020/01/27/SpringMVC-Learning-Notes/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="zephxu">
      <meta itemprop="description" content="纯小白，知足常乐">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="zephxu">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          SpringMVC-Learning-Notes
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-01-27 11:31:42" itemprop="dateCreated datePublished" datetime="2020-01-27T11:31:42+08:00">2020-01-27</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-07-21 16:52:15" itemprop="dateModified" datetime="2020-07-21T16:52:15+08:00">2020-07-21</time>
              </span>

          
            <span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv" style="display: none;">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span id="busuanzi_value_page_pv"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2020/01/27/SpringMVC-Learning-Notes/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2020/01/27/SpringMVC-Learning-Notes/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h1 id="SpringMVC-Learning-Notes"><a href="#SpringMVC-Learning-Notes" class="headerlink" title="SpringMVC Learning Notes"></a>SpringMVC Learning Notes</h1><h1 id="SpringMVC-个人学习笔记"><a href="#SpringMVC-个人学习笔记" class="headerlink" title="SpringMVC 个人学习笔记"></a>SpringMVC 个人学习笔记</h1><p>（<a href="https://www.bilibili.com/video/av47953244" target="_blank" rel="noopener">学习视频</a>，<a href="https://pan.baidu.com/s/1Tn7T5c0wzvv5apYl5G0mdQ" target="_blank" rel="noopener">学习资料（提取码3b45）</a>）</p>
<p>（过于正式标准全部是学习资料自带的……）</p>
<h2 id="part1、三层架构和MVC"><a href="#part1、三层架构和MVC" class="headerlink" title="part1、三层架构和MVC"></a>part1、三层架构和MVC</h2><h3 id="一、三层架构"><a href="#一、三层架构" class="headerlink" title="一、三层架构"></a>一、三层架构</h3><p>1、开发服务器端程序，一般都基于两种形式，一种C/S架构程序，一种B/S架构程序；</p>
<p>2、使用Java语言基本上都是开发B/S架构的程序，B/S架构又分成了三层架构</p>
<p>3、三层架构</p>
<p>a)<br>表现层：WEB层，用来和客户端进行数据交互的。表现层一般会采用MVC的设计模型；</p>
<p>b) 业务层：处理公司具体的业务逻辑的 ；</p>
<p>c) 持久层：用来操作数据库的。</p>
<h3 id="二、MVC模型"><a href="#二、MVC模型" class="headerlink" title="二、MVC模型"></a>二、MVC模型</h3><p>1、MVC全名是Model View Controller 模型视图控制器，每个部分各司其职；</p>
<p>2、Model：数据模型，JavaBean的类，用来进行数据封装；</p>
<p>3、View：指JSP、HTML用来展示数据给用户 ；</p>
<p>4、Controller：用来接收用户的请求，整个流程的控制器。用来进行数据校验等。</p>
<p><img src="https://github.com/ZephXu07/IMG/raw/master/Structure.bmp" alt="Structure"></p>
<h2 id="part2、SpringMVC的入门案例"><a href="#part2、SpringMVC的入门案例" class="headerlink" title="part2、SpringMVC的入门案例"></a>part2、SpringMVC的入门案例</h2><h3 id="一、SpringMVC的概述"><a href="#一、SpringMVC的概述" class="headerlink" title="一、SpringMVC的概述"></a>一、SpringMVC的概述</h3><h4 id="1、SpringMVC的概述"><a href="#1、SpringMVC的概述" class="headerlink" title="1、SpringMVC的概述"></a>1、SpringMVC的概述</h4><p>a) 一种基于Java实现的MVC设计模型的请求驱动类型的轻量级WEB框架；</p>
<p>b) MVC属于SpringFrameWork的后续产品，已经融合在Spring Web Flow里面，Spring 框架提供 了构建 Web 应用程序的全功能 MVC 模块；</p>
<p>c) 使用 Spring 可插入的 MVC架构，从而在使用Spring进行WEB开发时，可以选择使用Spring的SpringMVC框架或集成其他MVC开发框架。</p>
<h4 id="2、SpringMVC在三层架构中的位置：表现层框架"><a href="#2、SpringMVC在三层架构中的位置：表现层框架" class="headerlink" title="2、SpringMVC在三层架构中的位置：表现层框架"></a>2、SpringMVC在三层架构中的位置：表现层框架</h4><p><img src="https://github.com/ZephXu07/IMG/raw/master/DetailedStructure.png" alt="详细结构"></p>
<h4 id="3、SpringMVC的优势"><a href="#3、SpringMVC的优势" class="headerlink" title="3、SpringMVC的优势"></a>3、SpringMVC的优势</h4><p>1、清晰的角色划分（流水线）：</p>
<p>前端控制器（DispatcherServlet）</p>
<p>请求到处理器映射（HandlerMapping）</p>
<p>处理器适配器（HandlerAdapter）</p>
<p>视图解析器（ViewResolver）</p>
<p>处理器或页面控制器（Controller）</p>
<p>验证器（ Validator）</p>
<p>命令对象（Command 请求参数绑定到的对象就叫命令对象）</p>
<p>表单对象（Form Object 提供给表单展示和提交到的对象就叫表单对象）</p>
<p>2、分工明确，而且扩展点相当灵活，可以很容易扩展，虽然几乎不需要。</p>
<p>3、由于命令对象就是一个 POJO，无需继承框架特定API，可以使用命令对象直接作为业务对象。</p>
<p>4、和 Spring 其他框架无缝集成，是其它 Web 框架所不具备的。</p>
<p>5、可适配，通过 HandlerAdapter 可以支持任意的类作为处理器。</p>
<p>6、可定制性，HandlerMapping、ViewResolver 等能够非常简单的定制。</p>
<p>7、功能强大的数据验证、格式化、绑定机制。</p>
<p>8、利用 Spring 提供的 Mock 对象能够非常简单的进行 Web 层单元测试。</p>
<p>9、本地化、主题的解析的支持，使我们更容易进行国际化和主题的切换。</p>
<p>10、强大的 JSP 标签库，使 JSP 编写更容易。</p>
<p>还有比如RESTful风格的支持、简单的文件上传、约定大于配置的契约式编程支持、基于注解的零配置支持等等。</p>
<h4 id="4、SpringMVC和Stru2的对比"><a href="#4、SpringMVC和Stru2的对比" class="headerlink" title="4、SpringMVC和Stru2的对比"></a>4、SpringMVC和Stru2的对比</h4><h5 id="共同点："><a href="#共同点：" class="headerlink" title="共同点："></a>共同点：</h5><p>它们都是表现层框架，都是基于 MVC 模型编写的。 它们的底层都离不开原始ServletAPI。 它们处理请求的机制都是一个核心控制器。</p>
<h5 id="区别："><a href="#区别：" class="headerlink" title="区别："></a>区别：</h5><p>Spring MVC 的入口是 Servlet, 而 Struts2 是 Filter 。Spring MVC是基于方法设计的，而 Struts2 是基于类，Struts2每次执行都会创建一个动作类。所以Spring MVC 会稍微比 Struts2 快些。<br>Spring MVC 使用更加简洁,同时还支持 JSR303, 处理 ajax 的请求更方便。(JSR303 是一套 JavaBean参数校验的标准，它定义了很多常用的校验注解，我们可以直接将这些注解加在我们JavaBean 的属性上面，就可以在需要校验的时候进行校验了。) </p>
<p>Struts2 的 OGNL表达式使页面的开发效率相比 Spring MVC 更高些，但执行效率并没有比 JSTL提升，尤其是 struts2 的表单标签，远没有 html 执行效率高。</p>
<h3 id="二、SpringMVC的入门程序"><a href="#二、SpringMVC的入门程序" class="headerlink" title="二、SpringMVC的入门程序"></a>二、SpringMVC的入门程序</h3><p><img src="https://github.com/ZephXu07/IMG/raw/master/FlowDiagram%20.png" alt="流程图"></p>
<h4 id="1、创建Web工程，引入开发的jar包"><a href="#1、创建Web工程，引入开发的jar包" class="headerlink" title="1、创建Web工程，引入开发的jar包"></a>1、创建Web工程，引入开发的jar包</h4><h5 id="具体坐标如下"><a href="#具体坐标如下" class="headerlink" title="具体坐标如下"></a><a href="#具体坐标如下" title="具体坐标如下"></a>具体坐标如下</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">properties</span>&gt;</span>    </span><br><span class="line">    <span class="tag">&lt;<span class="name">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">project.build.sourceEncoding</span>&gt;</span>    </span><br><span class="line">    <span class="tag">&lt;<span class="name">maven.compiler.source</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">maven.compiler.source</span>&gt;</span>   </span><br><span class="line">    <span class="tag">&lt;<span class="name">maven.compiler.target</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">maven.compiler.target</span>&gt;</span>    </span><br><span class="line">    <span class="tag">&lt;<span class="name">spring.version</span>&gt;</span>5.2.0.RELEASE<span class="tag">&lt;/<span class="name">spring.version</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;/<span class="name">properties</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span>   </span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span>      </span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span>      </span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-context<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span>      </span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span>    </span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span>    </span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span>      </span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span>      </span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span>      </span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span>    </span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span>    </span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span>      </span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span>      </span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-webmvc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span>      </span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span>   </span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span>   </span><br><span class="line">    <span class="comment">&lt;!-- https://mvnrepository.com/artifact/javax.servlet/javax.servlet-api --&gt;</span>    </span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span>      </span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span>    </span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>javax.servlet-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span>   </span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.0.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span>   </span><br><span class="line">        <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span>   </span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span>    </span><br><span class="line">    <span class="comment">&lt;!-- https://mvnrepository.com/artifact/javax.servlet.jsp/javax.servlet.jsp-api --&gt;</span>    </span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span>     </span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet.jsp<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span>   </span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>javax.servlet.jsp-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span>     </span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.3.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span>     </span><br><span class="line">        <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span>   </span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="2、配置核心的控制器（配置DispatcherServlet）"><a href="#2、配置核心的控制器（配置DispatcherServlet）" class="headerlink" title="2、配置核心的控制器（配置DispatcherServlet）"></a>2、配置核心的控制器（配置DispatcherServlet）</h4><h5 id="在web-xml配置文件中核心控制器DispatcherServlet"><a href="#在web-xml配置文件中核心控制器DispatcherServlet" class="headerlink" title="在web.xml配置文件中核心控制器DispatcherServlet"></a>在web.xml配置文件中核心控制器DispatcherServlet</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- SpringMVC的核心控制器 --&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span>   </span><br><span class="line">	<span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>dispatcherServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span> </span><br><span class="line">	<span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span>   </span><br><span class="line"><span class="comment">&lt;!-- 配置Servlet的初始化参数，读取springmvc的配置文件，创建spring容器 --&gt;</span>  </span><br><span class="line">	<span class="tag">&lt;<span class="name">init-param</span>&gt;</span>     </span><br><span class="line">		<span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span>   </span><br><span class="line">		<span class="comment">&lt;!--给上面的DispatcherServlet类的contextConfigLocation传值，读取配置文件--&gt;</span> </span><br><span class="line">		<span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:SpringMVC.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span>  </span><br><span class="line">	<span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!--配置servlet启动时加载对象，DispatcherServlet第一次发请求时被创建--&gt;</span>  </span><br><span class="line">	<span class="tag">&lt;<span class="name">load-on-startup</span>&gt;</span>1<span class="tag">&lt;/<span class="name">load-on-startup</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span>  </span><br><span class="line">	<span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>dispatcherServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span>  </span><br><span class="line">	<span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span>   </span><br><span class="line">	<span class="comment">&lt;!--"/"发送任何请求都会经过DispatcherServlet--&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h4 id="3、编写springmvc-xml的配置文件"><a href="#3、编写springmvc-xml的配置文件" class="headerlink" title="3、编写springmvc.xml的配置文件"></a>3、编写springmvc.xml的配置文件</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span>       <span class="attr">xmlns:mvc</span>=<span class="string">"http://www.springframework.org/schema/mvc"</span>       <span class="attr">xmlns:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span>       <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span>       <span class="attr">xsi:schemaLocation</span>=<span class="string">" http://www.springframework.org/schema/beans       http://www.springframework.org/schema/beans/spring-beans.xsd       http://www.springframework.org/schema/mvc       http://www.springframework.org/schema/mvc/spring-mvc.xsd       http://www.springframework.org/schema/context       http://www.springframework.org/schema/context/spring-context.xsd"</span>&gt;</span>    <span class="comment">&lt;!-- 配置spring创建容器时要扫描的包--&gt;</span>    </span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"com.zephxu"</span>/&gt;</span><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h4 id="4-编写index-jsp和HelloController控制器"><a href="#4-编写index-jsp和HelloController控制器" class="headerlink" title="4. 编写index.jsp和HelloController控制器"></a>4. 编写index.jsp和HelloController控制器</h4><h5 id="a-index-jsp："><a href="#a-index-jsp：" class="headerlink" title="a) index.jsp："></a>a) index.jsp：</h5><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">"text/html;charset=UTF-8"</span> language=<span class="string">"java"</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">	&lt;head&gt;    </span><br><span class="line">		&lt;title&gt;SpringMVC&lt;/title&gt;</span><br><span class="line">	&lt;/head&gt;</span><br><span class="line">	&lt;body&gt;   </span><br><span class="line">    	&lt;h3&gt;入门程序&lt;/h3&gt;    </span><br><span class="line">    	&lt;a href="sayHello"&gt;入门程序&lt;/a&gt;</span><br><span class="line">        &lt;%--相对路径，对应com.zephxu.controller.HelloController.sayHello上的注解--%&gt;</span><br><span class="line">    &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>



<h5 id="b-HelloController"><a href="#b-HelloController" class="headerlink" title="b) HelloController"></a>b) HelloController</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controllerpublic</span> </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">HelloController</span> </span>&#123;   </span><br><span class="line">	<span class="meta">@RequestMapping</span>(path = <span class="string">"/sayHello"</span>)    </span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">sayHello</span><span class="params">()</span> </span>&#123;       </span><br><span class="line">    	System.out.println(<span class="string">"Hello SpringMVC"</span>);       </span><br><span class="line">        <span class="keyword">return</span> <span class="string">"success"</span>;   </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><strong>SpringMVC默认规则：return “success”字符串默认为打开新的success.jsp.页面，即5、的操作</strong></p>
<p><strong>前提是开启下面的配置</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--视图解析器--&gt;</span>    </span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"internalResourceViewResolver"</span> <span class="attr">class</span>=<span class="string">"org.springframework.web.servlet.view.InternalResourceViewResolver"</span>&gt;</span>        		</span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"prefix"</span> <span class="attr">value</span>=<span class="string">"/WEB-INF/pages/"</span>/&gt;</span></span><br><span class="line">	<span class="comment">&lt;!--文件所在目录--&gt;</span>        </span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"suffix"</span> <span class="attr">value</span>=<span class="string">".jsp"</span>/&gt;</span></span><br><span class="line">	<span class="comment">&lt;!--后缀--&gt;</span>        </span><br><span class="line">	<span class="comment">&lt;!--前后缀连接成页面的文件--&gt;</span>    </span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    SpringMVC注解支持--&gt;</span>    </span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:annotation-driven</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="5、在WEB-INF目录下创建pages文件夹，编写success-jsp的成功页面"><a href="#5、在WEB-INF目录下创建pages文件夹，编写success-jsp的成功页面" class="headerlink" title="5、在WEB-INF目录下创建pages文件夹，编写success.jsp的成功页面"></a>5、在WEB-INF目录下创建pages文件夹，编写success.jsp的成功页面</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">%@</span> <span class="attr">page</span> <span class="attr">contentType</span>=<span class="string">"text/html;charset=UTF-8"</span> <span class="attr">language</span>=<span class="string">"java"</span> %&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">head</span>&gt;</span>    </span><br><span class="line">		<span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">body</span>&gt;</span>        </span><br><span class="line">		<span class="tag">&lt;<span class="name">h3</span>&gt;</span>入门成功<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="6、启动Tomcat服务器，进行测试"><a href="#6、启动Tomcat服务器，进行测试" class="headerlink" title="6、启动Tomcat服务器，进行测试"></a>6、启动Tomcat服务器，进行测试</h4><h3 id="三、入门案例的执行过程分析"><a href="#三、入门案例的执行过程分析" class="headerlink" title="三、入门案例的执行过程分析"></a>三、入门案例的执行过程分析</h3><h4 id="1、入门案例的执行流程"><a href="#1、入门案例的执行流程" class="headerlink" title="1、入门案例的执行流程"></a>1、入门案例的执行流程</h4><p>a)当启动Tomcat服务器的时候，因为配置了load-on-startup标签，所以会创建DispatcherServlet对象，<br>就会加载springmvc.xml配置文件</p>
<p>b) 开启了注解扫描，那么HelloController对象就会被创建</p>
<p>c)从index.jsp发送请求，请求会先到达DispatcherServlet核心控制器，根据配置@RequestMapping注解<br>找到执行的具体方法</p>
<p>d)根据执行方法的返回值，再根据配置的视图解析器，去指定的目录下查找指定名称的JSP文件</p>
<p>e) Tomcat服务器渲染页面，做出响应</p>
<p><img src="https://github.com/ZephXu07/IMG/raw/master/ProcessOfIntroductoryCase.png" alt="简单流程"></p>
<p><img src="https://github.com/ZephXu07/IMG/raw/master/DetailedFlow0.png" alt="详细流程0"></p>
<h4 id="2、入门案例中的组件分析"><a href="#2、入门案例中的组件分析" class="headerlink" title="2、入门案例中的组件分析"></a>2、入门案例中的组件分析</h4><h5 id="a-DispatcherServlet：前端控制器"><a href="#a-DispatcherServlet：前端控制器" class="headerlink" title="a) DispatcherServlet：前端控制器"></a>a) DispatcherServlet：前端控制器</h5><p>用户请求到达前端控制器，它就相当于mvc模式中的c，dispatcherServlet是整个流程控制的中心，由它调用其它组件处理用户的请求，dispatcherServlet的存在降低了组件之间的耦合性。</p>
<h5 id="b-HandlerMapping：处理器映射器"><a href="#b-HandlerMapping：处理器映射器" class="headerlink" title="b) HandlerMapping：处理器映射器"></a>b) HandlerMapping：处理器映射器</h5><p>HandlerMapping负责根据用户请求找到Handler即处理器，SpringMVC提供了不同的映射器实现不同的映射方式，例如：配置文件方式，实现接口方式，注解方式等。</p>
<h5 id="c-Handler：处理器"><a href="#c-Handler：处理器" class="headerlink" title="c) Handler：处理器"></a>c) Handler：处理器</h5><p>它就是我们开发中要编写的具体业务控制器。由DispatcherServlet把用户请求转发到Handler。由Handler对具体的用户请求进行处理。</p>
<h5 id="d-HandlAdapter：处理器适配器（转接口）"><a href="#d-HandlAdapter：处理器适配器（转接口）" class="headerlink" title="d) HandlAdapter：处理器适配器（转接口）"></a>d) HandlAdapter：处理器适配器（转接口）</h5><p>通过HandlerAdapter对处理器进行执行，这是适配器模式的应用，通过扩展适配器可以对更多类型的处理器进行执行。</p>
<h5 id="e-View-Resolver：视图解析器"><a href="#e-View-Resolver：视图解析器" class="headerlink" title="e) View Resolver：视图解析器"></a>e) View Resolver：视图解析器</h5><p>View Resolver负责将处理结果生成View视图，ViewResolver首先根据逻辑视图名解析成物理视图名即具体的页面地址，再生成View视图对象，最后对View进行渲染将处理结果通过页面展示给用户。</p>
<h5 id="f-View：视图"><a href="#f-View：视图" class="headerlink" title="f) View：视图"></a>f) View：视图</h5><p>SpringMVC框架提供了很多的 View视图类型的支持，包括：jstlView、freemarkerView、pdfView<br>等。我们最常用的视图就是 jsp。一般情况下需要通过页面标签或页面模版技术将模型数据通过页面展示给用户，需要由程序员根据业务需求开发具体的页面。</p>
<p><img src="https://github.com/ZephXu07/IMG/raw/master/DetailedFlow.png" alt="流程及组件"></p>
<h4 id="3、-lt-mvc-annotation-driven-gt-说明"><a href="#3、-lt-mvc-annotation-driven-gt-说明" class="headerlink" title="3、&lt;mvc:annotation-driven&gt;说明"></a>3、<code>&lt;mvc:annotation-driven&gt;</code>说明</h4><p>在 SpringMVC 的各个组件中，处理器映射器、处理器适配器、视图解析器称为SpringMVC 的三大组件。<br>使用<code>&lt;mvc:annotation-driven&gt;</code>自动加载RequestMappingHandlerMapping（处理映射器）和RequestMappingHandlerAdapter（ 处 理 适 配 器 ） ， 可 用 在SpringMVC.xml 配 置 文 件 中 使 用<br><code>&lt;mvc:annotation-driven&gt;</code>替代注解处理器和适配器的配置。</p>
<p>它就相当于在 xml 中配置了：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- Begin --&gt;</span> </span><br><span class="line"><span class="comment">&lt;!-- HandlerMapping --&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping"</span>/&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"org.springframework.web.servlet.handler.BeanNameUrlHandlerMapping"</span>/&gt;</span> </span><br><span class="line"><span class="comment">&lt;!-- HandlerAdapter --&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"org.springframework.web.servlet.mvc.HttpRequestHandlerAdapter"</span>/&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"org.springframework.web.servlet.mvc.SimpleControllerHandlerAdapter"</span>/&gt;</span> </span><br><span class="line"><span class="comment">&lt;!-- HadnlerExceptionResolvers --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExceptionResolver"</span>/&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"org.springframework.web.servlet.mvc.annotation.ResponseStatusExceptionResolver"</span>/&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"org.springframework.web.servlet.mvc.support.DefaultHandlerExceptionResolver"</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- End --&gt;</span></span><br></pre></td></tr></table></figure>



<p><strong>注意：</strong> 一般开发中，我们都需要写上此标签（虽然从入门案例中看，我们不写也行，随着课程的深入，该标签还有具体的使用场景）。</p>
<p><strong>明确：</strong> 我们只需要编写处理具体业务的控制器以及视图。</p>
<h3 id="四、RequestMapping注解"><a href="#四、RequestMapping注解" class="headerlink" title="四、RequestMapping注解"></a>四、RequestMapping注解</h3><h4 id="1、RequestMapping注解的作用是建立请求URL和处理方法之间的对应关系"><a href="#1、RequestMapping注解的作用是建立请求URL和处理方法之间的对应关系" class="headerlink" title="1、RequestMapping注解的作用是建立请求URL和处理方法之间的对应关系"></a>1、RequestMapping注解的作用是建立请求URL和处理方法之间的对应关系</h4><h4 id="2-、RequestMapping注解可以作用在方法和类上：更加清晰"><a href="#2-、RequestMapping注解可以作用在方法和类上：更加清晰" class="headerlink" title="2.、RequestMapping注解可以作用在方法和类上：更加清晰"></a>2.、RequestMapping注解可以作用在方法和类上：更加清晰</h4><p>a) 作用在类上：第一级的访问目录</p>
<p>b) 作用在方法上：第二级的访问目录</p>
<p><img src="https://github.com/ZephXu07/IMG/raw/master/RequestMappingScope.png" alt="作用域"></p>
<p><strong>若在类上加注解，则在请求方法时路径要加上类的注解</strong></p>
<p>c) 细节：路径可以不编写 / 表示应用的根目录开始</p>
<p>d)细节：<code>${ pageContext.request.contextPath }</code>也可以省略不写，但是路径上不能写/</p>
<h4 id="3、RequestMapping的属性"><a href="#3、RequestMapping的属性" class="headerlink" title="3、RequestMapping的属性"></a>3、RequestMapping的属性</h4><p>a) path：指定请求路径的url</p>
<p>b) value：value属性和path属性是一样的</p>
<p>c) method ：指定该方法的请求方式</p>
<p><code>@RequestMapping(value = &quot;/sayHello&quot;, method = {RequestMethod.GET, RequestMethod.POST})</code></p>
<ul>
<li>超链接一般是通过get方式</li>
</ul>
<p>d) params：指定限制请求参数的条件</p>
<ul>
<li><p><code>@RequestMapping(value = &quot;/sayHello&quot;,params = {&quot;username&quot;})</code>对应的：<code>&lt;a href=&quot;user/sayHello?username=hhhh&quot;&gt;RequestMapping注解&lt;/a&gt;</code></p>
</li>
<li><p><code>@RequestMapping(value = &quot;/sayHello&quot;,params = {&quot;username=heihei&quot;})</code>对应的<code>&lt;a href=&quot;user/sayHello?username=heihei&quot;&gt;RequestMapping注解&lt;/a&gt;</code></p>
</li>
<li><p>还有如下：</p>
<p><img src="https://github.com/ZephXu07/IMG/raw/master/DetailedResult.png" alt="详细结果"></p>
</li>
</ul>
<p>e) headers：发送的请求中必须包含的请求头</p>
<p><img src="https://github.com/ZephXu07/IMG/raw/master/HeadAction.png" alt="action"></p>
<p><img src="https://github.com/ZephXu07/IMG/raw/master/HeadResult.png" alt="result"></p>
<h2 id="part3、请求参数的绑定"><a href="#part3、请求参数的绑定" class="headerlink" title="part3、请求参数的绑定"></a>part3、请求参数的绑定</h2><h3 id="一、请求参数的绑定说明"><a href="#一、请求参数的绑定说明" class="headerlink" title="一、请求参数的绑定说明"></a>一、请求参数的绑定说明</h3><h4 id="1、绑定机制"><a href="#1、绑定机制" class="headerlink" title="1、绑定机制"></a>1、绑定机制</h4><p>a) 表单提交的数据都是k=v格式的 username=haha&amp;password=123</p>
<p>b)SpringMVC的参数绑定过程是把表单提交的请求参数，作为控制器中方法的参数进行绑定的</p>
<p>c) 要求：提交表单的name和参数的名称是相同的</p>
<h4 id="2、支持的数据类型"><a href="#2、支持的数据类型" class="headerlink" title="2、支持的数据类型"></a>2、支持的数据类型</h4><p>a) 基本数据类型和字符串类型</p>
<p>b) 实体类型（JavaBean）</p>
<p>c) 集合数据类型（List、map集合等）</p>
<h3 id="二、基本数据类型和字符串类型"><a href="#二、基本数据类型和字符串类型" class="headerlink" title="二、基本数据类型和字符串类型"></a>二、基本数据类型和字符串类型</h3><p>1、提交的表单的name和参数名称是相同的</p>
<p>2、区分大小写</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/parameter"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ParameterController</span> </span>&#123; </span><br><span class="line">	<span class="meta">@RequestMapping</span>(<span class="string">"/testParameter"</span>)   </span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">testParameter</span><span class="params">(String username, <span class="keyword">int</span> value)</span> </span>&#123;     </span><br><span class="line">		System.out.println(<span class="string">"执行了……"</span>);     </span><br><span class="line">        System.out.println(<span class="string">"用户名："</span> + username);  </span><br><span class="line">        System.out.println(<span class="string">"数值："</span> + value);    </span><br><span class="line">        <span class="keyword">return</span> <span class="string">"success"</span>;   </span><br><span class="line">     &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><code>&lt;a href=&quot;parameter/testParameter?username=xzf&amp;value=19990701&quot;&gt;请求参数绑定&lt;/a&gt;</code></p>
<h3 id="三、实体类型（JavaBean）"><a href="#三、实体类型（JavaBean）" class="headerlink" title="三、实体类型（JavaBean）"></a>三、实体类型（JavaBean）</h3><p>1、提交表单的name和JavaBean中的属性名称需要一致（通过JavaBean的set方法）</p>
<p>2、如果一个JavaBean类中包含其他的引用类型，那么表单的name属性需要编写成：对象.属性<br>例如： address.name</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Account</span> <span class="keyword">implements</span> <span class="title">Serializable</span> </span>&#123; </span><br><span class="line">	<span class="keyword">private</span> String username; </span><br><span class="line">	<span class="keyword">private</span> String password;  </span><br><span class="line">	<span class="keyword">private</span> Double money;    </span><br><span class="line">	<span class="keyword">private</span> User user;   </span><br><span class="line">	<span class="comment">//set(), get()方法, toString()</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> <span class="keyword">implements</span> <span class="title">Serializable</span> </span>&#123;  </span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> id;    </span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> age;  </span><br><span class="line">	<span class="comment">//set(), get(), toString()</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;form action=<span class="string">"parameter/saveAccount"</span> method=<span class="string">"post"</span>&gt;        </span><br><span class="line">    姓名：&lt;input type=<span class="string">"text"</span> name=<span class="string">"username"</span>/&gt;&lt;br/&gt;    </span><br><span class="line">    密码：&lt;input type=<span class="string">"password"</span> name=<span class="string">"password"</span>/&gt;&lt;br/&gt;       </span><br><span class="line">    金额：&lt;input type=<span class="string">"text"</span> name=<span class="string">"money"</span>/&gt;&lt;br/&gt;       </span><br><span class="line">    用户ID：&lt;input type=<span class="string">"text"</span> name=<span class="string">"user.id"</span>/&gt;&lt;br/&gt;       </span><br><span class="line">    用户年龄：&lt;input type=<span class="string">"text"</span> name=<span class="string">"user.age"</span>/&gt;&lt;br/&gt;    </span><br><span class="line">    &lt;input type=<span class="string">"submit"</span> value=<span class="string">"提交"</span>&gt;</span><br><span class="line">&lt;/form&gt;</span><br></pre></td></tr></table></figure>




<ul>
<li><p><strong>暂时会出现中文乱码：post方式！get方式正常！</strong></p>
</li>
<li><p>配置解决中文乱码的过滤器<strong>（在servlet配置之前）</strong>：</p>
<p><strong>在web.xml中配置Spring提供的过滤器类</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">filter</span>&gt;</span>   </span><br><span class="line">	<span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>characterEncodingFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span>   </span><br><span class="line">	<span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>org.springframework.web.filter.CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">init-param</span>&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>encoding<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span>    </span><br><span class="line">    <span class="comment">&lt;!-- 指定字符集 --&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">filter</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span>    </span><br><span class="line">	<span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>characterEncodingFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span>  </span><br><span class="line">	<span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>



</li>
</ul>
<h3 id="四、集合属性数据封装"><a href="#四、集合属性数据封装" class="headerlink" title="四、集合属性数据封装"></a>四、集合属性数据封装</h3><h4 id="1、List：JSP页面编写方式：list-0-属性"><a href="#1、List：JSP页面编写方式：list-0-属性" class="headerlink" title="1、List：JSP页面编写方式：list[0].属性"></a>1、List：JSP页面编写方式：list[0].属性</h4><h4 id="2、Map：map-‘key’-属性"><a href="#2、Map：map-‘key’-属性" class="headerlink" title="2、Map：map[‘key’].属性"></a>2、Map：map[‘key’].属性</h4><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;form action=<span class="string">"parameter/saveAccount"</span> method=<span class="string">"post"</span>&gt;     </span><br><span class="line">	姓名：&lt;input type=<span class="string">"text"</span> name=<span class="string">"username"</span>/&gt;&lt;br/&gt;    </span><br><span class="line">    密码：&lt;input type=<span class="string">"password"</span> name=<span class="string">"password"</span>/&gt;&lt;br/&gt;  </span><br><span class="line">    金额：&lt;input type=<span class="string">"text"</span> name=<span class="string">"money"</span>/&gt;&lt;br/&gt;     </span><br><span class="line">    用户ID：&lt;input type=<span class="string">"text"</span> name=<span class="string">"userList[0].id"</span>/&gt;&lt;br/&gt;   </span><br><span class="line">    用户年龄：&lt;input type=<span class="string">"text"</span> name=<span class="string">"userList[0].age"</span>/&gt;&lt;br/&gt;    </span><br><span class="line">    用户ID：&lt;input type=<span class="string">"text"</span> name=<span class="string">"userMap['xzf'].id"</span>/&gt;&lt;br/&gt;      </span><br><span class="line">    用户年龄：&lt;input type=<span class="string">"text"</span> name=<span class="string">"userMap['xzf'].age"</span>/&gt;&lt;br/&gt;   </span><br><span class="line">    &lt;input type=<span class="string">"submit"</span> value=<span class="string">"提交"</span>&gt;</span><br><span class="line">&lt;/form&gt;</span><br></pre></td></tr></table></figure>



<h3 id="五、自定义类型转换器"><a href="#五、自定义类型转换器" class="headerlink" title="五、自定义类型转换器"></a>五、自定义类型转换器</h3><p>1、表单提交的任何数据类型全部都是字符串类型，但是后台定义Integer类型，数据也可以封装上，说明<br>Spring框架内部会默认进行数据类型转换。</p>
<p>2、如果想自定义数据类型转换，可以实现Converter的接口</p>
<p> a) 自定义类型转换器</p>
<p> i) 正常情况：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;form action=<span class="string">"parameter/saveUser"</span> method=<span class="string">"post"</span>&gt;      </span><br><span class="line">    用户ID：&lt;input type=<span class="string">"text"</span> name=<span class="string">"id"</span>/&gt;&lt;br/&gt;       </span><br><span class="line">    用户年龄：&lt;input type=<span class="string">"text"</span> name=<span class="string">"age"</span>/&gt;&lt;br/&gt;    </span><br><span class="line">    用户生日：&lt;input type=<span class="string">"text"</span> name=<span class="string">"date"</span>&gt;&lt;br/&gt; </span><br><span class="line">    &lt;input type=<span class="string">"submit"</span> value=<span class="string">"提交"</span>&gt;</span><br><span class="line">&lt;/form&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/saveUser"</span>) </span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">saveUser</span><span class="params">(User user)</span></span>&#123;   </span><br><span class="line">    System.out.println(<span class="string">"自定义类型转换器"</span>);       </span><br><span class="line">    System.out.println(user);        </span><br><span class="line">    <span class="keyword">return</span> <span class="string">"success"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>




<p><img src="https://github.com/ZephXu07/IMG/raw/master/Test.png" alt="test0"></p>
<p><img src="https://github.com/ZephXu07/IMG/raw/master/NormalResult.png" alt="normalResult"></p>
<p><img src="https://github.com/ZephXu07/IMG/raw/master/ThrowTest.png" alt="ThrowTest"></p>
<p><img src="https://github.com/ZephXu07/IMG/raw/master/ResultThrow.png" alt="ThrowResult"></p>
<p> ii) 使用自定义类型转换器</p>
<ul>
<li>自定义类型转换器类：</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StringToDateConverter</span> <span class="keyword">implements</span> <span class="title">Converter</span>&lt;<span class="title">String</span>, <span class="title">Date</span>&gt; </span>&#123; </span><br><span class="line">    <span class="meta">@Override</span>    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> Date <span class="title">convert</span><span class="params">(String s)</span> </span>&#123;      </span><br><span class="line">        <span class="keyword">if</span>(<span class="keyword">null</span> != s) &#123;          </span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">"请传入数值"</span>);   </span><br><span class="line">        &#125;       </span><br><span class="line">        DateFormat df = <span class="keyword">new</span> SimpleDateFormat(<span class="string">"yyyy-MM-dd"</span>);   </span><br><span class="line">        <span class="keyword">try</span> &#123;         </span><br><span class="line">            <span class="keyword">return</span> df.parse(s);     </span><br><span class="line">        &#125; <span class="keyword">catch</span> (ParseException e) &#123;       </span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">"数据类型转换出现错误"</span>);  </span><br><span class="line">        &#125;   </span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>




<ul>
<li><p>SpringMVC.xml配置：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">    <span class="comment">&lt;!-- 配置自定义类型转换器   --&gt;</span>   </span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"myConversionService"</span> <span class="attr">class</span>=<span class="string">"org.springframework.context.support.ConversionServiceFactoryBean"</span>&gt;</span>       </span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"converters"</span>&gt;</span>        </span><br><span class="line">    		<span class="tag">&lt;<span class="name">set</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!--set集合属性--&gt;</span>        </span><br><span class="line">    			<span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"com.zephxu.utils.StringToDateConverter"</span>/&gt;</span>  </span><br><span class="line">    			<span class="comment">&lt;!--新增--&gt;</span>     </span><br><span class="line">    		<span class="tag">&lt;/<span class="name">set</span>&gt;</span>       </span><br><span class="line">    	<span class="tag">&lt;/<span class="name">property</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--    SpringMVC注解支持--&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:annotation-driven</span> <span class="attr">conversion-service</span>=<span class="string">"myConversionService"</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--处理器映射器、处理器适配器默认生效，类型转换器需要手动配置使生效--&gt;</span></span><br></pre></td></tr></table></figure>




</li>
</ul>
<pre><code>**注意：使用自定义类型转换器后替换了原本的默认，导致1996/12/26方式出错，静待解决！！！**</code></pre><h3 id="六、在控制器中使用原生的ServletAPI对象："><a href="#六、在控制器中使用原生的ServletAPI对象：" class="headerlink" title="六、在控制器中使用原生的ServletAPI对象："></a>六、在控制器中使用原生的ServletAPI对象：</h3><p>只需要在控制器的方法参数定义HttpServletRequest和HttpServletResponse对象。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/testServlet"</span>) </span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">testServlet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span></span>&#123; </span><br><span class="line">    System.out.println(<span class="string">"获取原生API"</span>);    </span><br><span class="line">    System.out.println(<span class="string">"request:"</span> + request);    </span><br><span class="line">    System.out.println(<span class="string">"response:"</span> + response);      </span><br><span class="line">    System.out.println(<span class="string">"session:"</span> + request.getSession());        	</span><br><span class="line">    System.out.println(<span class="string">"ServletContext:"</span> + request.getServletContext());    </span><br><span class="line">    <span class="keyword">return</span> <span class="string">"success"</span>;   </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>




<h2 id="part4、常用的注解"><a href="#part4、常用的注解" class="headerlink" title="part4、常用的注解"></a>part4、常用的注解</h2><h3 id="一、RequestParam注解"><a href="#一、RequestParam注解" class="headerlink" title="一、RequestParam注解"></a>一、RequestParam注解</h3><h4 id="1、作用："><a href="#1、作用：" class="headerlink" title="1、作用："></a>1、作用：</h4><p>把请求中的指定名称的参数传递给控制器中的形参赋值。</p>
<h4 id="2、属性："><a href="#2、属性：" class="headerlink" title="2、属性："></a>2、属性：</h4><p>a) value（name）：请求参数中的名称</p>
<p>b) required：请求参数中是否必须提供此参数，默认值是true，必须提供</p>
<p><code>&lt;a href=&quot;annotation/testRequestParameter?name=许xzf&quot;&gt;RequestParameter&lt;/a&gt;</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/annotation"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AnnotationController</span> </span>&#123;   </span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"/testRequestParameter"</span>)   </span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">testRequestParameter</span><span class="params">(@RequestParam(name = <span class="string">"name"</span>)</span> String username) </span>&#123;       </span><br><span class="line">        System.out.println(<span class="string">"AnnotationController"</span>);  </span><br><span class="line">        System.out.println(username);   </span><br><span class="line">        <span class="keyword">return</span> <span class="string">"success"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="二、RequestBody注解（异步，json）"><a href="#二、RequestBody注解（异步，json）" class="headerlink" title="二、RequestBody注解（异步，json）"></a>二、RequestBody注解（异步，json）</h3><h4 id="1、作用：-1"><a href="#1、作用：-1" class="headerlink" title="1、作用："></a>1、作用：</h4><p>用于获取请求体的内容（注意：get方法不可以）</p>
<p><strong>注意：get方法不可以，原因是get方式把内容已经封装到地址栏上。</strong></p>
<h4 id="2、属性：-1"><a href="#2、属性：-1" class="headerlink" title="2、属性："></a>2、属性：</h4><p><strong>required：是否必须有请求体，默认值是true。当取值为 true 时,get请求方式会报错。如果取值 为 false，get 请求得到是 null。</strong></p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;%--request body注解--%&gt;</span><br><span class="line">&lt;%--post--%&gt;</span><br><span class="line">&lt;form action=<span class="string">"annotation/testRequestBody"</span> method=<span class="string">"post"</span>&gt;   </span><br><span class="line">    requestBody 注解 post 请求&lt;br/&gt;    </span><br><span class="line">    ID：&lt;input type=<span class="string">"text"</span> name=<span class="string">"id"</span>&gt;&lt;br/&gt;    </span><br><span class="line">    AGE：&lt;input type=<span class="string">"text"</span> name=<span class="string">"age"</span>&gt;&lt;br/&gt;    </span><br><span class="line">    &lt;input type="submit" value="保存"&gt;&lt;/form&gt;</span><br><span class="line">	&lt;%--get--%&gt;</span><br><span class="line">	&lt;a href="annotation/testRequestBody?body=test"&gt;requestBody 注解 get 请求&lt;/a&gt;"</span><br></pre></td></tr></table></figure>



<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/testRequestBody"</span>)  </span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">testRequestBody</span><span class="params">(@RequestBody(required = <span class="keyword">true</span>)</span> String body) </span>&#123;  </span><br><span class="line">    System.out.println(<span class="string">"AnnotationController"</span>);   </span><br><span class="line">    System.out.println(body);    </span><br><span class="line">    <span class="keyword">return</span> <span class="string">"success"</span>;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>




<ul>
<li><p>required = true</p>
</li>
<li><ul>
<li>post</li>
</ul>
<p><img src="https://github.com/ZephXu07/IMG/raw/master/TrueRequestBodyTestPost.png" alt="post"></p>
</li>
<li><ul>
<li><p>get</p>
<p><img src="https://github.com/ZephXu07/IMG/raw/master/TrueRequestBodyTestGet.png" alt="get"></p>
</li>
</ul>
</li>
<li><p>required = false</p>
<p><img src="https://github.com/ZephXu07/IMG/raw/master/FalseRequestBody.png" alt="result"></p>
</li>
</ul>
<h3 id="三、PathVariable注解"><a href="#三、PathVariable注解" class="headerlink" title="三、PathVariable注解"></a>三、PathVariable注解</h3><h4 id="1、作用：-2"><a href="#1、作用：-2" class="headerlink" title="1、作用："></a>1、作用：</h4><p>拥有绑定url中的占位符的。例如：url中有/delete/{id}，{id}就是占位符</p>
<p><img src="https://github.com/ZephXu07/IMG/raw/master/attention.png" alt="注意"></p>
<h4 id="2、属性：-2"><a href="#2、属性：-2" class="headerlink" title="2、属性："></a>2、属性：</h4><p>value：指定url中的占位符名称</p>
<h4 id="3、Restful风格的URL"><a href="#3、Restful风格的URL" class="headerlink" title="3、Restful风格的URL"></a>3、Restful风格的URL</h4><h5 id="a"><a href="#a" class="headerlink" title="a)"></a>a)</h5><p>请求路径一样，可以根据不同的请求方式去执行后台的不同方法</p>
<h5 id="b-restful风格的URL优点"><a href="#b-restful风格的URL优点" class="headerlink" title="b) restful风格的URL优点:"></a>b) restful风格的URL优点:</h5><p>i) 结构清晰</p>
<p>ii) 符合标准</p>
<p>iii) 易于理解</p>
<p>iv) 扩展方便</p>
<h5 id="c-restful特性"><a href="#c-restful特性" class="headerlink" title="c) restful特性"></a>c) restful特性</h5><p><img src="https://github.com/ZephXu07/IMG/raw/master/RestfulCharacter.png" alt="restfulCharacter"></p>
<p><img src="https://github.com/ZephXu07/IMG/raw/master/01-restful%E7%BC%96%E7%A8%8B%E9%A3%8E%E6%A0%BC.png" alt="restfulStyle"></p>
<h4 id="4、实践"><a href="#4、实践" class="headerlink" title="4、实践"></a>4、实践</h4><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;%--PathVariable--%&gt;    </span><br><span class="line">&lt;a href="annotation/testPathVariable/17"&gt;testPathVariable&lt;/a&gt;"&lt;%--“/”后面直接数字--%&gt;</span><br></pre></td></tr></table></figure>



<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/testPathVariable/&#123;sid&#125;"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">testPathVariable</span><span class="params">(@PathVariable(name = <span class="string">"sid"</span>)</span> String id) </span>&#123;        </span><br><span class="line">    System.out.println(<span class="string">"AnnotationController"</span>);    </span><br><span class="line">    System.out.println(id);   </span><br><span class="line">    <span class="keyword">return</span> <span class="string">"success"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>




<p><img src="https://github.com/ZephXu07/IMG/raw/master/PathVariableResul.png" alt="result"></p>
<h3 id="四、基于-HiddentHttpMethodFilter-的示例（了解即可）"><a href="#四、基于-HiddentHttpMethodFilter-的示例（了解即可）" class="headerlink" title="四、基于 HiddentHttpMethodFilter 的示例（了解即可）"></a>四、基于 HiddentHttpMethodFilter 的示例（了解即可）</h3><h4 id="1、作用：-3"><a href="#1、作用：-3" class="headerlink" title="1、作用："></a>1、作用：</h4><p>由于浏览器 form 表单只支持 GET 与 POST 请求，而DELETE、PUT 等 method<br>并不支持，Spring3.0添加了一个过滤器，可以将浏览器请求改为指定的请求方式，发送给我们的控制器方法，使得支持<br>GET、POST、PUT 与 DELETE 请求。</p>
<h4 id="2、使用方法："><a href="#2、使用方法：" class="headerlink" title="2、使用方法："></a>2、使用方法：</h4><p>a)：在 web.xml 中配置该过滤器。</p>
<p>b)：请求方式必须使用 post 请求。</p>
<p>c)：按照要求提供_method 请求参数，该参数的取值就是我们需要的请求方式。</p>
<h4 id="3、源码分析："><a href="#3、源码分析：" class="headerlink" title="3、源码分析："></a>3、源码分析：</h4><p><img src="https://github.com/ZephXu07/IMG/raw/master/ResourceCode.png" alt="源码"></p>
<p>jsp 中示例代码：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 保存 --&gt; </span><br><span class="line">&lt;form action=<span class="string">"springmvc/testRestPOST"</span> method=<span class="string">"post"</span>&gt;    </span><br><span class="line">    用户名称：&lt;input type=<span class="string">"text"</span> name=<span class="string">"username"</span>&gt;&lt;br/&gt; </span><br><span class="line">    &lt;!-- &lt;input type=<span class="string">"hidden"</span> name=<span class="string">"_method"</span> value=<span class="string">"POST"</span>&gt; --&gt;   </span><br><span class="line">    &lt;input type=<span class="string">"submit"</span> value=<span class="string">"保存"</span>&gt;</span><br><span class="line">&lt;/form&gt; </span><br><span class="line">&lt;br/&gt;</span><br><span class="line">&lt;!-- 更新 --&gt;</span><br><span class="line">&lt;form action=<span class="string">"springmvc/testRestPUT/1"</span> method=<span class="string">"post"</span>&gt;   </span><br><span class="line">    用户名称：&lt;input type=<span class="string">"text"</span> name=<span class="string">"username"</span>&gt;&lt;br/&gt;    </span><br><span class="line">    &lt;input type=<span class="string">"hidden"</span> name=<span class="string">"_method"</span> value=<span class="string">"PUT"</span>&gt;  </span><br><span class="line">    &lt;input type=<span class="string">"submit"</span> value=<span class="string">"更新"</span>&gt;</span><br><span class="line">&lt;/form&gt;</span><br><span class="line">&lt;br/&gt;</span><br><span class="line">&lt;!-- 删除 --&gt;</span><br><span class="line">&lt;form action=<span class="string">"springmvc/testRestDELETE/1"</span> method=<span class="string">"post"</span>&gt;  </span><br><span class="line">    &lt;input type=<span class="string">"hidden"</span> name=<span class="string">"_method"</span> value=<span class="string">"DELETE"</span>&gt;  </span><br><span class="line">    &lt;input type=<span class="string">"submit"</span> value=<span class="string">"删除"</span>&gt;</span><br><span class="line">&lt;/form&gt; </span><br><span class="line">&lt;br/&gt; </span><br><span class="line">&lt;!-- 查询一个 --&gt;</span><br><span class="line">&lt;form action=<span class="string">"springmvc/testRestGET/1"</span> method=<span class="string">"post"</span>&gt;    </span><br><span class="line">    &lt;input type=<span class="string">"hidden"</span> name=<span class="string">"_method"</span> value=<span class="string">"GET"</span>&gt;    </span><br><span class="line">    &lt;input type=<span class="string">"submit"</span> value=<span class="string">"查询"</span>&gt;</span><br><span class="line">&lt;/form&gt;</span><br></pre></td></tr></table></figure>




<p>控制器中示例代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(value=<span class="string">"/testRestPOST"</span>,method=RequestMethod.POST) </span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">testRestfulURLPOST</span><span class="params">(User user)</span></span>&#123;    </span><br><span class="line">    System.out.println(<span class="string">"rest post"</span>+user);    </span><br><span class="line">    <span class="keyword">return</span> <span class="string">"success"</span>;</span><br><span class="line">&#125; </span><br><span class="line"><span class="meta">@RequestMapping</span>(value=<span class="string">"/testRestPUT/&#123;id&#125;"</span>,method=RequestMethod.PUT)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">testRestfulURLPUT</span><span class="params">(@PathVariable(<span class="string">"id"</span>)</span>Integer id,User user)</span>&#123;   </span><br><span class="line">    System.out.println(<span class="string">"rest put "</span>+id+<span class="string">","</span>+user);   </span><br><span class="line">    <span class="keyword">return</span> <span class="string">"success"</span>;</span><br><span class="line">&#125; </span><br><span class="line"><span class="meta">@RequestMapping</span>(value=<span class="string">"/testRestDELETE/&#123;id&#125;"</span>,method=RequestMethod.DELETE)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">testRestfulURLDELETE</span><span class="params">(@PathVariable(<span class="string">"id"</span>)</span>Integer id)</span>&#123;  </span><br><span class="line">    System.out.println(<span class="string">"rest delete "</span>+id);</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@RequestMapping</span>(value=<span class="string">"/testRestGET/&#123;id&#125;"</span>,method=RequestMethod.GET) </span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">testRestfulURLGET</span><span class="params">(@PathVariable(<span class="string">"id"</span>)</span>Integer id)</span>&#123;  </span><br><span class="line">    System.out.println(<span class="string">"rest get "</span>+id);    </span><br><span class="line">    <span class="keyword">return</span> <span class="string">"success"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>




<p>运行结果：</p>
<p><img src="https://github.com/ZephXu07/IMG/raw/master/RunResult.png" alt="runResult"></p>
<h3 id="五、RequestHeader注解（一般开发中不怎么用）"><a href="#五、RequestHeader注解（一般开发中不怎么用）" class="headerlink" title="五、RequestHeader注解（一般开发中不怎么用）"></a>五、RequestHeader注解（一般开发中不怎么用）</h3><h4 id="1、作用：-4"><a href="#1、作用：-4" class="headerlink" title="1、作用："></a>1、作用：</h4><p>获取指定请求头的值</p>
<h4 id="2、属性：-3"><a href="#2、属性：-3" class="headerlink" title="2、属性："></a>2、属性：</h4><p>value：请求头的名称</p>
<p>required：是否必须有此消息头</p>
<h4 id="3、实践"><a href="#3、实践" class="headerlink" title="3、实践"></a>3、实践</h4><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;%--RequestHeader--%&gt;    </span><br><span class="line">&lt;a href="annotation/testRequestHeader"&gt;RequestHeader&lt;/a&gt;&lt;br/&gt;</span><br></pre></td></tr></table></figure>



<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/testRequestHeader"</span>)  </span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">testRequestHeader</span><span class="params">(@RequestHeader(value = <span class="string">"Accept"</span>)</span> String value) </span>&#123;       </span><br><span class="line">    System.out.println(<span class="string">"AnnotationController"</span>);   </span><br><span class="line">    System.out.println(value);     </span><br><span class="line">    <span class="keyword">return</span> <span class="string">"success"</span>; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>




<p><img src="https://github.com/ZephXu07/IMG/raw/master/RequestHeaderResult.png" alt="requestHeaderResult"></p>
<h3 id="六、CookieValue注解"><a href="#六、CookieValue注解" class="headerlink" title="六、CookieValue注解"></a>六、CookieValue注解</h3><h4 id="1、作用：-5"><a href="#1、作用：-5" class="headerlink" title="1、作用："></a>1、作用：</h4><p>用于获取指定cookie的名称的值</p>
<h4 id="2、属性：-4"><a href="#2、属性：-4" class="headerlink" title="2、属性："></a>2、属性：</h4><p>value：cookie的名称</p>
<p>required：是否必须有此 cookie。</p>
<h4 id="3、实践-1"><a href="#3、实践-1" class="headerlink" title="3、实践"></a>3、实践</h4><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;%--CookieValue--%&gt;  </span><br><span class="line">&lt;a href="annotation/testCookieValue"&gt;CookieValue&lt;/a&gt;&lt;br/&gt;</span><br></pre></td></tr></table></figure>



<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/testCookieValue"</span>)  </span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">testCookieValue</span><span class="params">(@CookieValue(<span class="string">"JSESSIONID"</span>)</span> String cookieValue) </span>&#123; </span><br><span class="line">	System.out.println(<span class="string">"AnnotationController"</span>);        </span><br><span class="line">	System.out.println(cookieValue);     </span><br><span class="line">    <span class="keyword">return</span> <span class="string">"success"</span>;    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="七、ModelAttribute注解"><a href="#七、ModelAttribute注解" class="headerlink" title="七、ModelAttribute注解"></a>七、ModelAttribute注解</h3><h4 id="1、作用"><a href="#1、作用" class="headerlink" title="1、作用"></a>1、作用</h4><p>a)<br>出现在方法上：表示当前方法会在控制器方法执行前线执行，它可以修饰没有返回值的方法，也可以修饰有具体返回值的方法。</p>
<p>b) 出现在参数上：获取指定的数据给参数赋值。</p>
<h4 id="2、属性：-5"><a href="#2、属性：-5" class="headerlink" title="2、属性："></a>2、属性：</h4><p>value：用于获取数据的 key。key 可以是 POJO 的属性名称，也可以是 map<br>结构的 key。</p>
<h4 id="3、应用场景："><a href="#3、应用场景：" class="headerlink" title="3、应用场景："></a>3、应用场景：</h4><p>当提交表单数据不是完整的实体数据时，保证没有提交的字段使用数据库原来的数据。例如：  </p>
<p>我们在编辑一个用户时，用户有一个创建信息字段，该字段的值是不允许被修改的。在提交表单数<br>据是肯定没有此字段的内容，一旦更新会把该字段内容置为<br>null，此时就可以使用此注解解决问题。</p>
<h4 id="4、实践-1"><a href="#4、实践-1" class="headerlink" title="4、实践"></a>4、实践</h4><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;%--ModelAttribute--%&gt;</span><br><span class="line">&lt;form action=<span class="string">"annotation/testModelAttribute"</span> method=<span class="string">"post"</span>&gt;     </span><br><span class="line">    ID：&lt;input type=<span class="string">"text"</span> name=<span class="string">"id"</span>&gt;&lt;br/&gt;     </span><br><span class="line">    AGE：&lt;input type=<span class="string">"text"</span> name=<span class="string">"age"</span>&gt;&lt;br/&gt;        </span><br><span class="line">    &lt;input type=<span class="string">"submit"</span> value=<span class="string">"保存"</span>&gt;</span><br><span class="line">&lt;/form&gt;</span><br></pre></td></tr></table></figure>




<p><strong>封装User对象，但少了Date属性，更新时会置为null，以下方法解决：</strong></p>
<h5 id="a-方法无返回值："><a href="#a-方法无返回值：" class="headerlink" title="a) 方法无返回值："></a>a) 方法无返回值：</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ModelAttribute</span>    </span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">show2</span><span class="params">(Integer id, Map&lt;String, User&gt; userMap)</span> </span>&#123;  </span><br><span class="line">	System.out.println(<span class="string">"show"</span>);     </span><br><span class="line">    <span class="comment">//模拟数据库查询        </span></span><br><span class="line">    User user = <span class="keyword">new</span> User();       </span><br><span class="line">    user.setId(id);        </span><br><span class="line">    user.setAge(<span class="number">20</span>);     </span><br><span class="line">    user.setDate(<span class="keyword">new</span> Date()); </span><br><span class="line">    userMap.put(<span class="string">"a"</span>, user);  </span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/testModelAttribute"</span>) </span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">testModelAttribute</span><span class="params">(@ModelAttribute(<span class="string">"a"</span>)</span> User user)</span>&#123;      </span><br><span class="line">    System.out.println(<span class="string">"AnnotationController-testModelAttribute"</span>);</span><br><span class="line">    System.out.println(cookieValue);   </span><br><span class="line">    System.out.println(user);      </span><br><span class="line">    <span class="keyword">return</span> <span class="string">"success"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h5 id="b-方法有返回值："><a href="#b-方法有返回值：" class="headerlink" title="b) 方法有返回值："></a>b) 方法有返回值：</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ModelAttribute</span>   </span><br><span class="line"><span class="function"><span class="keyword">public</span> User <span class="title">show</span><span class="params">(Integer id)</span> </span>&#123;     </span><br><span class="line">    System.out.println(<span class="string">"show"</span>);    </span><br><span class="line">    <span class="comment">//模拟数据库查询       </span></span><br><span class="line">    User user = <span class="keyword">new</span> User();      </span><br><span class="line">    user.setId(id);      </span><br><span class="line">    user.setAge(<span class="number">20</span>);    </span><br><span class="line">    user.setDate(<span class="keyword">new</span> Date());     </span><br><span class="line">    <span class="keyword">return</span> user;   </span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/testModelAttribute"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">testModelAttribute</span><span class="params">(User user)</span></span>&#123;        </span><br><span class="line">    System.out.println(<span class="string">"AnnotationController-testModelAttribute"</span>);</span><br><span class="line">    <span class="comment">//        System.out.println(cookieValue);   </span></span><br><span class="line">    System.out.println(user);      </span><br><span class="line">    <span class="keyword">return</span> <span class="string">"success"</span>;   </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>




<p><strong>从数据库查询后某些数值（已在前端输入的）会被改为前端输入的。</strong></p>
<p><img src="https://github.com/ZephXu07/IMG/raw/master/attentionModelAttribute.png" alt="注意"></p>
<h3 id="八、SessionAttributes（复数）"><a href="#八、SessionAttributes（复数）" class="headerlink" title="八、SessionAttributes（复数）"></a>八、SessionAttributes（复数）</h3><h4 id="1、作用：-6"><a href="#1、作用：-6" class="headerlink" title="1、作用："></a>1、作用：</h4><p>用于多次执行控制器方法间的参数共享。</p>
<h4 id="2、属性"><a href="#2、属性" class="headerlink" title="2、属性"></a>2、属性</h4><p>value：用于指定存入的属性名称 ；</p>
<p>type：用于指定存入的数据类型。</p>
<h4 id="3、实践："><a href="#3、实践：" class="headerlink" title="3、实践："></a>3、实践：</h4><p>annotation.jsp：</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;%--SessionAttribute--%&gt;</span><br><span class="line">&lt;a href="annotation/testSessionAttributes"&gt;SessionAttribute&lt;/a&gt;&lt;br/&gt;</span><br><span class="line">&lt;!--存入--&gt;</span><br><span class="line">&lt;a href="annotation/getSessionAttributes"&gt;getSessionAttribute&lt;/a&gt;&lt;br/&gt;</span><br><span class="line">&lt;!--取出--&gt;</span><br><span class="line">&lt;a href="annotation/delSessionAttributes"&gt;delSessionAttribute&lt;/a&gt;&lt;br/&gt;</span><br><span class="line">&lt;!--删除--&gt;</span><br></pre></td></tr></table></figure>




<p>success.jsp：</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$&#123;requestScope.get(<span class="string">"phy"</span>)&#125;&lt;br/&gt;</span><br><span class="line">$&#123;phy&#125;&lt;br/&gt;</span><br><span class="line">$&#123;sessionScope.get(<span class="string">"phy"</span>)&#125;&lt;br/&gt;</span><br></pre></td></tr></table></figure>




<ul>
<li><code>@SessionAttributes(value = {&quot;phy&quot;})</code>在类上面标注，可多个，{}中是key</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/testSessionAttributes"</span>) </span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">testSessionAttributes</span><span class="params">(Model model)</span></span>&#123; </span><br><span class="line">    System.out.println(<span class="string">"testSessionAttribute"</span>);   </span><br><span class="line">    <span class="comment">//Model类可降低耦合，底层存储到Request域对象中     </span></span><br><span class="line">    model.addAttribute(<span class="string">"phy"</span>, <span class="string">"xzf"</span>);    </span><br><span class="line">    <span class="keyword">return</span> <span class="string">"success"</span>;   </span><br><span class="line">&#125;   </span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/getSessionAttributes"</span>) </span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">getSessionAttributes</span><span class="params">(ModelMap modelMap)</span></span>&#123;     </span><br><span class="line">    System.out.println(<span class="string">"getSessionAttribute"</span>);</span><br><span class="line">    String info = (String) modelMap.getAttribute(<span class="string">"phy"</span>);  </span><br><span class="line">    <span class="comment">//实现了多次执行控制器方法间的参数共享。    </span></span><br><span class="line">    System.out.println(info);     </span><br><span class="line">    <span class="keyword">return</span> <span class="string">"success"</span>;   </span><br><span class="line">&#125;  </span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/delSessionAttributes"</span>)   </span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">delSessionAttributes</span><span class="params">(SessionStatus status)</span></span>&#123;      </span><br><span class="line">    System.out.println(<span class="string">"delSessionAttribute"</span>);      </span><br><span class="line">    status.setComplete();       </span><br><span class="line">    <span class="comment">//删除session        </span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">"success"</span>;   </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>




<p><img src="https://github.com/ZephXu07/IMG/raw/master/SessionAttributeResult.png" alt="结果"></p>
<h2 id="part5、响应数据和结果视图"><a href="#part5、响应数据和结果视图" class="headerlink" title="part5、响应数据和结果视图"></a>part5、响应数据和结果视图</h2><ul>
<li><p>响应的方式：</p>
<p><img src="https://github.com/ZephXu07/IMG/raw/master/ResponseWays.png" alt="ResponseWays"></p>
</li>
</ul>
<h3 id="一、返回值分类"><a href="#一、返回值分类" class="headerlink" title="一、返回值分类"></a>一、返回值分类</h3><h4 id="1、返回字符串"><a href="#1、返回字符串" class="headerlink" title="1、返回字符串"></a>1、返回字符串</h4><p>Controller方法返回字符串可以指定逻辑视图的名称，根据视图解析器为物理视图的地址。</p>
<p>视图解析器配置：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--视图解析器--&gt;</span>    </span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"internalResourceViewResolver"</span> <span class="attr">class</span>=<span class="string">"org.springframework.web.servlet.view.InternalResourceViewResolver"</span>&gt;</span>      </span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"prefix"</span> <span class="attr">value</span>=<span class="string">"/WEB-INF/pages/"</span>/&gt;</span>   </span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"suffix"</span> <span class="attr">value</span>=<span class="string">".jsp"</span>/&gt;</span>      </span><br><span class="line">    <span class="comment">&lt;!--前后缀连接成页面的文件--&gt;</span>    </span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>




<p><img src="https://github.com/ZephXu07/IMG/raw/master/Pages.png" alt="pages"></p>
<p>UserCtroller：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span><span class="meta">@RequestMapping</span>(<span class="string">"/user"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserController</span> </span>&#123;    </span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"/testString"</span>)  </span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">testString</span><span class="params">(Model model)</span> </span>&#123;    </span><br><span class="line">        System.out.println(<span class="string">"testString"</span>);   </span><br><span class="line">        <span class="comment">//模拟从数据库查找       </span></span><br><span class="line">        User user = <span class="keyword">new</span> User();       </span><br><span class="line">        user.setUsername(<span class="string">"xzf"</span>);     </span><br><span class="line">        user.setPassword(<span class="string">"phy"</span>);      </span><br><span class="line">        user.setAge(<span class="number">20</span>);    </span><br><span class="line">        <span class="comment">//Model对象       </span></span><br><span class="line">        model.addAttribute(<span class="string">"user"</span>, user);      </span><br><span class="line">        <span class="keyword">return</span> <span class="string">"success"</span>;    </span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>




<p>success.jsp：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">"text/html;charset=UTF-8"</span> language=<span class="string">"java"</span> isELIgnored=<span class="string">"false"</span> %&gt;&lt;html&gt;   </span><br><span class="line">    &lt;head&gt;       </span><br><span class="line">    	&lt;title&gt;Success&lt;/title&gt;</span><br><span class="line">    &lt;/head&gt;   </span><br><span class="line">    &lt;body&gt;   </span><br><span class="line">    	&lt;h1&gt;Success&lt;/h1&gt;         </span><br><span class="line">    	$&#123;user.toString()&#125;   </span><br><span class="line">    &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>




<p><img src="https://github.com/ZephXu07/IMG/raw/master/SuccessResult.png" alt="successResult"></p>
<h4 id="2、返回值是void"><a href="#2、返回值是void" class="headerlink" title="2、返回值是void"></a><a href="#2、返回值是void" title="2、返回值是void"></a>2、返回值是void</h4><p>1、如果控制器的方法返回值编写成void，执行程序报404的异常，默认查找JSP页面没有找到，原因是默认会跳转到<code>@RequestMapping(&quot;/testVoid&quot;)</code>中的testVoid.jsp的页面。</p>
<p>2、可以使用请求转发或者重定向跳转到指定的页面，或者直接响应</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/testVoid"</span>)  </span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testVoid</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;      </span><br><span class="line">	System.out.println(<span class="string">"testVoid"</span>);      </span><br><span class="line">    <span class="comment">/*请求转发，不需要编写项目的名称，但是仍需要写部分路径，原因是不返回字符串，  </span></span><br><span class="line"><span class="comment">    视图解析器不会工作，且转发后再执行后续代码，用return 停止     </span></span><br><span class="line"><span class="comment">    */</span>     </span><br><span class="line">	request.getRequestDispatcher(<span class="string">"/WEB-INF/pages/success.jsp"</span>).forward(request, response);    </span><br><span class="line">	<span class="comment">//return;  </span></span><br><span class="line">    <span class="comment">/*            重定向，两次转发，页面需要重新详细写，            </span></span><br><span class="line"><span class="comment">    request.getContextPath()           </span></span><br><span class="line"><span class="comment">    拿到springmvc_day_02_01_response_war_exploded路径，此地方只有Index.jsp     </span></span><br><span class="line"><span class="comment">    */</span>   </span><br><span class="line">	response.sendRedirect(request.getContextPath() + <span class="string">"/index.jsp"</span>);    </span><br><span class="line">    <span class="comment">/*直接响应：浏览器直接发请求，控制器通过输出流直接响应会浏览器   </span></span><br><span class="line"><span class="comment">    设置解决中文乱码*/</span>     </span><br><span class="line">    response.setCharacterEncoding(<span class="string">"UTF-8"</span>);        </span><br><span class="line">    response.setContentType(<span class="string">"text/html;charset=UTF-8"</span>);        </span><br><span class="line">    <span class="comment">//response.setContentType("application/json;charset=utf-8");        </span></span><br><span class="line">    response.getWriter().println(<span class="string">"直接响应"</span>);  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="3-返回值是ModelAndView对象（与返回字符串方式类似）"><a href="#3-返回值是ModelAndView对象（与返回字符串方式类似）" class="headerlink" title="3. 返回值是ModelAndView对象（与返回字符串方式类似）"></a>3. 返回值是ModelAndView对象（与返回字符串方式类似）</h4><p>a)、ModelAndView对象是Spring提供的一个对象，可以用来调整具体的JSP视图</p>
<p>b)、实践</p>
<table>
<col width="50%" />
<col width="50%" />
<tbody>
<tr class="odd">
<td align="left"><pre><code>12345678910111213141516</code></pre></td>
<td align="left"><pre><code>@RequestMapping(&quot;/testModelAndView&quot;)    public ModelAndView testModelAndView() {        System.out.println(&quot;testModelAndView&quot;);        //创建ModelAndView对象        ModelAndView mv = new ModelAndView();        //模拟从数据库查找        User user = new User();        user.setUsername(&quot;phy&quot;);        user.setPassword(&quot;xzf&quot;);        user.setAge(22);        //把user对象存储到mv对象中，也会把user对象存入request域对象        mv.addObject(&quot;user&quot;, user);        //跳转到哪个页面，使用视图解析器        mv.setViewName(&quot;success&quot;);        return mv;    }</code></pre></td>
</tr>
</tbody>
</table>

<p>c)、<strong>注意： 我们在页面上上获取使用的是 requestScope.username<br>取的，所以返回 ModelAndView 类型时，浏 览器跳转只能是请求转发。</strong></p>
<h3 id="二、SpringMVC框架提供的转发和重定向"><a href="#二、SpringMVC框架提供的转发和重定向" class="headerlink" title="二、SpringMVC框架提供的转发和重定向"></a>二、SpringMVC框架提供的转发和重定向</h3><h4 id="1、forward请求转发"><a href="#1、forward请求转发" class="headerlink" title="1、forward请求转发"></a>1、forward请求转发</h4><p>controller方法返回String类型，想进行请求转发也可以编写成</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//请求转发：不使用视图解析器    </span></span><br><span class="line"><span class="keyword">return</span> <span class="string">"forward:/WEB-INF/pages/success.jsp"</span>;</span><br><span class="line"><span class="comment">//相当于“request.getRequestDispatcher("url").forward(request,response)”。</span></span><br><span class="line"><span class="comment">// 使用请求 转发，既可以转发到 jsp，也可以转发到其他的控制器方法。</span></span><br></pre></td></tr></table></figure>



<h4 id="2、redirect重定向"><a href="#2、redirect重定向" class="headerlink" title="2、redirect重定向"></a>2、redirect重定向</h4><p>controller方法返回String类型，想进行重定向也可以编写成</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//重定向：不需要加项目名     </span></span><br><span class="line"><span class="keyword">return</span> <span class="string">"redirect:/index.jsp"</span>;</span><br><span class="line"><span class="comment">//相当于“response.sendRedirect(url)”。需要注意的是，// 如果是重定向到 jsp 页面，则 jsp 页面不 能写在 WEB-INF 目录中，否则无法找到。</span></span><br></pre></td></tr></table></figure>



<h3 id="三、ResponseBody响应json数据"><a href="#三、ResponseBody响应json数据" class="headerlink" title="三、ResponseBody响应json数据"></a>三、ResponseBody响应json数据</h3><h4 id="1、DispatcherServlet"><a href="#1、DispatcherServlet" class="headerlink" title="1、DispatcherServlet"></a>1、DispatcherServlet</h4><p>DispatcherServlet会拦截到所有的资源，导致一个问题就是静态资源（img、css、js）也会被拦截到，从而<br>不能被使用。解决问题就是需要配置静态资源不进行拦截，在springmvc.xml配置文件添加如下配置</p>
<p>a) location元素表示webapp目录下的包下的所有文件</p>
<p>b) mapping元素表示以/static开头的所有请求路径，如/static/a<br>或者/static/a/b</p>
<p>添加配置SpringMVC.xml配置：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 设置静态资源不过滤 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:resources</span> <span class="attr">location</span>=<span class="string">"/css/"</span> <span class="attr">mapping</span>=<span class="string">"/css/**"</span>/&gt;</span> </span><br><span class="line"><span class="comment">&lt;!-- 样式 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:resources</span> <span class="attr">location</span>=<span class="string">"/images/"</span> <span class="attr">mapping</span>=<span class="string">"/images/**"</span>/&gt;</span> </span><br><span class="line"><span class="comment">&lt;!-- 图片 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:resources</span> <span class="attr">location</span>=<span class="string">"/js/"</span> <span class="attr">mapping</span>=<span class="string">"/js/**"</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- javascript --&gt;</span></span><br></pre></td></tr></table></figure>




<p><strong>配置一字不落的不能改变，location少了后面一个/都不能用了！！！</strong></p>
<h4 id="2、使用-RequestBody获取请求体数据（点击查看作用）"><a href="#2、使用-RequestBody获取请求体数据（点击查看作用）" class="headerlink" title="2、使用@RequestBody获取请求体数据（点击查看作用）"></a>2、使用@RequestBody获取请求体数据<a href="#RequestBody">（点击查看作用）</a></h4><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;%--  User: ZephXU  Date: <span class="number">2019</span>/<span class="number">10</span>/<span class="number">10</span>  Time: <span class="number">19</span>:<span class="number">12</span>--%&gt;</span><br><span class="line">&lt;%@ page contentType=<span class="string">"text/html;charset=UTF-8"</span> language=<span class="string">"java"</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">	&lt;head&gt;   </span><br><span class="line">		&lt;title&gt;Response&lt;/title&gt;  </span><br><span class="line">		&lt;script src="js/jquery.min.js"&gt;&lt;/script&gt;   </span><br><span class="line">		&lt;script&gt;      </span><br><span class="line">            <span class="comment">//页面加载，绑定单击事件       </span></span><br><span class="line">            $(function () &#123;          </span><br><span class="line">                $(<span class="string">"#btn"</span>).click(function () &#123;    </span><br><span class="line">                alert(<span class="string">"hello button"</span>)          </span><br><span class="line">                &#125;)      </span><br><span class="line">            &#125;)  </span><br><span class="line">        &lt;/script&gt;</span><br><span class="line">	&lt;/head&gt;</span><br><span class="line">	&lt;body&gt;  </span><br><span class="line">		&lt;button id="btn"&gt;发送ajax请求&lt;/button&gt;</span><br><span class="line">	&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>




<p>UserController.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//模拟异步请求响应   </span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/testAjax"</span>)   </span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">testAjax</span><span class="params">(@RequestBody String body)</span> </span>&#123;    </span><br><span class="line">	System.out.println(<span class="string">"testAjax"</span>);       </span><br><span class="line">    System.out.println(body);      </span><br><span class="line">    <span class="keyword">return</span> <span class="string">"success"</span>;   </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><strong>无任何响应！<a href="#dispatcherServlet">原因</a></strong></p>
<h4 id="3、使用-RequestBody注解把json的字符串转换成JavaBean的对象"><a href="#3、使用-RequestBody注解把json的字符串转换成JavaBean的对象" class="headerlink" title="3、使用@RequestBody注解把json的字符串转换成JavaBean的对象"></a>3、使用@RequestBody注解把json的字符串转换成JavaBean的对象</h4><h4 id="4、使用-ResponseBody注解把JavaBean对象转换成json字符串，直接响应"><a href="#4、使用-ResponseBody注解把JavaBean对象转换成json字符串，直接响应" class="headerlink" title="4、使用@ResponseBody注解把JavaBean对象转换成json字符串，直接响应"></a>4、使用@ResponseBody注解把JavaBean对象转换成json字符串，直接响应</h4><p>a)<br>作用：该注解用于将Controller的方法返回的对象，通过HttpMessageConverter接口转换为指定格式的<br>数据如：json,xml 等，通过 Response 响应给客户端</p>
<p>b) <strong>Springmvc 默认用 MappingJacksonHttpMessageConverter 对 json<br>数据进行转换，需要加入jackson 的包。</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/com.fasterxml.jackson.core/jackson-databind --&gt;</span>    </span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span>      </span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-databind<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span>      </span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;jackson.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span>   </span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span>   </span><br><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/com.fasterxml.jackson.core/jackson-annotations --&gt;</span>    </span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span>     </span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-annotations<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span>     </span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;jackson.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span>   </span><br><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/com.fasterxml.jackson.core/jackson-core --&gt;</span>    </span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span>   </span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span>   </span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;jackson.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>



<p><code>${jackson.version}</code>前文已写。</p>
<p>c) response.jsp：<strong>按钮方法改变！！！</strong></p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;        </span><br><span class="line"><span class="comment">//页面加载，绑定单击事件    </span></span><br><span class="line">$(function () &#123;       </span><br><span class="line">	$(<span class="string">"#btn"</span>).click(function () &#123;       </span><br><span class="line">		alert(<span class="string">"看控制台"</span>);            </span><br><span class="line">		<span class="comment">//编写json格式，设置属性和值       </span></span><br><span class="line">		$.ajax(&#123;               </span><br><span class="line">			url:<span class="string">"user/testAjax"</span>,              </span><br><span class="line">			contentType:<span class="string">"application/json;charset=UTF-8"</span>,                    				data:<span class="string">'&#123;"username":"phy","password":"phy","age":22&#125;'</span>,                    			dataType:<span class="string">"json"</span>,              </span><br><span class="line">			type:<span class="string">"post"</span>,                 </span><br><span class="line">			success:function (data) &#123;       </span><br><span class="line">				<span class="comment">//data服务器端响应的json的数据，进行解析        </span></span><br><span class="line">				alert(data + <span class="string">"\n"</span> + data.username + <span class="string">"\n"</span></span><br><span class="line">                    + data.password + <span class="string">"\n"</span></span><br><span class="line">                    + data.age); </span><br><span class="line">				&#125;         </span><br><span class="line">			&#125;)     </span><br><span class="line">	&#125;);  </span><br><span class="line">&#125;);  </span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>




<p>d) UserController.java新的控制方法：</p>
<ul>
<li>把json的字符串转换成JavaBean的对象</li>
<li>方法需要返回JavaBean的对象</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//模拟异步请求响应   </span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/testAjax"</span>)  </span><br><span class="line"><span class="keyword">public</span> <span class="meta">@ResponseBody</span> <span class="function">User <span class="title">testAjax</span><span class="params">(@RequestBody User user)</span> </span>&#123;        </span><br><span class="line">    System.out.println(<span class="string">"testAjax"</span>);  </span><br><span class="line">    <span class="comment">//客户端发送Ajax请求，传的是json字符串，后端把json字符串封装到user对象中        </span></span><br><span class="line">    System.out.println(user);      </span><br><span class="line">    <span class="comment">//做响应，模拟查询数据库，与客户端传来数据少许不同   </span></span><br><span class="line">    user.setUsername(<span class="string">"xzf"</span>);       </span><br><span class="line">    user.setPassword(<span class="string">"xzf"</span>);       </span><br><span class="line">    user.setAge(<span class="number">19</span>);      </span><br><span class="line">    <span class="comment">//做响应，返回新的数据    </span></span><br><span class="line">    <span class="keyword">return</span> user;    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>




<p>e) 结果：</p>
<p><img src="https://github.com/ZephXu07/IMG/raw/master/JsonResult1.png" alt="result1"></p>
<p><img src="https://github.com/ZephXu07/IMG/raw/master/JsonResult2.png" alt="result2"></p>
<p><img src="https://github.com/ZephXu07/IMG/raw/master/JsonResult3.png" alt="result3"></p>
<h2 id="part6、SpringMVC实现文件上传"><a href="#part6、SpringMVC实现文件上传" class="headerlink" title="part6、SpringMVC实现文件上传"></a>part6、SpringMVC实现文件上传</h2><h3 id="1、传统文件上传的回顾"><a href="#1、传统文件上传的回顾" class="headerlink" title="1、传统文件上传的回顾"></a>1、传统文件上传的回顾</h3><h4 id="a-、必要前提"><a href="#a-、必要前提" class="headerlink" title="a)、必要前提"></a>a)、必要前提</h4><p>i)、form 表单的 enctype 取值必须是：<strong>multipart/form-data</strong></p>
<p>(默认值是:<strong>application/x-www-form-urlencoded</strong>，即以键值对形式：<code>username=xzf&amp;passwprd=10709991</code>)<br> enctype:是表单请求正文的类型<br> ii)、method 属性取值必须是 Post ，Get会写在地址栏，大小有限</p>
<p>iii)、提供一个文件选择域```</p>
<h4 id="b-、原理分析"><a href="#b-、原理分析" class="headerlink" title="b)、原理分析"></a>b)、原理分析</h4><p>当 form 表单的 enctype 取值不是默认值后，request.getParameter()将失效。<br>enctype=”application/x-www-form-urlencoded”时，form 表单的正文内容是：<br>key=value&amp;key=value&amp;key=value<br>当 form 表单的 enctype 取值为 Mutilpart/form-data<br>时，请求正文内容就变成：每一部分都是 MIME 类型描述的正文</p>
<p>—————————–7de1a433602ac 分界符<br> Content-Disposition: form-data; name=”userName” 协议头</p>
<p>aaa<br> —————————–7de1a433602ac 协议的正文</p>
<p>Content-Disposition: form-data;<br>filename=”C:\Users\zhy\Desktop\fileupload_demofile\b.txt”</p>
<p>Content-Type: text/plain 协议的类型（MIME 类型）<br> bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb</p>
<p>—————————–7de1a433602ac–</p>
<h4 id="c-、借助第三方组件实现文件上传"><a href="#c-、借助第三方组件实现文件上传" class="headerlink" title="c)、借助第三方组件实现文件上传"></a>c)、借助第三方组件实现文件上传</h4><p>使用 Commons-fileupload 组件实现文件上传，需要导入该组件相应的支撑 jar<br>包：Commons-fileupload 和commons-io。commons-io<br>不属于文件上传组件的开发jar 文件，但Commons-fileupload 组件从1.1<br>版本开始，它 工作时需要 commons-io 包的支持。</p>
<h4 id="d-、代码："><a href="#d-、代码：" class="headerlink" title="d)、代码："></a>d)、代码：</h4><p>文件上传的JSP页面：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;%--  User: ZephXU  Date: <span class="number">2019</span>/<span class="number">10</span>/<span class="number">12</span>  Time: <span class="number">19</span>:<span class="number">00</span>--%&gt;</span><br><span class="line">&lt;%@ page contentType=<span class="string">"text/html;charset=UTF-8"</span> language=<span class="string">"java"</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">	&lt;head&gt; </span><br><span class="line">		&lt;title&gt;文件上传&lt;/title&gt;</span><br><span class="line">    &lt;/head&gt;</span><br><span class="line">	&lt;body&gt;</span><br><span class="line">		&lt;h1&gt;文件上传&lt;/h1&gt;</span><br><span class="line">		&lt;form action=<span class="string">"user/fileUpload0"</span> method=<span class="string">"post"</span> enctype=<span class="string">"multipart/form-data"</span>&gt;  </span><br><span class="line">            选择上传文件：&lt;input type=<span class="string">"file"</span> name=<span class="string">"upload"</span>/&gt;&lt;br/&gt;  </span><br><span class="line">            &lt;input type=<span class="string">"submit"</span> value=<span class="string">"上传"</span>&gt;</span><br><span class="line">		&lt;/form&gt;</span><br><span class="line">	&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>




<p>文件上传的Controller控制器：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/user"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserController</span> </span>&#123;  </span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"/fileUpload0"</span>)    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">fileUpload0</span><span class="params">(HttpServletRequest request)</span> <span class="keyword">throws</span> Exception </span>&#123; </span><br><span class="line">        System.out.println(<span class="string">"fileUpload0"</span>);      </span><br><span class="line">        <span class="comment">//使用fileupload组件完成文件上传    </span></span><br><span class="line">        <span class="comment">//上传的位置     </span></span><br><span class="line">        String path =request.getSession().getServletContext().getRealPath(<span class="string">"/uploads/"</span>);   </span><br><span class="line">        <span class="comment">//判断该路径是否存在    </span></span><br><span class="line">        File file = <span class="keyword">new</span> File(path);      </span><br><span class="line">        <span class="keyword">if</span> (!file.exists()) &#123;        </span><br><span class="line">            <span class="comment">//创建该文件夹            </span></span><br><span class="line">            file.mkdirs();      </span><br><span class="line">        &#125;        </span><br><span class="line">        <span class="comment">//解析request对象，获取上传文件项     </span></span><br><span class="line">        DiskFileItemFactory factory = <span class="keyword">new</span> DiskFileItemFactory();     </span><br><span class="line">        ServletFileUpload upload = <span class="keyword">new</span> ServletFileUpload(factory); </span><br><span class="line">        <span class="comment">//解析request       </span></span><br><span class="line">        List&lt;FileItem&gt; items = upload.parseRequest(request);   </span><br><span class="line">        <span class="comment">//遍历      </span></span><br><span class="line">        <span class="keyword">for</span> (FileItem item: items) &#123;     </span><br><span class="line">            <span class="keyword">if</span> (!item.isFormField()) &#123;        </span><br><span class="line">                <span class="comment">//不是普通表单，文件            </span></span><br><span class="line">                <span class="comment">//获取文件名称          </span></span><br><span class="line">                String fileName  = item.getName();         </span><br><span class="line">                <span class="comment">//fileName带盘符，在创建新文件因与path的所在盘可能          </span></span><br><span class="line">                <span class="comment">// 不同造成bug：文件名、目录名或卷标语法不正确。      </span></span><br><span class="line">                String fileTrueName = fileName.substring(fileName.lastIndexOf(<span class="string">"\\"</span>)+<span class="number">1</span>);      </span><br><span class="line">                <span class="comment">//获得单纯文件名              </span></span><br><span class="line">                <span class="comment">//把文件名称设置为唯一值，UUID         </span></span><br><span class="line">                String uuid = UUID.randomUUID().toString().replace(<span class="string">"-"</span>, <span class="string">""</span>);                </span><br><span class="line">                fileTrueName = uuid + <span class="string">"_"</span> + fileTrueName;        </span><br><span class="line">                <span class="comment">//完成文件上传                </span></span><br><span class="line">                item.write(<span class="keyword">new</span> File(path, fileTrueName));        </span><br><span class="line">                <span class="comment">//删除临时文件，上传文件大小大于10KB产生临时文件，小于10KB则在内存中生成缓存文件              </span></span><br><span class="line">                item.delete();    </span><br><span class="line">            &#125;     </span><br><span class="line">        &#125;   </span><br><span class="line">        <span class="keyword">return</span> <span class="string">"success"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>




<p><strong>BUG：文件名、目录名或卷标语法不正确。</strong></p>
<p><strong>原因：fileName带盘符，在创建新文件因与path的所在盘可能不同造成bug。</strong></p>
<p><a href="https://www.iteye.com/blog/rogerfederer-1039666" target="_blank" rel="noopener">解决方案</a></p>
<h3 id="2、SpringMVC传统方式文件上传"><a href="#2、SpringMVC传统方式文件上传" class="headerlink" title="2、SpringMVC传统方式文件上传"></a>2、SpringMVC传统方式文件上传</h3><p>a)、SpringMVC框架提供了MultipartFile对象，该对象表示上传的文件，<strong>要求变量名称必须和表单file标签的<br>name属性名称相同。</strong></p>
<p>b)、原理图：<strong>图中注意事项</strong></p>
<p><img src="https://github.com/ZephXu07/IMG/raw/master/SpringMVCUpload.png" alt="原理图"></p>
<p>c)、配置文件解析器对象</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--配置文件解析器对象，id必须是multipartResolver--&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"multipartResolver"</span> <span class="attr">class</span>=<span class="string">"org.springframework.web.multipart.commons.CommonsMultipartResolver"</span>&gt;</span>   </span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"maxUploadSize"</span> <span class="attr">value</span>=<span class="string">"10485760"</span>/&gt;</span>     </span><br><span class="line">	<span class="comment">&lt;!--文件上传最大大小单位字节：10*1024*1024--&gt;</span>   </span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>




<p>d)、Controller方法（只是改变些许）：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/fileUpload1"</span>)   </span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">fileUpload1</span><span class="params">(HttpServletRequest request, MultipartFile upload)</span> <span class="keyword">throws</span> Exception </span>&#123;      </span><br><span class="line">    <span class="comment">//注意upload需要和表单的文件上传的name一样      </span></span><br><span class="line">    System.out.println(<span class="string">"fileUpload1"</span>);     </span><br><span class="line">    <span class="comment">//使用fileupload组件完成文件上传      </span></span><br><span class="line">    <span class="comment">//上传的位置     </span></span><br><span class="line">    String path = request.getSession().getServletContext().getRealPath(<span class="string">"/uploads/"</span>);   </span><br><span class="line">    <span class="comment">//判断该路径是否存在     </span></span><br><span class="line">    File file = <span class="keyword">new</span> File(path);     </span><br><span class="line">    <span class="keyword">if</span> (!file.exists()) &#123;      </span><br><span class="line">        <span class="comment">//创建该文件夹        </span></span><br><span class="line">        file.mkdirs();      </span><br><span class="line">    &#125;       </span><br><span class="line">    <span class="comment">//获取文件名称     </span></span><br><span class="line">    String fileName  = upload.getOriginalFilename();   </span><br><span class="line">    <span class="comment">//把文件名称设置为唯一值，UUID    </span></span><br><span class="line">    String uuid = UUID.randomUUID().toString().replace(<span class="string">"-"</span>, <span class="string">""</span>);   </span><br><span class="line">    fileName = uuid + <span class="string">"_"</span> + fileName;       </span><br><span class="line">    <span class="comment">//完成文件上传       </span></span><br><span class="line">    upload.transferTo(<span class="keyword">new</span> File(path, fileName)); </span><br><span class="line">    <span class="keyword">return</span> <span class="string">"success"</span>;   </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="3、SpringMVC跨服务器方式文件上传"><a href="#3、SpringMVC跨服务器方式文件上传" class="headerlink" title="3、SpringMVC跨服务器方式文件上传"></a>3、SpringMVC跨服务器方式文件上传</h3><h4 id="1、搭建图片服务器："><a href="#1、搭建图片服务器：" class="headerlink" title="1、搭建图片服务器："></a>1、搭建图片服务器：</h4><p>a)、分服务器的目的：</p>
<p>在实际开发中，我们会有很多处理不同功能的服务器。例如：</p>
<p>应用服务器：负责部署我们的应用</p>
<p>数据库服务器：运行我们的数据库<br> 缓存和消息服务器：负责处理大并发访问的缓存和消息</p>
<p>文件服务器：负责存储用户上传文件的服务器。</p>
<p>(注意：此处说的不是服务器集群）</p>
<p>分服务器处理的目的是让服务器各司其职，从而提高我们项目的运行效率。</p>
<p><img src="https://github.com/ZephXu07/IMG/raw/master/FileUploadsAcrossServers.png" alt="FileUploadsAcrossServers"></p>
<p><img src="https://github.com/ZephXu07/IMG/raw/master/PurposeOfSub-server.png" alt="Purpose of
sub-server"></p>
<p>b)、再创建 tomcat 服务器，并创建一个用于存放图片的 web工程：</p>
<p>如图：</p>
<p><img src="https://github.com/ZephXu07/IMG/raw/master/FileServerStructure.png" alt="FileServer"></p>
<p>在<strong>apache-tomcat-8.5.40\conf目录下的web.xml加入内容：</strong></p>
<p><img src="https://github.com/ZephXu07/IMG/raw/master/AddTheConfiguration.png" alt="Configuration"></p>
<p><strong>bug：com.sun.jersey.api.client.UniformInterfaceException: PUT<br><a href="http://localhost:9090/fileuploadserver_war_exploded/uploads/04694da7a10a4a98b68690ad6426a120_ShowUserAgent.html" target="_blank" rel="noopener">http://localhost:9090/fileuploadserver_war_exploded/uploads/04694da7a10a4a98b68690ad6426a120_ShowUserAgent.html</a><br>returned a response status of 409 Conflict</strong></p>
<p><strong>原因：项目的target目录下没有存储上传文件的目录，如<a href="#uploads">上图</a></strong></p>
<p><a href="https://blog.csdn.net/Java_3y/article/details/84908247" target="_blank" rel="noopener">参考博客</a></p>
<h4 id="2、实现SpringMVC跨服务器方式文件上传"><a href="#2、实现SpringMVC跨服务器方式文件上传" class="headerlink" title="2、实现SpringMVC跨服务器方式文件上传"></a>2、实现SpringMVC跨服务器方式文件上传</h4><p>a)、导入开发需要的jar包</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span>    </span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.sun.jersey<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span>   </span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jersey-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span>      </span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.18.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span>   </span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.sun.jersey<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jersey-client<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span>    </span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.18.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>




<p>b)、编写文件上传的JSP页面</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;h1&gt;SpringMVC跨服务器文件上传&lt;/h1&gt;</span><br><span class="line">&lt;form action=<span class="string">"user/fileUpload2"</span> method=<span class="string">"post"</span> enctype=<span class="string">"multipart/form-data"</span>&gt;  </span><br><span class="line">    选择上传文件：&lt;input type=<span class="string">"file"</span> name=<span class="string">"upload"</span>/&gt;&lt;br/&gt; </span><br><span class="line">    &lt;input type=<span class="string">"submit"</span> value=<span class="string">"上传"</span>&gt;</span><br><span class="line">&lt;/form&gt;</span><br></pre></td></tr></table></figure>




<p>c)、编写控制器</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/fileUpload2"</span>) </span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">fileUpload2</span><span class="params">(MultipartFile upload)</span> <span class="keyword">throws</span> Exception </span>&#123;    </span><br><span class="line">    System.out.println(<span class="string">"fileUpload2"</span>);   </span><br><span class="line">    <span class="comment">//定义上传文件服务器路径    </span></span><br><span class="line">    String path = <span class="string">"http://localhost:9090/fileuploadserver_war_exploded/uploads/"</span>;   </span><br><span class="line">    <span class="comment">//获取文件名称     </span></span><br><span class="line">    String fileName  = upload.getOriginalFilename();      </span><br><span class="line">    <span class="comment">//把文件名称设置为唯一值，UUID      </span></span><br><span class="line">    String uuid = UUID.randomUUID().toString().replace(<span class="string">"-"</span>, <span class="string">""</span>);    </span><br><span class="line">    fileName = uuid + <span class="string">"_"</span> + fileName;     </span><br><span class="line">    <span class="comment">//完成文件跨服务器上传           </span></span><br><span class="line">    <span class="comment">//创建客户端对象     </span></span><br><span class="line">    Client client = Client.create();      </span><br><span class="line">    <span class="comment">//和图片服务器进行连接   </span></span><br><span class="line">    WebResource webResource = client.resource(path + fileName);       </span><br><span class="line">    <span class="comment">//上传        </span></span><br><span class="line">    webResource.put(upload.getBytes());     </span><br><span class="line">    <span class="keyword">return</span> <span class="string">"success"</span>;   </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>




<h2 id="part7、SpringMVC的异常处理"><a href="#part7、SpringMVC的异常处理" class="headerlink" title="part7、SpringMVC的异常处理"></a>part7、SpringMVC的异常处理</h2><h3 id="1、异常处理思路"><a href="#1、异常处理思路" class="headerlink" title="1、异常处理思路"></a>1、异常处理思路</h3><p>系统中异常包括两类：预期异常和运行时异常RuntimeException，前者通过捕获异常从而获取异常信息，<br>后者主要通过规范代码开发、测试通过手段减少运行时异常的发生。</p>
<p>系统的 dao、service、controller 出现都通过 throws Exception<br>向上抛出，最后由 springmvc 前端控制器交由异常处理器进行异常处理，如下图：</p>
<p><img src="https://github.com/ZephXu07/IMG/raw/master/SpringMVCExceptionHandler.png" alt="SpringMVCExceptionHandler"></p>
<h3 id="2、SpringMVC的异常处理"><a href="#2、SpringMVC的异常处理" class="headerlink" title="2、SpringMVC的异常处理"></a>2、SpringMVC的异常处理</h3><h5 id="a-、不进行处理："><a href="#a-、不进行处理：" class="headerlink" title="a)、不进行处理："></a>a)、不进行处理：</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/testException"</span>)  </span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">testException</span><span class="params">()</span> <span class="keyword">throws</span> Exception</span>&#123; </span><br><span class="line">    System.out.println(<span class="string">"testException"</span>);     </span><br><span class="line">    <span class="comment">//模拟异常      </span></span><br><span class="line">    <span class="keyword">int</span> exception = <span class="number">1</span> / <span class="number">0</span>;   </span><br><span class="line">    <span class="keyword">return</span> <span class="string">"success"</span>;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>




<p><img src="https://github.com/ZephXu07/IMG/raw/master/DontHandleException.png" alt="Don&#39;t handle
exception"></p>
<h5 id="b-、异常处理"><a href="#b-、异常处理" class="headerlink" title="b)、异常处理"></a>b)、异常处理</h5><h6 id="i-、自定义异常类：继承Exception"><a href="#i-、自定义异常类：继承Exception" class="headerlink" title="i)、自定义异常类：继承Exception"></a>i)、自定义异常类：继承Exception</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SystemException</span> <span class="keyword">extends</span> <span class="title">Exception</span> </span>&#123;     </span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">SystemException</span><span class="params">(String message)</span> </span>&#123;     </span><br><span class="line">		<span class="keyword">this</span>.message = message;  </span><br><span class="line">	&#125;   </span><br><span class="line">	<span class="comment">/**     * 存储提示信息     */</span>  </span><br><span class="line">	<span class="keyword">private</span> String message;  </span><br><span class="line">	<span class="meta">@Override</span>   </span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getMessage</span><span class="params">()</span> </span>&#123;    </span><br><span class="line">		<span class="keyword">return</span> message;   </span><br><span class="line">	&#125;    </span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setMessage</span><span class="params">(String message)</span> </span>&#123; </span><br><span class="line">		<span class="keyword">this</span>.message = message; </span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h6 id="ii-、自定义异常处理器"><a href="#ii-、自定义异常处理器" class="headerlink" title="ii)、自定义异常处理器"></a>ii)、自定义异常处理器</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SystemExceptionResolver</span> <span class="keyword">implements</span> <span class="title">HandlerExceptionResolver</span> </span>&#123;   </span><br><span class="line"><span class="comment">/**    </span></span><br><span class="line"><span class="comment">* Controller抛出异常，前端控制器调用异常处理器，此方法将会执行 </span></span><br><span class="line"><span class="comment">* 此方法作用为处理异常业务逻辑  </span></span><br><span class="line"><span class="comment">* <span class="doctag">@param</span> httpServletRequest 请求   </span></span><br><span class="line"><span class="comment">* <span class="doctag">@param</span> httpServletResponse 响应    </span></span><br><span class="line"><span class="comment">* <span class="doctag">@param</span> o 处理器对象   </span></span><br><span class="line"><span class="comment">* <span class="doctag">@param</span> e controller抛出的异常对象    </span></span><br><span class="line"><span class="comment">* <span class="doctag">@return</span> ModelAndView对象    </span></span><br><span class="line"><span class="comment">*/</span>   </span><br><span class="line"><span class="meta">@Override</span>    </span><br><span class="line"><span class="function"><span class="keyword">public</span> ModelAndView <span class="title">resolveException</span><span class="params">(HttpServletRequest httpServletRequest, HttpServletResponse httpServletResponse, Object o, Exception e)</span> </span>&#123;      </span><br><span class="line">	SystemException se = <span class="keyword">null</span>;     </span><br><span class="line">	<span class="keyword">if</span> (e <span class="keyword">instanceof</span> SystemException) &#123; </span><br><span class="line">		<span class="comment">//如果抛出的是系统自定义异常则直接转换    </span></span><br><span class="line">		se = (SystemException) e;   </span><br><span class="line">	&#125; <span class="keyword">else</span> &#123;        </span><br><span class="line">		<span class="comment">//如果抛出的不是系统自定义异常则重新构造一个系统错误异常。 </span></span><br><span class="line">		se = <span class="keyword">new</span> SystemException(<span class="string">"系统正在维护……"</span>);   </span><br><span class="line">	&#125;     </span><br><span class="line">	<span class="comment">//创建ModelAndView对象  </span></span><br><span class="line">	ModelAndView mv = <span class="keyword">new</span> ModelAndView();     </span><br><span class="line">	mv.addObject(<span class="string">"errorMsg"</span>, se.getMessage());       </span><br><span class="line">	mv.setViewName(<span class="string">"error"</span>);       </span><br><span class="line">	<span class="keyword">return</span> mv;  </span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h6 id="iii-、配置异常处理器"><a href="#iii-、配置异常处理器" class="headerlink" title="iii)、配置异常处理器"></a>iii)、配置异常处理器</h6><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--配置异常处理器--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"systemExceptionResolver"</span> <span class="attr">class</span>=<span class="string">"com.zephxu.exception.SystemExceptionResolver"</span>/&gt;</span></span><br></pre></td></tr></table></figure>



<h6 id="iv-、结果"><a href="#iv-、结果" class="headerlink" title="iv)、结果"></a>iv)、结果</h6><p><img src="https://github.com/ZephXu07/IMG/raw/master/HandleExceptionResult.png" alt="HandleExceptionResult"></p>
<h2 id="part8、SpringMVC框架中的拦截器"><a href="#part8、SpringMVC框架中的拦截器" class="headerlink" title="part8、SpringMVC框架中的拦截器"></a>part8、SpringMVC框架中的拦截器</h2><h3 id="1、拦截器的概述"><a href="#1、拦截器的概述" class="headerlink" title="1、拦截器的概述"></a>1、拦截器的概述</h3><p>a)、SpringMVC框架中的拦截器用于<strong>对处理器进行预处理和后处理</strong>的技术。</p>
<p>b)、可以定义拦截器链，拦截器链就是将拦截器按着一定的顺序结成一条链，在访问被拦截的方法时，拦截器链中的拦截器会按着定义的顺序执行。</p>
<p>c)、拦截器和过滤器的功能比较类似，有区别</p>
<p> i)、过滤器是Servlet规范的一部分，任何框架都可以使用过滤器技术。</p>
<p> ii)、拦截器是SpringMVC框架独有的。</p>
<p> iii)、过滤器配置了/*，可以拦截任何资源。</p>
<p>iv)、<strong>拦截器只会对控制器中的方法进行拦截，如果访问的是jsp，html，css，image<br>或者 js是不会进行拦截的。</strong></p>
<p> v)、拦截器也是AOP思想的一种实现方式 。</p>
<p> vi)、想要自定义拦截器，需要实现HandlerInterceptor接口。</p>
<p><img src="https://github.com/ZephXu07/IMG/raw/master/Interceptor.png" alt="Interceptor"></p>
<h3 id="2、自定义拦截器步骤"><a href="#2、自定义拦截器步骤" class="headerlink" title="2、自定义拦截器步骤"></a>2、自定义拦截器步骤</h3><p>a)、创建类，实现HandlerInterceptor接口，重写需要的方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyInterceptor</span> <span class="keyword">implements</span> <span class="title">HandlerInterceptor</span> </span>&#123;   </span><br><span class="line"><span class="comment">/**     </span></span><br><span class="line"><span class="comment">* 预处理，controller方法执行前     </span></span><br><span class="line"><span class="comment">* <span class="doctag">@param</span> request     </span></span><br><span class="line"><span class="comment">* <span class="doctag">@param</span> response 不放行时使用转发或者重定向可跳转某页面或怎样处理     </span></span><br><span class="line"><span class="comment">* <span class="doctag">@param</span> handler    </span></span><br><span class="line"><span class="comment">* <span class="doctag">@return</span> true：放行，执行下一个拦截器，没有则执行controller     </span></span><br><span class="line"><span class="comment">* false：不放行     </span></span><br><span class="line"><span class="comment">* <span class="doctag">@throws</span> Exception     </span></span><br><span class="line"><span class="comment">*/</span>    </span><br><span class="line">	<span class="meta">@Override</span>    </span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">preHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler)</span> <span class="keyword">throws</span> Exception </span>&#123;   </span><br><span class="line">        System.out.println(<span class="string">"MyInterceptor执行了"</span>);    </span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;   </span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>




<p>b)、在springmvc.xml中配置拦截器类</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--配置拦截器--&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:interceptors</span>&gt;</span>      </span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:interceptor</span>&gt;</span>   </span><br><span class="line"><span class="comment">&lt;!--要拦截的具体方法，除此外不拦截--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:mapping</span> <span class="attr">path</span>=<span class="string">"/user/*"</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!--“/**”拦截全部，其他类似--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--            </span></span><br><span class="line"><span class="comment">&lt;mvc:exclude-mapping path=""/&gt;&amp;lt;!&amp;ndash;不要拦截的具体方法，除此外拦截&amp;ndash;&amp;gt;</span></span><br><span class="line"><span class="comment">--&gt;</span>           </span><br><span class="line"><span class="comment">&lt;!--配置拦截器对象--&gt;</span>     </span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"com.zephxu.interceptor.MyInterceptor"</span>/&gt;</span>        </span><br><span class="line"><span class="tag">&lt;/<span class="name">mvc:interceptor</span>&gt;</span>    </span><br><span class="line"><span class="tag">&lt;/<span class="name">mvc:interceptors</span>&gt;</span></span><br></pre></td></tr></table></figure>




<p>c)、结果：</p>
<p><img src="https://github.com/ZephXu07/IMG/raw/master/InterceptorResult.png" alt="Interceptor
Result"></p>
<h3 id="3、HandlerInterceptor接口中的方法"><a href="#3、HandlerInterceptor接口中的方法" class="headerlink" title="3、HandlerInterceptor接口中的方法"></a>3、HandlerInterceptor接口中的方法</h3><p>a)、preHandle方法是controller方法执行前拦截的方法</p>
<p> i) 可以使用request或者response跳转到指定的页面 （<strong>若return<br>true，controller方法跳转的页面将不会显示</strong>）</p>
<p><code>request.getRequestDispatcher(&quot;/WEB-INF/pages/error.jsp&quot;).forward(request, response);</code></p>
<p> ii) return<br>true放行，执行下一个拦截器，如果没有拦截器，执行controller中的方法。</p>
<p> iii) return false不放行，不会执行controller中的方法。</p>
<p>b)、postHandle是controller方法执行后执行的方法，在JSP视图执行前。</p>
<p> i) 可以使用request或者response跳转到指定的页面</p>
<p> ii)<br>如果指定了跳转的页面，那么controller方法跳转的页面将不会显示。（jsp代表的java类还是会执行）</p>
<p>c) afterCompletion方法是在JSP执行后执行</p>
<ul>
<li>request或者response不能再跳转页面了</li>
</ul>
<h3 id="4、配置多个拦截器"><a href="#4、配置多个拦截器" class="headerlink" title="4、配置多个拦截器"></a>4、配置多个拦截器</h3><ul>
<li>执行顺序</li>
</ul>
<p><img src="https://github.com/ZephXu07/IMG/raw/master/InterceptorExecutionProcess.png" alt="InterceptorExecutionProcess"></p>
<ul>
<li><strong>多个拦截器是按照配置的顺序决定的。</strong></li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--配置拦截器--&gt;</span>   </span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:interceptors</span>&gt;</span>   </span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:interceptor</span>&gt;</span>  </span><br><span class="line"><span class="comment">&lt;!--要拦截的具体方法，除此外不拦截--&gt;</span>     </span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:mapping</span> <span class="attr">path</span>=<span class="string">"/user/*"</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!--“/**”拦截全部，其他类似--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--            </span></span><br><span class="line"><span class="comment">&lt;mvc:exclude-mapping path=""/&gt;&amp;lt;!&amp;ndash;不要拦截的具体方法，除此外拦截&amp;ndash;&amp;gt;--&gt;</span>           </span><br><span class="line"><span class="comment">&lt;!--配置拦截器对象--&gt;</span>        </span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"com.zephxu.interceptor.MyInterceptor"</span>/&gt;</span>    </span><br><span class="line"><span class="tag">&lt;/<span class="name">mvc:interceptor</span>&gt;</span>       </span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:interceptor</span>&gt;</span>    </span><br><span class="line"><span class="comment">&lt;!--要拦截的具体方法，除此外不拦截--&gt;</span>        </span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:mapping</span> <span class="attr">path</span>=<span class="string">"/**"</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!--“/**”拦截全部，其他类似--&gt;</span>   </span><br><span class="line"><span class="comment">&lt;!--            &lt;mvc:exclude-mapping path=""/&gt;&amp;lt;!&amp;ndash;不要拦截的具体方法，除此外拦截&amp;ndash;&amp;gt;--&gt;</span>       </span><br><span class="line"><span class="comment">&lt;!--配置拦截器对象--&gt;</span>     </span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"com.zephxu.interceptor.MyInterceptor2"</span>/&gt;</span>     </span><br><span class="line"><span class="tag">&lt;/<span class="name">mvc:interceptor</span>&gt;</span>    </span><br><span class="line"><span class="tag">&lt;/<span class="name">mvc:interceptors</span>&gt;</span></span><br></pre></td></tr></table></figure>




<ul>
<li><p>结果：</p>
<p><img src="https://github.com/ZephXu07/IMG/raw/master/TwoInterceptors.png" alt="TwoInterceptors"></p>
</li>
</ul>
<h3 id="part9、SpringMVC暂告一段落……未完待续……"><a href="#part9、SpringMVC暂告一段落……未完待续……" class="headerlink" title="part9、SpringMVC暂告一段落……未完待续……"></a>part9、SpringMVC暂告一段落……未完待续……</h3>
    </div>

    
    
    
        <div class="reward-container">
  <div>谢谢你请我吃糖果！</div>
  <button onclick="var qr = document.getElementById('qr'); qr.style.display = (qr.style.display === 'none') ? 'block' : 'none';">
    打赏
  </button>
  <div id="qr" style="display: none;">
      
      <div style="display: inline-block;">
        <img src="/images/wechatpay.png" alt="zephxu 微信支付">
        <p>微信支付</p>
      </div>
      
      <div style="display: inline-block;">
        <img src="/images/alipay.png" alt="zephxu 支付宝">
        <p>支付宝</p>
      </div>

  </div>
</div>


      <footer class="post-footer">

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2020/01/24/%E7%99%BE%E6%84%9F%E4%B9%B1%E8%AE%B0/" rel="prev" title="百感乱记">
      <i class="fa fa-chevron-left"></i> 百感乱记
    </a></div>
      <div class="post-nav-item">
    <a href="/2020/02/14/Linux-Notes/" rel="next" title="Linux Notes">
      Linux Notes <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  

  </div>


          </div>
          
    <div class="comments" id="valine-comments"></div>

<script>
  window.addEventListener('tabs:register', () => {
    let activeClass = CONFIG.comments.activeClass;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#SpringMVC-Learning-Notes"><span class="nav-number">1.</span> <span class="nav-text">SpringMVC Learning Notes</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#SpringMVC-个人学习笔记"><span class="nav-number">2.</span> <span class="nav-text">SpringMVC 个人学习笔记</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#part1、三层架构和MVC"><span class="nav-number">2.1.</span> <span class="nav-text">part1、三层架构和MVC</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#一、三层架构"><span class="nav-number">2.1.1.</span> <span class="nav-text">一、三层架构</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#二、MVC模型"><span class="nav-number">2.1.2.</span> <span class="nav-text">二、MVC模型</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#part2、SpringMVC的入门案例"><span class="nav-number">2.2.</span> <span class="nav-text">part2、SpringMVC的入门案例</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#一、SpringMVC的概述"><span class="nav-number">2.2.1.</span> <span class="nav-text">一、SpringMVC的概述</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1、SpringMVC的概述"><span class="nav-number">2.2.1.1.</span> <span class="nav-text">1、SpringMVC的概述</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2、SpringMVC在三层架构中的位置：表现层框架"><span class="nav-number">2.2.1.2.</span> <span class="nav-text">2、SpringMVC在三层架构中的位置：表现层框架</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3、SpringMVC的优势"><span class="nav-number">2.2.1.3.</span> <span class="nav-text">3、SpringMVC的优势</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4、SpringMVC和Stru2的对比"><span class="nav-number">2.2.1.4.</span> <span class="nav-text">4、SpringMVC和Stru2的对比</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#共同点："><span class="nav-number">2.2.1.4.1.</span> <span class="nav-text">共同点：</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#区别："><span class="nav-number">2.2.1.4.2.</span> <span class="nav-text">区别：</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#二、SpringMVC的入门程序"><span class="nav-number">2.2.2.</span> <span class="nav-text">二、SpringMVC的入门程序</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1、创建Web工程，引入开发的jar包"><span class="nav-number">2.2.2.1.</span> <span class="nav-text">1、创建Web工程，引入开发的jar包</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#具体坐标如下"><span class="nav-number">2.2.2.1.1.</span> <span class="nav-text">具体坐标如下</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2、配置核心的控制器（配置DispatcherServlet）"><span class="nav-number">2.2.2.2.</span> <span class="nav-text">2、配置核心的控制器（配置DispatcherServlet）</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#在web-xml配置文件中核心控制器DispatcherServlet"><span class="nav-number">2.2.2.2.1.</span> <span class="nav-text">在web.xml配置文件中核心控制器DispatcherServlet</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3、编写springmvc-xml的配置文件"><span class="nav-number">2.2.2.3.</span> <span class="nav-text">3、编写springmvc.xml的配置文件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-编写index-jsp和HelloController控制器"><span class="nav-number">2.2.2.4.</span> <span class="nav-text">4. 编写index.jsp和HelloController控制器</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#a-index-jsp："><span class="nav-number">2.2.2.4.1.</span> <span class="nav-text">a) index.jsp：</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#b-HelloController"><span class="nav-number">2.2.2.4.2.</span> <span class="nav-text">b) HelloController</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#5、在WEB-INF目录下创建pages文件夹，编写success-jsp的成功页面"><span class="nav-number">2.2.2.5.</span> <span class="nav-text">5、在WEB-INF目录下创建pages文件夹，编写success.jsp的成功页面</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#6、启动Tomcat服务器，进行测试"><span class="nav-number">2.2.2.6.</span> <span class="nav-text">6、启动Tomcat服务器，进行测试</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#三、入门案例的执行过程分析"><span class="nav-number">2.2.3.</span> <span class="nav-text">三、入门案例的执行过程分析</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1、入门案例的执行流程"><span class="nav-number">2.2.3.1.</span> <span class="nav-text">1、入门案例的执行流程</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2、入门案例中的组件分析"><span class="nav-number">2.2.3.2.</span> <span class="nav-text">2、入门案例中的组件分析</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#a-DispatcherServlet：前端控制器"><span class="nav-number">2.2.3.2.1.</span> <span class="nav-text">a) DispatcherServlet：前端控制器</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#b-HandlerMapping：处理器映射器"><span class="nav-number">2.2.3.2.2.</span> <span class="nav-text">b) HandlerMapping：处理器映射器</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#c-Handler：处理器"><span class="nav-number">2.2.3.2.3.</span> <span class="nav-text">c) Handler：处理器</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#d-HandlAdapter：处理器适配器（转接口）"><span class="nav-number">2.2.3.2.4.</span> <span class="nav-text">d) HandlAdapter：处理器适配器（转接口）</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#e-View-Resolver：视图解析器"><span class="nav-number">2.2.3.2.5.</span> <span class="nav-text">e) View Resolver：视图解析器</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#f-View：视图"><span class="nav-number">2.2.3.2.6.</span> <span class="nav-text">f) View：视图</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3、-lt-mvc-annotation-driven-gt-说明"><span class="nav-number">2.2.3.3.</span> <span class="nav-text">3、&lt;mvc:annotation-driven&gt;说明</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#四、RequestMapping注解"><span class="nav-number">2.2.4.</span> <span class="nav-text">四、RequestMapping注解</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1、RequestMapping注解的作用是建立请求URL和处理方法之间的对应关系"><span class="nav-number">2.2.4.1.</span> <span class="nav-text">1、RequestMapping注解的作用是建立请求URL和处理方法之间的对应关系</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-、RequestMapping注解可以作用在方法和类上：更加清晰"><span class="nav-number">2.2.4.2.</span> <span class="nav-text">2.、RequestMapping注解可以作用在方法和类上：更加清晰</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3、RequestMapping的属性"><span class="nav-number">2.2.4.3.</span> <span class="nav-text">3、RequestMapping的属性</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#part3、请求参数的绑定"><span class="nav-number">2.3.</span> <span class="nav-text">part3、请求参数的绑定</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#一、请求参数的绑定说明"><span class="nav-number">2.3.1.</span> <span class="nav-text">一、请求参数的绑定说明</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1、绑定机制"><span class="nav-number">2.3.1.1.</span> <span class="nav-text">1、绑定机制</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2、支持的数据类型"><span class="nav-number">2.3.1.2.</span> <span class="nav-text">2、支持的数据类型</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#二、基本数据类型和字符串类型"><span class="nav-number">2.3.2.</span> <span class="nav-text">二、基本数据类型和字符串类型</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#三、实体类型（JavaBean）"><span class="nav-number">2.3.3.</span> <span class="nav-text">三、实体类型（JavaBean）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#四、集合属性数据封装"><span class="nav-number">2.3.4.</span> <span class="nav-text">四、集合属性数据封装</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1、List：JSP页面编写方式：list-0-属性"><span class="nav-number">2.3.4.1.</span> <span class="nav-text">1、List：JSP页面编写方式：list[0].属性</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2、Map：map-‘key’-属性"><span class="nav-number">2.3.4.2.</span> <span class="nav-text">2、Map：map[‘key’].属性</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#五、自定义类型转换器"><span class="nav-number">2.3.5.</span> <span class="nav-text">五、自定义类型转换器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#六、在控制器中使用原生的ServletAPI对象："><span class="nav-number">2.3.6.</span> <span class="nav-text">六、在控制器中使用原生的ServletAPI对象：</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#part4、常用的注解"><span class="nav-number">2.4.</span> <span class="nav-text">part4、常用的注解</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#一、RequestParam注解"><span class="nav-number">2.4.1.</span> <span class="nav-text">一、RequestParam注解</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1、作用："><span class="nav-number">2.4.1.1.</span> <span class="nav-text">1、作用：</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2、属性："><span class="nav-number">2.4.1.2.</span> <span class="nav-text">2、属性：</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#二、RequestBody注解（异步，json）"><span class="nav-number">2.4.2.</span> <span class="nav-text">二、RequestBody注解（异步，json）</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1、作用：-1"><span class="nav-number">2.4.2.1.</span> <span class="nav-text">1、作用：</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2、属性：-1"><span class="nav-number">2.4.2.2.</span> <span class="nav-text">2、属性：</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#三、PathVariable注解"><span class="nav-number">2.4.3.</span> <span class="nav-text">三、PathVariable注解</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1、作用：-2"><span class="nav-number">2.4.3.1.</span> <span class="nav-text">1、作用：</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2、属性：-2"><span class="nav-number">2.4.3.2.</span> <span class="nav-text">2、属性：</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3、Restful风格的URL"><span class="nav-number">2.4.3.3.</span> <span class="nav-text">3、Restful风格的URL</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#a"><span class="nav-number">2.4.3.3.1.</span> <span class="nav-text">a)</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#b-restful风格的URL优点"><span class="nav-number">2.4.3.3.2.</span> <span class="nav-text">b) restful风格的URL优点:</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#c-restful特性"><span class="nav-number">2.4.3.3.3.</span> <span class="nav-text">c) restful特性</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4、实践"><span class="nav-number">2.4.3.4.</span> <span class="nav-text">4、实践</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#四、基于-HiddentHttpMethodFilter-的示例（了解即可）"><span class="nav-number">2.4.4.</span> <span class="nav-text">四、基于 HiddentHttpMethodFilter 的示例（了解即可）</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1、作用：-3"><span class="nav-number">2.4.4.1.</span> <span class="nav-text">1、作用：</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2、使用方法："><span class="nav-number">2.4.4.2.</span> <span class="nav-text">2、使用方法：</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3、源码分析："><span class="nav-number">2.4.4.3.</span> <span class="nav-text">3、源码分析：</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#五、RequestHeader注解（一般开发中不怎么用）"><span class="nav-number">2.4.5.</span> <span class="nav-text">五、RequestHeader注解（一般开发中不怎么用）</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1、作用：-4"><span class="nav-number">2.4.5.1.</span> <span class="nav-text">1、作用：</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2、属性：-3"><span class="nav-number">2.4.5.2.</span> <span class="nav-text">2、属性：</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3、实践"><span class="nav-number">2.4.5.3.</span> <span class="nav-text">3、实践</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#六、CookieValue注解"><span class="nav-number">2.4.6.</span> <span class="nav-text">六、CookieValue注解</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1、作用：-5"><span class="nav-number">2.4.6.1.</span> <span class="nav-text">1、作用：</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2、属性：-4"><span class="nav-number">2.4.6.2.</span> <span class="nav-text">2、属性：</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3、实践-1"><span class="nav-number">2.4.6.3.</span> <span class="nav-text">3、实践</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#七、ModelAttribute注解"><span class="nav-number">2.4.7.</span> <span class="nav-text">七、ModelAttribute注解</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1、作用"><span class="nav-number">2.4.7.1.</span> <span class="nav-text">1、作用</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2、属性：-5"><span class="nav-number">2.4.7.2.</span> <span class="nav-text">2、属性：</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3、应用场景："><span class="nav-number">2.4.7.3.</span> <span class="nav-text">3、应用场景：</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4、实践-1"><span class="nav-number">2.4.7.4.</span> <span class="nav-text">4、实践</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#a-方法无返回值："><span class="nav-number">2.4.7.4.1.</span> <span class="nav-text">a) 方法无返回值：</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#b-方法有返回值："><span class="nav-number">2.4.7.4.2.</span> <span class="nav-text">b) 方法有返回值：</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#八、SessionAttributes（复数）"><span class="nav-number">2.4.8.</span> <span class="nav-text">八、SessionAttributes（复数）</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1、作用：-6"><span class="nav-number">2.4.8.1.</span> <span class="nav-text">1、作用：</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2、属性"><span class="nav-number">2.4.8.2.</span> <span class="nav-text">2、属性</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3、实践："><span class="nav-number">2.4.8.3.</span> <span class="nav-text">3、实践：</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#part5、响应数据和结果视图"><span class="nav-number">2.5.</span> <span class="nav-text">part5、响应数据和结果视图</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#一、返回值分类"><span class="nav-number">2.5.1.</span> <span class="nav-text">一、返回值分类</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1、返回字符串"><span class="nav-number">2.5.1.1.</span> <span class="nav-text">1、返回字符串</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2、返回值是void"><span class="nav-number">2.5.1.2.</span> <span class="nav-text">2、返回值是void</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-返回值是ModelAndView对象（与返回字符串方式类似）"><span class="nav-number">2.5.1.3.</span> <span class="nav-text">3. 返回值是ModelAndView对象（与返回字符串方式类似）</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#二、SpringMVC框架提供的转发和重定向"><span class="nav-number">2.5.2.</span> <span class="nav-text">二、SpringMVC框架提供的转发和重定向</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1、forward请求转发"><span class="nav-number">2.5.2.1.</span> <span class="nav-text">1、forward请求转发</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2、redirect重定向"><span class="nav-number">2.5.2.2.</span> <span class="nav-text">2、redirect重定向</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#三、ResponseBody响应json数据"><span class="nav-number">2.5.3.</span> <span class="nav-text">三、ResponseBody响应json数据</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1、DispatcherServlet"><span class="nav-number">2.5.3.1.</span> <span class="nav-text">1、DispatcherServlet</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2、使用-RequestBody获取请求体数据（点击查看作用）"><span class="nav-number">2.5.3.2.</span> <span class="nav-text">2、使用@RequestBody获取请求体数据（点击查看作用）</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3、使用-RequestBody注解把json的字符串转换成JavaBean的对象"><span class="nav-number">2.5.3.3.</span> <span class="nav-text">3、使用@RequestBody注解把json的字符串转换成JavaBean的对象</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4、使用-ResponseBody注解把JavaBean对象转换成json字符串，直接响应"><span class="nav-number">2.5.3.4.</span> <span class="nav-text">4、使用@ResponseBody注解把JavaBean对象转换成json字符串，直接响应</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#part6、SpringMVC实现文件上传"><span class="nav-number">2.6.</span> <span class="nav-text">part6、SpringMVC实现文件上传</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1、传统文件上传的回顾"><span class="nav-number">2.6.1.</span> <span class="nav-text">1、传统文件上传的回顾</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#a-、必要前提"><span class="nav-number">2.6.1.1.</span> <span class="nav-text">a)、必要前提</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#b-、原理分析"><span class="nav-number">2.6.1.2.</span> <span class="nav-text">b)、原理分析</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#c-、借助第三方组件实现文件上传"><span class="nav-number">2.6.1.3.</span> <span class="nav-text">c)、借助第三方组件实现文件上传</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#d-、代码："><span class="nav-number">2.6.1.4.</span> <span class="nav-text">d)、代码：</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2、SpringMVC传统方式文件上传"><span class="nav-number">2.6.2.</span> <span class="nav-text">2、SpringMVC传统方式文件上传</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3、SpringMVC跨服务器方式文件上传"><span class="nav-number">2.6.3.</span> <span class="nav-text">3、SpringMVC跨服务器方式文件上传</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1、搭建图片服务器："><span class="nav-number">2.6.3.1.</span> <span class="nav-text">1、搭建图片服务器：</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2、实现SpringMVC跨服务器方式文件上传"><span class="nav-number">2.6.3.2.</span> <span class="nav-text">2、实现SpringMVC跨服务器方式文件上传</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#part7、SpringMVC的异常处理"><span class="nav-number">2.7.</span> <span class="nav-text">part7、SpringMVC的异常处理</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1、异常处理思路"><span class="nav-number">2.7.1.</span> <span class="nav-text">1、异常处理思路</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2、SpringMVC的异常处理"><span class="nav-number">2.7.2.</span> <span class="nav-text">2、SpringMVC的异常处理</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#a-、不进行处理："><span class="nav-number">2.7.2.0.1.</span> <span class="nav-text">a)、不进行处理：</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#b-、异常处理"><span class="nav-number">2.7.2.0.2.</span> <span class="nav-text">b)、异常处理</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#i-、自定义异常类：继承Exception"><span class="nav-number">2.7.2.0.2.1.</span> <span class="nav-text">i)、自定义异常类：继承Exception</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#ii-、自定义异常处理器"><span class="nav-number">2.7.2.0.2.2.</span> <span class="nav-text">ii)、自定义异常处理器</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#iii-、配置异常处理器"><span class="nav-number">2.7.2.0.2.3.</span> <span class="nav-text">iii)、配置异常处理器</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#iv-、结果"><span class="nav-number">2.7.2.0.2.4.</span> <span class="nav-text">iv)、结果</span></a></li></ol></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#part8、SpringMVC框架中的拦截器"><span class="nav-number">2.8.</span> <span class="nav-text">part8、SpringMVC框架中的拦截器</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1、拦截器的概述"><span class="nav-number">2.8.1.</span> <span class="nav-text">1、拦截器的概述</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2、自定义拦截器步骤"><span class="nav-number">2.8.2.</span> <span class="nav-text">2、自定义拦截器步骤</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3、HandlerInterceptor接口中的方法"><span class="nav-number">2.8.3.</span> <span class="nav-text">3、HandlerInterceptor接口中的方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4、配置多个拦截器"><span class="nav-number">2.8.4.</span> <span class="nav-text">4、配置多个拦截器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#part9、SpringMVC暂告一段落……未完待续……"><span class="nav-number">2.8.5.</span> <span class="nav-text">part9、SpringMVC暂告一段落……未完待续……</span></a></li></ol></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="zephxu"
      src="/images/avatar.jpg">
  <p class="site-author-name" itemprop="name">zephxu</p>
  <div class="site-description" itemprop="description">纯小白，知足常乐</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">16</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">11</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/ZephXu07" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;ZephXu07" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://weibo.com/u/5409078656" title="Weibo → https:&#x2F;&#x2F;weibo.com&#x2F;u&#x2F;5409078656" rel="noopener" target="_blank"><i class="fa fa-fw fa-weibo"></i>Weibo</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://space.bilibili.com/14445452" title="bilibili → https:&#x2F;&#x2F;space.bilibili.com&#x2F;14445452" rel="noopener" target="_blank"><i class="fa fa-fw fa-bilibili"></i>bilibili</a>
      </span>
  </div>


  <div class="links-of-blogroll motion-element">
    <div class="links-of-blogroll-title">
      <i class="fa fa-fw fa-link"></i>
      Links
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="http://www.mackxin.com/" title="http:&#x2F;&#x2F;www.mackxin.com" rel="noopener" target="_blank">馨客栈</a>
        </li>
    </ul>
  </div>

      </div>
	  <iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width=290 height=80 src="//music.163.com/outchain/player?type=2&id=1409738400&auto=0&height=66">
    </iframe>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">zephxu</span>
</div>

<!--
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> 强力驱动 v4.2.0
  </div>
  <span class="post-meta-divider">|</span>
  <div class="theme-info">主题 – <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> v7.7.0
  </div>-->

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>








      </div>
    </footer>
  </div>

  
  
  <script color='0,0,255' opacity='0.5' zIndex='-1' count='99' src="/lib/canvas-nest/canvas-nest.min.js"></script>
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  


<script>
NexT.utils.loadComments(document.querySelector('#valine-comments'), () => {
  NexT.utils.getScript('https://cdn.jsdelivr.net/npm/valine@1.3.10/dist/Valine.min.js', () => {
    var GUEST = ['nick', 'mail', 'link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item => {
      return GUEST.includes(item);
    });
    new Valine({
      el: '#valine-comments',
      verify: false,
      notify: false,
      appId: 'Aw21FtxWaiunKatng24s06C5-gzGzoHsz',
      appKey: 'FUHtt1Dv3boFNL2dEjuwbbk0',
      placeholder: "ヾﾉ≧∀≦)o 来呀！吐槽一番吧！（如果你留下邮箱的话我会立即收到消息哦！）",
      avatar: 'mm',
      meta: guest,
      pageSize: '10' || 10,
      visitor: false,
      lang: 'zh-cn' || 'zh-cn',
      path: location.pathname,
      recordIP: true,
      serverURLs: ''
    });
  }, window.Valine);
});
</script>

</body>
</html>
